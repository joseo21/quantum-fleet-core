{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch } from 'vue';\nimport Modal from './Modal.vue';\n\n// Datos de ejemplo\n\nexport default {\n  __name: 'EmpresasView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const customers = ref([...Array(20).keys()].map(i => ({\n      id: i + 1,\n      createdAt: new Date(Date.now() - i * 86400000).toISOString(),\n      name: `Empresa ${i + 1}`,\n      rut: `12.${i + 1}.123-4`,\n      contact: `+56 9 12${i + 1} 34${i + 1}`\n    })));\n    const searchTerm = ref('');\n    const selectedIds = ref([]);\n    const selectAll = ref(false);\n    const showModal = ref(false);\n    const editingCompany = ref(null);\n    const templates = ref([{\n      id: 1,\n      name: 'B√°sico'\n    }, {\n      id: 2,\n      name: 'Profesional'\n    }, {\n      id: 3,\n      name: 'Avanzado'\n    }, {\n      id: 4,\n      name: 'Full'\n    }]);\n\n    // Paginaci√≥n\n    const rowsPerPage = ref(5);\n    const currentPage = ref(1);\n    const totalPages = computed(() => Math.ceil(filteredCustomers.value.length / rowsPerPage.value));\n    const paginatedCustomers = computed(() => {\n      const start = (currentPage.value - 1) * rowsPerPage.value;\n      return filteredCustomers.value.slice(start, start + rowsPerPage.value);\n    });\n\n    // B√∫squeda + filtrado\n    const filteredCustomers = computed(() => {\n      if (!searchTerm.value) return customers.value;\n      return customers.value.filter(c => c.name.toLowerCase().includes(searchTerm.value.toLowerCase()) || c.rut.toLowerCase().includes(searchTerm.value.toLowerCase()) || c.contact.toLowerCase().includes(searchTerm.value.toLowerCase()));\n    });\n\n    // Funciones\n    const toggleSelectAll = () => selectAll.value ? selectedIds.value = paginatedCustomers.value.map(c => c.id) : selectedIds.value = [];\n    const previousPage = () => currentPage.value = Math.max(currentPage.value - 1, 1);\n    const nextPage = () => currentPage.value = Math.min(currentPage.value + 1, totalPages.value);\n    const formatDate = date => new Date(date).toLocaleDateString('es-CL');\n    const openModal = (company = null) => {\n      editingCompany.value = company;\n      showModal.value = true;\n    };\n    const closeModal = () => {\n      showModal.value = false;\n      editingCompany.value = null;\n    };\n    const saveCompany = company => {\n      if (company.id) {\n        const idx = customers.value.findIndex(c => c.id === company.id);\n        customers.value[idx] = {\n          ...company\n        };\n      } else {\n        customers.value.push({\n          ...company,\n          id: crypto.randomUUID(),\n          createdAt: new Date().toISOString()\n        });\n      }\n      closeModal();\n    };\n    const copyCustomerData = c => navigator.clipboard.writeText(`Nombre: ${c.name}\\nRUT: ${c.rut}\\nContacto: ${c.contact}`);\n    watch(paginatedCustomers, () => selectAll.value = false);\n    const __returned__ = {\n      customers,\n      searchTerm,\n      selectedIds,\n      selectAll,\n      showModal,\n      editingCompany,\n      templates,\n      rowsPerPage,\n      currentPage,\n      totalPages,\n      paginatedCustomers,\n      filteredCustomers,\n      toggleSelectAll,\n      previousPage,\n      nextPage,\n      formatDate,\n      openModal,\n      closeModal,\n      saveCompany,\n      copyCustomerData,\n      ref,\n      computed,\n      watch,\n      Modal\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","Modal","customers","Array","keys","map","i","id","createdAt","Date","now","toISOString","name","rut","contact","searchTerm","selectedIds","selectAll","showModal","editingCompany","templates","rowsPerPage","currentPage","totalPages","Math","ceil","filteredCustomers","value","length","paginatedCustomers","start","slice","filter","c","toLowerCase","includes","toggleSelectAll","previousPage","max","nextPage","min","formatDate","date","toLocaleDateString","openModal","company","closeModal","saveCompany","idx","findIndex","push","crypto","randomUUID","copyCustomerData","navigator","clipboard","writeText"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/Views/EmpresasView.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col p-4\">\n    <!-- Navbar -->\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-gray-700 pb-2\">\n      <input v-model=\"searchTerm\" placeholder=\"Buscar empresa...\"\n        class=\"w-full sm:flex-1 px-3 py-1 rounded bg-gray-700 text-white focus:outline-none focus:ring focus:ring-indigo-500\" />\n\n      <div class=\"flex gap-2 mt-2 sm:mt-0\">\n        <button @click=\"openModal()\" class=\"bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded text-white\">\n          ‚ûï Agregar Empresa\n        </button>\n        <button v-if=\"selectedIds.length\" @click=\"deleteSelected\"\n          class=\"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white\">\n          üóë Eliminar seleccionados\n        </button>\n      </div>\n    </div>\n\n    <!-- Tabla -->\n    <div class=\"overflow-y-auto mt-4 max-h-[400px] rounded-lg shadow\">\n      <table class=\"min-w-full bg-gray-800 text-white\">\n        <thead>\n          <tr class=\"bg-[#102372]\">\n            <th class=\"px-4 py-2\">\n              <input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" title=\"Seleccionar todo\" />\n            </th>\n            <th class=\"px-4 py-2 cursor-pointer\" @click=\"sortBy('createdAt')\">Fecha</th>\n            <th class=\"px-4 py-2 cursor-pointer\" @click=\"sortBy('name')\">Nombre</th>\n            <th class=\"px-4 py-2\">RUT</th>\n            <th class=\"px-4 py-2\">Contacto</th>\n            <th class=\"px-4 py-2\">Acciones</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"customer in paginatedCustomers\" :key=\"customer.id\" class=\"hover:bg-gray-700\">\n            <td class=\"px-4 py-2\">\n              <input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" />\n            </td>\n            <td class=\"px-4 py-2\">{{ formatDate(customer.createdAt) }}</td>\n            <td class=\"px-4 py-2\">{{ customer.name }}</td>\n            <td class=\"px-4 py-2\">{{ customer.rut }}</td>\n            <td class=\"px-4 py-2\">{{ customer.contact }}</td>\n            <td class=\"px-4 py-2 flex gap-2\">\n              <button @click=\"openModal(customer)\" class=\"bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded\">‚úèÔ∏è</button>\n              <button @click=\"copyCustomerData(customer)\" class=\"bg-gray-600 hover:bg-gray-700 px-2 py-1 rounded\">üìã</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Paginaci√≥n -->\n    <div class=\"flex justify-center gap-1 mt-2 text-gray-300\">\n      <button @click=\"previousPage\" :disabled=\"currentPage === 1\" class=\"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600\">‚óÄ</button>\n      <span>{{ currentPage }} / {{ totalPages }}</span>\n      <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\" class=\"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600\">‚ñ∂</button>\n    </div>\n\n    <!-- Modal multiuso -->\n    <Modal v-if=\"showModal\" :company=\"editingCompany\" :templates=\"templates\" @close=\"closeModal\" @save=\"saveCompany\"/>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport Modal from './Modal.vue'\n\n// Datos de ejemplo\nconst customers = ref([...Array(20).keys()].map(i => ({\n  id: i+1,\n  createdAt: new Date(Date.now() - i*86400000).toISOString(),\n  name: `Empresa ${i+1}`,\n  rut: `12.${i+1}.123-4`,\n  contact: `+56 9 12${i+1} 34${i+1}`\n})))\n\nconst searchTerm = ref('')\nconst selectedIds = ref([])\nconst selectAll = ref(false)\nconst showModal = ref(false)\nconst editingCompany = ref(null)\nconst templates = ref([\n  { id: 1, name: 'B√°sico' },\n  { id: 2, name: 'Profesional' },\n  { id: 3, name: 'Avanzado' },\n  { id: 4, name: 'Full' }\n])\n\n// Paginaci√≥n\nconst rowsPerPage = ref(5)\nconst currentPage = ref(1)\nconst totalPages = computed(() => Math.ceil(filteredCustomers.value.length / rowsPerPage.value))\nconst paginatedCustomers = computed(() => {\n  const start = (currentPage.value-1)*rowsPerPage.value\n  return filteredCustomers.value.slice(start, start+rowsPerPage.value)\n})\n\n// B√∫squeda + filtrado\nconst filteredCustomers = computed(() => {\n  if (!searchTerm.value) return customers.value\n  return customers.value.filter(c =>\n    c.name.toLowerCase().includes(searchTerm.value.toLowerCase()) ||\n    c.rut.toLowerCase().includes(searchTerm.value.toLowerCase()) ||\n    c.contact.toLowerCase().includes(searchTerm.value.toLowerCase())\n  )\n})\n\n// Funciones\nconst toggleSelectAll = () => selectAll.value ? selectedIds.value = paginatedCustomers.value.map(c=>c.id) : selectedIds.value = []\nconst previousPage = () => currentPage.value = Math.max(currentPage.value-1, 1)\nconst nextPage = () => currentPage.value = Math.min(currentPage.value+1, totalPages.value)\nconst formatDate = date => new Date(date).toLocaleDateString('es-CL')\n\nconst openModal = (company=null) => { editingCompany.value = company; showModal.value = true }\nconst closeModal = () => { showModal.value = false; editingCompany.value = null }\nconst saveCompany = (company) => {\n  if (company.id) {\n    const idx = customers.value.findIndex(c=>c.id===company.id)\n    customers.value[idx] = {...company}\n  } else {\n    customers.value.push({...company, id: crypto.randomUUID(), createdAt: new Date().toISOString()})\n  }\n  closeModal()\n}\n\nconst copyCustomerData = (c) => navigator.clipboard.writeText(`Nombre: ${c.name}\\nRUT: ${c.rut}\\nContacto: ${c.contact}`)\nwatch(paginatedCustomers, () => selectAll.value = false)\n</script>\n\n<style scoped>\n.fade-scale-enter-active,\n.fade-scale-leave-active {\n  transition: all 0.3s ease;\n}\n\n.fade-scale-enter-from,\n.fade-scale-leave-to {\n  opacity: 0;\n  transform: scale(0.8);\n}\n\n.fade-scale-enter-to,\n.fade-scale-leave-from {\n  opacity: 1;\n  transform: scale(1);\n}\n</style>\n"],"mappings":";;;;AAgEA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,KAAI;AACzC,OAAOC,KAAK,MAAM,aAAY;;AAE9B;;;;;;;;IACA,MAAMC,SAAS,GAAGJ,GAAG,CAAC,CAAC,GAAGK,KAAK,CAAC,EAAE,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,KAAK;MACpDC,EAAE,EAAED,CAAC,GAAC,CAAC;MACPE,SAAS,EAAE,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGJ,CAAC,GAAC,QAAQ,CAAC,CAACK,WAAW,CAAC,CAAC;MAC1DC,IAAI,EAAE,WAAWN,CAAC,GAAC,CAAC,EAAE;MACtBO,GAAG,EAAE,MAAMP,CAAC,GAAC,CAAC,QAAQ;MACtBQ,OAAO,EAAE,WAAWR,CAAC,GAAC,CAAC,MAAMA,CAAC,GAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,MAAMS,UAAU,GAAGjB,GAAG,CAAC,EAAE;IACzB,MAAMkB,WAAW,GAAGlB,GAAG,CAAC,EAAE;IAC1B,MAAMmB,SAAS,GAAGnB,GAAG,CAAC,KAAK;IAC3B,MAAMoB,SAAS,GAAGpB,GAAG,CAAC,KAAK;IAC3B,MAAMqB,cAAc,GAAGrB,GAAG,CAAC,IAAI;IAC/B,MAAMsB,SAAS,GAAGtB,GAAG,CAAC,CACpB;MAAES,EAAE,EAAE,CAAC;MAAEK,IAAI,EAAE;IAAS,CAAC,EACzB;MAAEL,EAAE,EAAE,CAAC;MAAEK,IAAI,EAAE;IAAc,CAAC,EAC9B;MAAEL,EAAE,EAAE,CAAC;MAAEK,IAAI,EAAE;IAAW,CAAC,EAC3B;MAAEL,EAAE,EAAE,CAAC;MAAEK,IAAI,EAAE;IAAO,EACvB;;IAED;IACA,MAAMS,WAAW,GAAGvB,GAAG,CAAC,CAAC;IACzB,MAAMwB,WAAW,GAAGxB,GAAG,CAAC,CAAC;IACzB,MAAMyB,UAAU,GAAGxB,QAAQ,CAAC,MAAMyB,IAAI,CAACC,IAAI,CAACC,iBAAiB,CAACC,KAAK,CAACC,MAAM,GAAGP,WAAW,CAACM,KAAK,CAAC;IAC/F,MAAME,kBAAkB,GAAG9B,QAAQ,CAAC,MAAM;MACxC,MAAM+B,KAAK,GAAG,CAACR,WAAW,CAACK,KAAK,GAAC,CAAC,IAAEN,WAAW,CAACM,KAAI;MACpD,OAAOD,iBAAiB,CAACC,KAAK,CAACI,KAAK,CAACD,KAAK,EAAEA,KAAK,GAACT,WAAW,CAACM,KAAK;IACrE,CAAC;;IAED;IACA,MAAMD,iBAAiB,GAAG3B,QAAQ,CAAC,MAAM;MACvC,IAAI,CAACgB,UAAU,CAACY,KAAK,EAAE,OAAOzB,SAAS,CAACyB,KAAI;MAC5C,OAAOzB,SAAS,CAACyB,KAAK,CAACK,MAAM,CAACC,CAAC,IAC7BA,CAAC,CAACrB,IAAI,CAACsB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpB,UAAU,CAACY,KAAK,CAACO,WAAW,CAAC,CAAC,CAAC,IAC7DD,CAAC,CAACpB,GAAG,CAACqB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpB,UAAU,CAACY,KAAK,CAACO,WAAW,CAAC,CAAC,CAAC,IAC5DD,CAAC,CAACnB,OAAO,CAACoB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpB,UAAU,CAACY,KAAK,CAACO,WAAW,CAAC,CAAC,CACjE;IACF,CAAC;;IAED;IACA,MAAME,eAAe,GAAGA,CAAA,KAAMnB,SAAS,CAACU,KAAK,GAAGX,WAAW,CAACW,KAAK,GAAGE,kBAAkB,CAACF,KAAK,CAACtB,GAAG,CAAC4B,CAAC,IAAEA,CAAC,CAAC1B,EAAE,CAAC,GAAGS,WAAW,CAACW,KAAK,GAAG,EAAC;IACjI,MAAMU,YAAY,GAAGA,CAAA,KAAMf,WAAW,CAACK,KAAK,GAAGH,IAAI,CAACc,GAAG,CAAChB,WAAW,CAACK,KAAK,GAAC,CAAC,EAAE,CAAC;IAC9E,MAAMY,QAAQ,GAAGA,CAAA,KAAMjB,WAAW,CAACK,KAAK,GAAGH,IAAI,CAACgB,GAAG,CAAClB,WAAW,CAACK,KAAK,GAAC,CAAC,EAAEJ,UAAU,CAACI,KAAK;IACzF,MAAMc,UAAU,GAAGC,IAAI,IAAI,IAAIjC,IAAI,CAACiC,IAAI,CAAC,CAACC,kBAAkB,CAAC,OAAO;IAEpE,MAAMC,SAAS,GAAGA,CAACC,OAAO,GAAC,IAAI,KAAK;MAAE1B,cAAc,CAACQ,KAAK,GAAGkB,OAAO;MAAE3B,SAAS,CAACS,KAAK,GAAG,IAAI;IAAC;IAC7F,MAAMmB,UAAU,GAAGA,CAAA,KAAM;MAAE5B,SAAS,CAACS,KAAK,GAAG,KAAK;MAAER,cAAc,CAACQ,KAAK,GAAG,IAAI;IAAC;IAChF,MAAMoB,WAAW,GAAIF,OAAO,IAAK;MAC/B,IAAIA,OAAO,CAACtC,EAAE,EAAE;QACd,MAAMyC,GAAG,GAAG9C,SAAS,CAACyB,KAAK,CAACsB,SAAS,CAAChB,CAAC,IAAEA,CAAC,CAAC1B,EAAE,KAAGsC,OAAO,CAACtC,EAAE;QAC1DL,SAAS,CAACyB,KAAK,CAACqB,GAAG,CAAC,GAAG;UAAC,GAAGH;QAAO;MACpC,CAAC,MAAM;QACL3C,SAAS,CAACyB,KAAK,CAACuB,IAAI,CAAC;UAAC,GAAGL,OAAO;UAAEtC,EAAE,EAAE4C,MAAM,CAACC,UAAU,CAAC,CAAC;UAAE5C,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC;QAAC,CAAC;MACjG;MACAmC,UAAU,CAAC;IACb;IAEA,MAAMO,gBAAgB,GAAIpB,CAAC,IAAKqB,SAAS,CAACC,SAAS,CAACC,SAAS,CAAC,WAAWvB,CAAC,CAACrB,IAAI,UAAUqB,CAAC,CAACpB,GAAG,eAAeoB,CAAC,CAACnB,OAAO,EAAE;IACxHd,KAAK,CAAC6B,kBAAkB,EAAE,MAAMZ,SAAS,CAACU,KAAK,GAAG,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}