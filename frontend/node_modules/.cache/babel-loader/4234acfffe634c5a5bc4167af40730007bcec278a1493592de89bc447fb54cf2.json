{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'EmpresasTable',\n  props: {\n    customers: Array,\n    selectedIds: Array,\n    searchTerm: String,\n    rowsPerPage: Number,\n    currentPage: Number\n  },\n  emits: ['edit', 'copy', 'delete-selected', 'update:selectedIds', 'update:searchTerm', 'update:currentPage'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const localSearch = ref(props.searchTerm);\n    const localSelected = ref([...props.selectedIds]);\n    const localPage = ref(props.currentPage);\n    watch(localSearch, val => emit('update:searchTerm', val));\n    watch(localSelected, val => emit('update:selectedIds', val));\n    watch(localPage, val => emit('update:currentPage', val));\n    const selectAll = ref(false);\n    const filteredCustomers = computed(() => {\n      if (!localSearch.value) return props.customers;\n      const term = localSearch.value.toLowerCase();\n      return props.customers.filter(c => c.name.toLowerCase().includes(term) || c.rut.toLowerCase().includes(term) || c.contact.toLowerCase().includes(term) || c.createdAt.includes(term));\n    });\n    const paginatedCustomers = computed(() => {\n      const start = (localPage.value - 1) * props.rowsPerPage;\n      return filteredCustomers.value.slice(start, start + props.rowsPerPage);\n    });\n    const totalPages = computed(() => Math.ceil(filteredCustomers.value.length / props.rowsPerPage));\n    const toggleSelectAll = () => selectAll.value ? localSelected.splice(0, localSelected.length, ...paginatedCustomers.value.map(c => c.id)) : localSelected.splice(0, localSelected.length, []);\n    const nextPage = () => {\n      if (localPage.value < totalPages.value) localPage.value++;\n    };\n    const previousPage = () => {\n      if (localPage.value > 1) localPage.value--;\n    };\n    watch(paginatedCustomers, () => selectAll.value = false);\n    const __returned__ = {\n      props,\n      emit,\n      localSearch,\n      localSelected,\n      localPage,\n      selectAll,\n      filteredCustomers,\n      paginatedCustomers,\n      totalPages,\n      toggleSelectAll,\n      nextPage,\n      previousPage,\n      ref,\n      computed,\n      watch,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","SvgIcon","props","__props","emit","__emit","localSearch","searchTerm","localSelected","selectedIds","localPage","currentPage","val","selectAll","filteredCustomers","value","customers","term","toLowerCase","filter","c","name","includes","rut","contact","createdAt","paginatedCustomers","start","rowsPerPage","slice","totalPages","Math","ceil","length","toggleSelectAll","splice","map","id","nextPage","previousPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/EmpresasTable.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col gap-3\">\n    <!-- Barra superior -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3\">\n      <div class=\"flex w-full sm:w-2/3 md:w-1/2\">\n        <div class=\"flex w-full border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden\">\n          <div class=\"flex items-center justify-center px-3 bg-gray-100 dark:bg-gray-800 text-gray-500\">\n            <SvgIcon name=\"search\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <input v-model=\"searchTerm\" placeholder=\"Buscar empresa...\" class=\"flex-1 p-2\" />\n          <button v-if=\"searchTerm\" @click=\"searchTerm = ''\" class=\"px-4 bg-[#ff6600] text-white\">Limpiar</button>\n        </div>\n      </div>\n\n      <div class=\"flex gap-2\">\n        <button @click=\"$emit('update:showAddModal', true)\">Agregar Empresa</button>\n        <button v-if=\"selectedIds.length > 0\" @click=\"$emit('delete-selected', selectedIds)\">Eliminar</button>\n      </div>\n    </div>\n\n    <!-- Tabla -->\n    <table class=\"min-w-full text-center border-collapse\">\n      <thead>\n        <tr>\n          <th><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" /></th>\n          <th>Fecha</th>\n          <th>Nombre</th>\n          <th>RUT</th>\n          <th>Contacto</th>\n          <th>Ciudad</th>\n          <th>Acciones</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"customer in paginatedCustomers\" :key=\"customer.id\">\n          <td><input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" /></td>\n          <td>{{ customer.createdAt }}</td>\n          <td>{{ customer.name }}</td>\n          <td>{{ customer.rut }}</td>\n          <td>{{ customer.contact }}</td>\n          <td>{{ customer.city }}</td>\n          <td>\n            <button @click=\"$emit('edit', customer)\">Editar</button>\n            <button @click=\"$emit('copy', customer)\">Copiar</button>\n          </td>\n        </tr>\n        <tr v-if=\"paginatedCustomers.length === 0\">\n          <td colspan=\"7\">No hay empresas registradas</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Paginación simple -->\n    <div class=\"flex justify-between items-center mt-2\">\n      <button @click=\"previousPage\" :disabled=\"currentPage === 1\">←</button>\n      <span>Página {{ currentPage }} / {{ totalPages }}</span>\n      <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\">→</button>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({\n  customers: Array,\n  selectedIds: Array,\n  searchTerm: String,\n  rowsPerPage: Number,\n  currentPage: Number\n})\nconst emit = defineEmits([\n  'edit', 'copy', 'delete-selected',\n  'update:selectedIds', 'update:searchTerm', 'update:currentPage'\n])\n\nconst localSearch = ref(props.searchTerm)\nconst localSelected = ref([...props.selectedIds])\nconst localPage = ref(props.currentPage)\n\nwatch(localSearch, val => emit('update:searchTerm', val))\nwatch(localSelected, val => emit('update:selectedIds', val))\nwatch(localPage, val => emit('update:currentPage', val))\n\nconst selectAll = ref(false)\n\nconst filteredCustomers = computed(() => {\n  if (!localSearch.value) return props.customers\n  const term = localSearch.value.toLowerCase()\n  return props.customers.filter(c =>\n    c.name.toLowerCase().includes(term) ||\n    c.rut.toLowerCase().includes(term) ||\n    c.contact.toLowerCase().includes(term) ||\n    c.createdAt.includes(term)\n  )\n})\n\nconst paginatedCustomers = computed(() => {\n  const start = (localPage.value - 1) * props.rowsPerPage\n  return filteredCustomers.value.slice(start, start + props.rowsPerPage)\n})\n\nconst totalPages = computed(() => Math.ceil(filteredCustomers.value.length / props.rowsPerPage))\n\nconst toggleSelectAll = () => selectAll.value\n  ? localSelected.splice(0, localSelected.length, ...paginatedCustomers.value.map(c => c.id))\n  : localSelected.splice(0, localSelected.length, [])\n\nconst nextPage = () => { if (localPage.value < totalPages.value) localPage.value++ }\nconst previousPage = () => { if (localPage.value > 1) localPage.value-- }\n\nwatch(paginatedCustomers, () => selectAll.value = false)\n</script>\n"],"mappings":";;;AA6DA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,KAAI;AACzC,OAAOC,OAAO,MAAM,gCAA+B;;;;;;;;;;;;;;;;IAEnD,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,IAAI,GAAGC,MAAA;IAKb,MAAMC,WAAW,GAAGR,GAAG,CAACI,KAAK,CAACK,UAAU;IACxC,MAAMC,aAAa,GAAGV,GAAG,CAAC,CAAC,GAAGI,KAAK,CAACO,WAAW,CAAC;IAChD,MAAMC,SAAS,GAAGZ,GAAG,CAACI,KAAK,CAACS,WAAW;IAEvCX,KAAK,CAACM,WAAW,EAAEM,GAAG,IAAIR,IAAI,CAAC,mBAAmB,EAAEQ,GAAG,CAAC;IACxDZ,KAAK,CAACQ,aAAa,EAAEI,GAAG,IAAIR,IAAI,CAAC,oBAAoB,EAAEQ,GAAG,CAAC;IAC3DZ,KAAK,CAACU,SAAS,EAAEE,GAAG,IAAIR,IAAI,CAAC,oBAAoB,EAAEQ,GAAG,CAAC;IAEvD,MAAMC,SAAS,GAAGf,GAAG,CAAC,KAAK;IAE3B,MAAMgB,iBAAiB,GAAGf,QAAQ,CAAC,MAAM;MACvC,IAAI,CAACO,WAAW,CAACS,KAAK,EAAE,OAAOb,KAAK,CAACc,SAAQ;MAC7C,MAAMC,IAAI,GAAGX,WAAW,CAACS,KAAK,CAACG,WAAW,CAAC;MAC3C,OAAOhB,KAAK,CAACc,SAAS,CAACG,MAAM,CAACC,CAAC,IAC7BA,CAAC,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,IAAI,CAAC,IACnCG,CAAC,CAACG,GAAG,CAACL,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,IAAI,CAAC,IAClCG,CAAC,CAACI,OAAO,CAACN,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,IAAI,CAAC,IACtCG,CAAC,CAACK,SAAS,CAACH,QAAQ,CAACL,IAAI,CAC3B;IACF,CAAC;IAED,MAAMS,kBAAkB,GAAG3B,QAAQ,CAAC,MAAM;MACxC,MAAM4B,KAAK,GAAG,CAACjB,SAAS,CAACK,KAAK,GAAG,CAAC,IAAIb,KAAK,CAAC0B,WAAU;MACtD,OAAOd,iBAAiB,CAACC,KAAK,CAACc,KAAK,CAACF,KAAK,EAAEA,KAAK,GAAGzB,KAAK,CAAC0B,WAAW;IACvE,CAAC;IAED,MAAME,UAAU,GAAG/B,QAAQ,CAAC,MAAMgC,IAAI,CAACC,IAAI,CAAClB,iBAAiB,CAACC,KAAK,CAACkB,MAAM,GAAG/B,KAAK,CAAC0B,WAAW,CAAC;IAE/F,MAAMM,eAAe,GAAGA,CAAA,KAAMrB,SAAS,CAACE,KAAI,GACxCP,aAAa,CAAC2B,MAAM,CAAC,CAAC,EAAE3B,aAAa,CAACyB,MAAM,EAAE,GAAGP,kBAAkB,CAACX,KAAK,CAACqB,GAAG,CAAChB,CAAC,IAAIA,CAAC,CAACiB,EAAE,CAAC,IACxF7B,aAAa,CAAC2B,MAAM,CAAC,CAAC,EAAE3B,aAAa,CAACyB,MAAM,EAAE,EAAE;IAEpD,MAAMK,QAAQ,GAAGA,CAAA,KAAM;MAAE,IAAI5B,SAAS,CAACK,KAAK,GAAGe,UAAU,CAACf,KAAK,EAAEL,SAAS,CAACK,KAAK,EAAE;IAAC;IACnF,MAAMwB,YAAY,GAAGA,CAAA,KAAM;MAAE,IAAI7B,SAAS,CAACK,KAAK,GAAG,CAAC,EAAEL,SAAS,CAACK,KAAK,EAAE;IAAC;IAExEf,KAAK,CAAC0B,kBAAkB,EAAE,MAAMb,SAAS,CAACE,KAAK,GAAG,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}