{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2 sm:p-4\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl relative w-full max-w-5xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-2xl transition-all duration-300 overflow-y-auto max-h-[90vh]\"\n};\nconst _hoisted_3 = {\n  class: \"text-lg sm:text-2xl font-extrabold mb-3 text-center text-[#1A457D] dark:text-[#66B3FF]\"\n};\nconst _hoisted_4 = {\n  class: \"text-[#007BFF] dark:text-[#FDD835]\"\n};\nconst _hoisted_5 = {\n  class: \"w-full\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"py-10 text-center text-base sm:text-lg font-medium text-gray-500 dark:text-gray-400\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"flex flex-col gap-4 items-center\"\n};\nconst _hoisted_8 = {\n  class: \"flex flex-wrap justify-between items-start pb-2 border-b border-gray-100 dark:border-gray-700 gap-2\"\n};\nconst _hoisted_9 = {\n  class: \"font-bold text-base sm:text-lg text-[#1A457D] dark:text-[#66B3FF] truncate flex-1 min-w-0\"\n};\nconst _hoisted_10 = {\n  class: \"text-xs font-semibold px-3 py-1 rounded-full bg-[#007BFF] text-white dark:bg-[#FDD835] dark:text-gray-900 shadow-md whitespace-nowrap\"\n};\nconst _hoisted_11 = {\n  class: \"grid grid-cols-2 gap-x-4 gap-y-3 text-gray-700 dark:text-gray-300 text-sm\"\n};\nconst _hoisted_12 = {\n  class: \"text-xs font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap\"\n};\nconst _hoisted_13 = {\n  class: \"col-span-2 flex flex-col pt-3 border-t border-gray-100 dark:border-gray-700\"\n};\nconst _hoisted_14 = {\n  class: \"font-medium text-sm truncate\"\n};\nconst _hoisted_15 = {\n  class: \"col-span-2 flex flex-col\"\n};\nconst _hoisted_16 = {\n  class: \"font-medium text-sm\"\n};\nconst _hoisted_17 = {\n  class: \"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 mt-4 border-t pt-3 border-gray-100 dark:border-gray-700\"\n};\nconst _hoisted_18 = {\n  class: \"flex items-center gap-2\"\n};\nconst _hoisted_19 = {\n  key: 0,\n  src: \"https://sinergygroup.cl/Mantenciones/img/verde.png\",\n  class: \"w-7 h-7 sm:w-8 sm:h-8 object-contain shadow rounded-full\",\n  alt: \"OK\",\n  title: \"OK\"\n};\nconst _hoisted_20 = {\n  key: 1,\n  src: \"https://sinergygroup.cl/Mantenciones/img/amarillo.png\",\n  class: \"w-7 h-7 sm:w-8 sm:h-8 object-contain shadow rounded-full\",\n  alt: \"Próxima\",\n  title: \"Próxima mantención\"\n};\nconst _hoisted_21 = {\n  key: 2,\n  src: \"https://sinergygroup.cl/Mantenciones/img/rojo.png\",\n  class: \"w-7 h-7 sm:w-8 sm:h-8 object-contain shadow rounded-full\",\n  alt: \"Requiere\",\n  title: \"Requiere mantención\"\n};\nconst _hoisted_22 = {\n  class: \"flex gap-2 justify-end\"\n};\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = [\"onClick\"];\nconst _hoisted_25 = {\n  key: 0,\n  class: \"flex flex-col items-center gap-2 w-full\"\n};\nconst _hoisted_26 = {\n  class: \"flex items-center gap-3\"\n};\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = {\n  class: \"flex items-center gap-2 px-2\"\n};\nconst _hoisted_29 = [\"onClick\", \"aria-current\"];\nconst _hoisted_30 = [\"disabled\"];\nconst _hoisted_31 = {\n  class: \"text-sm text-gray-700 dark:text-gray-300\"\n};\nconst _hoisted_32 = {\n  class: \"font-bold\"\n};\nconst _hoisted_33 = {\n  class: \"font-bold\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SvgIcon = _resolveComponent(\"SvgIcon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Título + cerrar \"), _createElementVNode(\"h2\", _hoisted_3, [_cache[3] || (_cache[3] = _createTextVNode(\" Mantenciones Vehículo \", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_4, _toDisplayString($props.patente), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('close')),\n    class: \"absolute top-3 right-3 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200\",\n    title: \"Cerrar\"\n  }, [_createVNode(_component_SvgIcon, {\n    name: \"close\",\n    class: \"w-5 h-5 sm:w-6 sm:h-6\"\n  })]), _createCommentVNode(\" CONTENEDOR: siempre mostramos solo las mantenciones paginadas \"), _createElementVNode(\"div\", _hoisted_5, [!$props.mantenciones || $props.mantenciones.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" No hay mantenciones registradas para el vehículo \" + _toDisplayString($props.patente) + \". \", 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createCommentVNode(\" Grid responsivo que contiene SOLO las mantenciones de la página actual \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"w-full grid gap-5 justify-items-center\", $options.gridColsClass])\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.mantencionesPaginadas, (m, idx) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: m.id || m.nombre + idx,\n      class: \"bg-white dark:bg-gray-900 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-4 flex flex-col gap-3 border border-gray-200 dark:border-gray-700 text-sm w-full sm:max-w-md\"\n    }, [_createCommentVNode(\" Encabezado \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString(m.nombre || m.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_10, _toDisplayString(m.tipo || m.type), 1 /* TEXT */)]), _createCommentVNode(\" Cuerpo \"), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.cardCampos(m), campo => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: campo.label,\n        class: \"flex flex-col\"\n      }, [_createElementVNode(\"span\", _hoisted_12, _toDisplayString(campo.label), 1 /* TEXT */), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"font-semibold text-base truncate\", campo.label === 'Faltante' ? $options.faltanteClass(m) : ''])\n      }, _toDisplayString(campo.value), 3 /* TEXT, CLASS */)]);\n    }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_13, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n      class: \"text-xs font-medium text-gray-500 dark:text-gray-400\"\n    }, \"Email Contacto\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_14, _toDisplayString(m.email || m.correo || 'N/A'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_15, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", {\n      class: \"text-xs font-medium text-gray-500 dark:text-gray-400\"\n    }, \"Fecha Creación\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_16, _toDisplayString($options.formatFecha(m.fechaCreacion)), 1 /* TEXT */)])]), _createCommentVNode(\" Estado y botones \"), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [m.estado === 'OK' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_19)) : m.estado === 'Próxima mantención' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_20)) : m.estado === 'Requiere mantención' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_21)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"span\", {\n      class: _normalizeClass([\"text-sm font-semibold\", {\n        'text-green-600 dark:text-green-400': m.estado === 'OK',\n        'text-yellow-600 dark:text-yellow-400': m.estado === 'Próxima mantención',\n        'text-red-500 dark:text-red-400': m.estado === 'Requiere mantención'\n      }])\n    }, _toDisplayString(m.estado), 3 /* TEXT, CLASS */)]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('editar', $options.absoluteIndex(idx)),\n      class: \"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-all shadow-md hover:shadow-lg focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50\"\n    }, \" Editar \", 8 /* PROPS */, _hoisted_23), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('eliminar', $options.absoluteIndex(idx)),\n      class: \"bg-red-500 hover:bg-red-600 text-white font-semibold px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-all shadow-md hover:shadow-lg focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\"\n    }, \" Eliminar \", 8 /* PROPS */, _hoisted_24)])])]);\n  }), 128 /* KEYED_FRAGMENT */))], 2 /* CLASS */), _createCommentVNode(\" Paginación: prev / dots / next \"), $options.totalPages > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.prevPage && $options.prevPage(...args)),\n    disabled: $data.currentPage === 1,\n    class: _normalizeClass([\"p-2 text-sm font-medium rounded-lg transition-colors duration-200 flex items-center gap-1\", $data.currentPage === 1 ? 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed' : 'bg-[#1A457D] hover:bg-[#007BFF] text-white'])\n  }, [_createVNode(_component_SvgIcon, {\n    name: \"chevron-left\",\n    class: \"w-4 h-4\"\n  }), _cache[6] || (_cache[6] = _createTextVNode(\" Anterior \", -1 /* CACHED */))], 10 /* CLASS, PROPS */, _hoisted_27), _createCommentVNode(\" indicadores (dots) \"), _createElementVNode(\"div\", _hoisted_28, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.totalPages, p => {\n    return _openBlock(), _createElementBlock(\"button\", {\n      key: p,\n      onClick: $event => $options.goToPage(p),\n      \"aria-current\": p === $data.currentPage,\n      class: _normalizeClass([\"w-2.5 h-2.5 rounded-full transition-transform transform\", p === $data.currentPage ? 'scale-125' : 'opacity-60 bg-gray-400 dark:bg-gray-600'])\n    }, null, 10 /* CLASS, PROPS */, _hoisted_29);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.nextPage && $options.nextPage(...args)),\n    disabled: $data.currentPage === $options.totalPages,\n    class: _normalizeClass([\"p-2 text-sm font-medium rounded-lg transition-colors duration-200 flex items-center gap-1\", $data.currentPage === $options.totalPages ? 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed' : 'bg-[#1A457D] hover:bg-[#007BFF] text-white'])\n  }, [_cache[7] || (_cache[7] = _createTextVNode(\" Siguiente \", -1 /* CACHED */)), _createVNode(_component_SvgIcon, {\n    name: \"chevron-right\",\n    class: \"w-4 h-4\"\n  })], 10 /* CLASS, PROPS */, _hoisted_30)]), _createElementVNode(\"div\", _hoisted_31, [_cache[8] || (_cache[8] = _createTextVNode(\" Página \", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_32, _toDisplayString($data.currentPage), 1 /* TEXT */), _cache[9] || (_cache[9] = _createTextVNode(\" de \", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_33, _toDisplayString($options.totalPages), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true)]))])])]);\n}","map":{"version":3,"names":["class","src","alt","title","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","_toDisplayString","$props","patente","onClick","_cache","$event","_ctx","$emit","_createVNode","_component_SvgIcon","name","_hoisted_5","mantenciones","length","_hoisted_6","_hoisted_7","_normalizeClass","$options","gridColsClass","_Fragment","_renderList","mantencionesPaginadas","m","idx","key","id","nombre","_hoisted_8","_hoisted_9","_hoisted_10","tipo","type","_hoisted_11","cardCampos","campo","label","_hoisted_12","faltanteClass","value","_hoisted_13","_hoisted_14","email","correo","_hoisted_15","_hoisted_16","formatFecha","fechaCreacion","_hoisted_17","_hoisted_18","estado","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","absoluteIndex","_hoisted_23","_hoisted_24","totalPages","_hoisted_25","_hoisted_26","args","prevPage","disabled","$data","currentPage","_hoisted_28","p","goToPage","nextPage","_hoisted_31","_hoisted_32","_hoisted_33"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalVerMantenciones.vue"],"sourcesContent":["<template>\n  <div\n    class=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-2 sm:p-4\">\n    <div\n      class=\"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl relative w-full max-w-5xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-2xl transition-all duration-300 overflow-y-auto max-h-[90vh]\">\n\n      <!-- Título + cerrar -->\n      <h2 class=\"text-lg sm:text-2xl font-extrabold mb-3 text-center text-[#1A457D] dark:text-[#66B3FF]\">\n        Mantenciones Vehículo\n        <span class=\"text-[#007BFF] dark:text-[#FDD835]\"> {{ patente }} </span>\n      </h2>\n\n      <button\n        @click=\"$emit('close')\"\n        class=\"absolute top-3 right-3 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200\"\n        title=\"Cerrar\">\n        <SvgIcon name=\"close\" class=\"w-5 h-5 sm:w-6 sm:h-6\" />\n      </button>\n\n      <!-- CONTENEDOR: siempre mostramos solo las mantenciones paginadas -->\n      <div class=\"w-full\">\n        <div v-if=\"!mantenciones || mantenciones.length === 0\" class=\"py-10 text-center text-base sm:text-lg font-medium text-gray-500 dark:text-gray-400\">\n          No hay mantenciones registradas para el vehículo {{ patente }}.\n        </div>\n\n        <div v-else class=\"flex flex-col gap-4 items-center\">\n          <!-- Grid responsivo que contiene SOLO las mantenciones de la página actual -->\n          <div\n            class=\"w-full grid gap-5 justify-items-center\"\n            :class=\"gridColsClass\">\n            <div\n              v-for=\"(m, idx) in mantencionesPaginadas\"\n              :key=\"m.id || m.nombre + idx\"\n              class=\"bg-white dark:bg-gray-900 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-4 flex flex-col gap-3 border border-gray-200 dark:border-gray-700 text-sm w-full sm:max-w-md\">\n              \n              <!-- Encabezado -->\n              <div class=\"flex flex-wrap justify-between items-start pb-2 border-b border-gray-100 dark:border-gray-700 gap-2\">\n                <span class=\"font-bold text-base sm:text-lg text-[#1A457D] dark:text-[#66B3FF] truncate flex-1 min-w-0\">\n                  {{ m.nombre || m.name }}\n                </span>\n                <span class=\"text-xs font-semibold px-3 py-1 rounded-full bg-[#007BFF] text-white dark:bg-[#FDD835] dark:text-gray-900 shadow-md whitespace-nowrap\">\n                  {{ m.tipo || m.type }}\n                </span>\n              </div>\n\n              <!-- Cuerpo -->\n              <div class=\"grid grid-cols-2 gap-x-4 gap-y-3 text-gray-700 dark:text-gray-300 text-sm\">\n                <div v-for=\"campo in cardCampos(m)\" :key=\"campo.label\" class=\"flex flex-col\">\n                  <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap\">\n                    {{ campo.label }}\n                  </span>\n                  <div\n                    class=\"font-semibold text-base truncate\"\n                    :class=\"campo.label === 'Faltante' ? faltanteClass(m) : ''\">\n                    {{ campo.value }}\n                  </div>\n                </div>\n\n                <div class=\"col-span-2 flex flex-col pt-3 border-t border-gray-100 dark:border-gray-700\">\n                  <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Email Contacto</span>\n                  <div class=\"font-medium text-sm truncate\">{{ m.email || m.correo || 'N/A' }}</div>\n                </div>\n\n                <div class=\"col-span-2 flex flex-col\">\n                  <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Fecha Creación</span>\n                  <div class=\"font-medium text-sm\">{{ formatFecha(m.fechaCreacion) }}</div>\n                </div>\n              </div>\n\n              <!-- Estado y botones -->\n              <div class=\"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 mt-4 border-t pt-3 border-gray-100 dark:border-gray-700\">\n                <div class=\"flex items-center gap-2\">\n                  <img v-if=\"m.estado === 'OK'\"\n                       src=\"https://sinergygroup.cl/Mantenciones/img/verde.png\"\n                       class=\"w-7 h-7 sm:w-8 sm:h-8 object-contain shadow rounded-full\"\n                       alt=\"OK\" title=\"OK\" />\n                  <img v-else-if=\"m.estado === 'Próxima mantención'\"\n                       src=\"https://sinergygroup.cl/Mantenciones/img/amarillo.png\"\n                       class=\"w-7 h-7 sm:w-8 sm:h-8 object-contain shadow rounded-full\"\n                       alt=\"Próxima\" title=\"Próxima mantención\" />\n                  <img v-else-if=\"m.estado === 'Requiere mantención'\"\n                       src=\"https://sinergygroup.cl/Mantenciones/img/rojo.png\"\n                       class=\"w-7 h-7 sm:w-8 sm:h-8 object-contain shadow rounded-full\"\n                       alt=\"Requiere\" title=\"Requiere mantención\" />\n                  <span class=\"text-sm font-semibold\"\n                        :class=\"{\n                          'text-green-600 dark:text-green-400': m.estado === 'OK',\n                          'text-yellow-600 dark:text-yellow-400': m.estado === 'Próxima mantención',\n                          'text-red-500 dark:text-red-400': m.estado === 'Requiere mantención'\n                        }\">\n                    {{ m.estado }}\n                  </span>\n                </div>\n\n                <div class=\"flex gap-2 justify-end\">\n                  <button\n                    @click=\"$emit('editar', absoluteIndex(idx))\"\n                    class=\"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-all shadow-md hover:shadow-lg focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50\">\n                    Editar\n                  </button>\n                  <button\n                    @click=\"$emit('eliminar', absoluteIndex(idx))\"\n                    class=\"bg-red-500 hover:bg-red-600 text-white font-semibold px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-all shadow-md hover:shadow-lg focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\">\n                    Eliminar\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Paginación: prev / dots / next -->\n          <div v-if=\"totalPages > 1\" class=\"flex flex-col items-center gap-2 w-full\">\n            <div class=\"flex items-center gap-3\">\n              <button\n                @click=\"prevPage\"\n                :disabled=\"currentPage === 1\"\n                class=\"p-2 text-sm font-medium rounded-lg transition-colors duration-200 flex items-center gap-1\"\n                :class=\"currentPage === 1 ? 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed' : 'bg-[#1A457D] hover:bg-[#007BFF] text-white'\">\n                <SvgIcon name=\"chevron-left\" class=\"w-4 h-4\" />\n                Anterior\n              </button>\n\n              <!-- indicadores (dots) -->\n              <div class=\"flex items-center gap-2 px-2\">\n                <button\n                  v-for=\"p in totalPages\"\n                  :key=\"p\"\n                  @click=\"goToPage(p)\"\n                  :aria-current=\"p === currentPage\"\n                  class=\"w-2.5 h-2.5 rounded-full transition-transform transform\"\n                  :class=\"p === currentPage ? 'scale-125' : 'opacity-60 bg-gray-400 dark:bg-gray-600'\">\n                </button>\n              </div>\n\n              <button\n                @click=\"nextPage\"\n                :disabled=\"currentPage === totalPages\"\n                class=\"p-2 text-sm font-medium rounded-lg transition-colors duration-200 flex items-center gap-1\"\n                :class=\"currentPage === totalPages ? 'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed' : 'bg-[#1A457D] hover:bg-[#007BFF] text-white'\">\n                Siguiente\n                <SvgIcon name=\"chevron-right\" class=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            <div class=\"text-sm text-gray-700 dark:text-gray-300\">\n              Página <span class=\"font-bold\">{{ currentPage }}</span> de <span class=\"font-bold\">{{ totalPages }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nexport default {\n  name: 'ModalVerMantenciones',\n  components: { SvgIcon },\n  props: {\n    patente: { type: String, default: '' },\n    mantenciones: { type: Array, default: () => [] },\n    horometrosActuales: { type: Object, default: () => ({}) },\n    odometroActual: { type: Number, default: 0 }\n  },\n  data() {\n    return {\n      currentPage: 1,\n      itemsPerPage: 3, // será recalculado según ancho\n      resizeObserver: null\n    }\n  },\n  watch: {\n    mantenciones() { this.currentPage = 1 }\n  },\n  computed: {\n    // recalcula mantenciones con estado (igual a tu lógica original)\n    mantencionesConEstado() {\n      const arr = (this.mantenciones || []).map(m => {\n        const tipo = (m.tipo || m.type || '').trim()\n        const intervalo = Number(m.intervalo || 0)\n        const alerta = Number(m.alerta || 0)\n        let umbral = null, faltante = null, estado = 'Desconocido', actual = 0\n\n        if (tipo === 'Por Odómetro') {\n          actual = Number(this.odometroActual || m.actual || 0)\n          const siguiente = Number(m.ultimo || 0) + intervalo\n          umbral = siguiente\n          faltante = siguiente - actual\n          estado = faltante <= 0 ? 'Requiere mantención' : faltante <= alerta ? 'Próxima mantención' : 'OK'\n        } else if (tipo === 'Por Horómetro') {\n          actual = this.horometrosActuales?.[this.patente] ?? Number(m.actual || 0)\n          const siguiente = Number(m.ultimo || 0) + intervalo\n          umbral = siguiente\n          faltante = siguiente - actual\n          estado = faltante <= 0 ? 'Requiere mantención' : faltante <= alerta ? 'Próxima mantención' : 'OK'\n        } else if (tipo === 'Por Tiempo') {\n          const ultima = new Date(m.ultimo)\n          if (!isNaN(ultima)) {\n            const umbralDate = new Date(ultima)\n            umbralDate.setDate(umbralDate.getDate() + intervalo)\n            const diff = Math.ceil((umbralDate - new Date()) / (1000 * 60 * 60 * 24))\n            faltante = diff\n            umbral = umbralDate.toISOString().split('T')[0]\n            estado = diff <= 0 ? 'Requiere mantención' : diff <= alerta ? 'Próxima mantención' : 'OK'\n          }\n        }\n        return { ...m, umbral, faltante, estado, actual }\n      })\n      return arr\n    },\n\n    totalPages() {\n      const len = this.mantencionesConEstado.length\n      return Math.max(1, Math.ceil(len / this.itemsPerPage))\n    },\n\n    mantencionesPaginadas() {\n      const start = (this.currentPage - 1) * this.itemsPerPage\n      return this.mantencionesConEstado.slice(start, start + this.itemsPerPage)\n    },\n\n    // clase para grid según itemsPerPage (útil para mantener 1/2/3 columnas)\n    gridColsClass() {\n      if (this.itemsPerPage === 1) return 'grid-cols-1'\n      if (this.itemsPerPage === 2) return 'sm:grid-cols-2 grid-cols-1'\n      return 'lg:grid-cols-3 sm:grid-cols-2 grid-cols-1'\n    }\n  },\n  methods: {\n    formatFecha(f) {\n      if (!f) return 'N/A'\n      const d = new Date(f)\n      return isNaN(d) ? f : d.toLocaleString('es-CL', { dateStyle: 'short', timeStyle: 'short' })\n    },\n    // campos que se muestran en las cards (para evitar repetir el array literal en template)\n    cardCampos(m) {\n      return [\n        { label: 'Intervalo', value: m.intervalo ?? 'N/A' },\n        { label: 'Último', value: m.ultimo ?? 'N/A' },\n        { label: 'Umbral', value: m.umbral ?? 'N/A' },\n        { label: 'Actual', value: m.actual ?? 'N/A' },\n        { label: 'Faltante', value: m.faltante ?? 'N/A' },\n        { label: 'Alerta', value: m.alerta ?? 0 }\n      ]\n    },\n    faltanteClass(m) {\n      return m.faltante <= 0\n        ? 'text-red-500 dark:text-red-400'\n        : (m.faltante > 0 && m.faltante <= (m.alerta ?? 0))\n          ? 'text-yellow-600 dark:text-yellow-400'\n          : 'text-green-600 dark:text-green-400'\n    },\n\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++\n    },\n    goToPage(p) {\n      if (p >= 1 && p <= this.totalPages) this.currentPage = p\n    },\n\n    // devuelve índice absoluto en el array original (para editar/eliminar)\n    absoluteIndex(localIdx) {\n      return (this.currentPage - 1) * this.itemsPerPage + localIdx\n    },\n\n    // recalcula itemsPerPage según ancho del viewport\n    recalcItemsPerPage() {\n      const w = window.innerWidth\n      let newCount = 3\n      if (w < 640) newCount = 1         // móviles\n      else if (w >= 640 && w < 1024) newCount = 2 // tablet\n      else newCount = 3                // escritorio\n\n      if (newCount !== this.itemsPerPage) {\n        this.itemsPerPage = newCount\n        // ajustar currentPage si excede totalPages después del cambio\n        const maxPage = Math.max(1, Math.ceil(this.mantencionesConEstado.length / this.itemsPerPage))\n        if (this.currentPage > maxPage) this.currentPage = maxPage\n      }\n    },\n\n    // manejador de teclado para navegar\n    onKeydown(e) {\n      if (e.key === 'ArrowLeft') this.prevPage()\n      if (e.key === 'ArrowRight') this.nextPage()\n    }\n  },\n  mounted() {\n    // inicializar itemsPerPage\n    this.recalcItemsPerPage()\n    // resize listener\n    window.addEventListener('resize', this.recalcItemsPerPage)\n    // teclado\n    window.addEventListener('keydown', this.onKeydown)\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.recalcItemsPerPage)\n    window.removeEventListener('keydown', this.onKeydown)\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}