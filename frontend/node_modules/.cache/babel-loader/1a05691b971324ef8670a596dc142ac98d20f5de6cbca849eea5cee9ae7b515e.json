{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  name: 'ModalVerMantenciones',\n  components: {\n    SvgIcon\n  },\n  props: {\n    patente: {\n      type: String,\n      required: true\n    },\n    mantenciones: {\n      type: Array,\n      required: true\n    },\n    horometrosActuales: {\n      type: Object,\n      default: () => ({})\n    },\n    odometroActual: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      currentPage: 1,\n      totalItemsPerPage: 3\n    };\n  },\n  watch: {\n    mantenciones: {\n      handler() {\n        this.currentPage = 1;\n      },\n      deep: true\n    }\n  },\n  computed: {\n    mantencionesConEstado() {\n      return this.mantenciones.map(m => {\n        const estado = m.estado || 'ok';\n        let icono = 'ok';\n        if (estado === 'vencida') icono = 'vencida';else if (estado === 'proxima') icono = 'proxima';\n        return {\n          ...m,\n          estadoIcono: icono\n        };\n      });\n    },\n    totalPages() {\n      return Math.ceil(this.mantencionesConEstado.length / this.totalItemsPerPage);\n    },\n    mantencionesPaginadas() {\n      const start = (this.currentPage - 1) * this.totalItemsPerPage;\n      return this.mantencionesConEstado.slice(start, start + this.totalItemsPerPage);\n    }\n  },\n  methods: {\n    formatFecha(fechaStr) {\n      if (!fechaStr) return 'N/A';\n      const f = new Date(fechaStr);\n      if (isNaN(f.getTime())) return fechaStr;\n      const opts = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      };\n      return f.toLocaleString('es-CL', opts);\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--;\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++;\n    }\n  }\n};","map":{"version":3,"names":["SvgIcon","name","components","props","patente","type","String","required","mantenciones","Array","horometrosActuales","Object","default","odometroActual","Number","data","currentPage","totalItemsPerPage","watch","handler","deep","computed","mantencionesConEstado","map","m","estado","icono","estadoIcono","totalPages","Math","ceil","length","mantencionesPaginadas","start","slice","methods","formatFecha","fechaStr","f","Date","isNaN","getTime","opts","year","month","day","hour","minute","toLocaleString","prevPage","nextPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalVerMantenciones.vue"],"sourcesContent":["<template>\n  <div\n    class=\"fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4 overflow-auto\">\n    <div\n      class=\"bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-5xl relative\">\n\n      <!-- Botón cerrar -->\n      <button\n        @click=\"$emit('cerrar')\"\n        class=\"absolute top-3 right-3 text-gray-500 hover:text-red-500 transition\">\n        <SvgIcon name=\"close\" />\n      </button>\n\n      <!-- Título -->\n      <h2 class=\"text-2xl font-semibold text-center mb-6 text-gray-800 dark:text-gray-100\">\n        Mantenciones de {{ patente }}\n      </h2>\n\n      <!-- Cards -->\n      <div\n        class=\"flex flex-wrap justify-center items-center gap-4 min-h-[60vh] px-4\">\n        <div\n          v-for=\"(m, idx) in mantencionesPaginadas\"\n          :key=\"idx\"\n          class=\"bg-gray-100 dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col gap-2 border border-gray-300 dark:border-gray-700 text-sm w-full sm:w-72 transition hover:shadow-lg\">\n\n          <!-- Nombre y tipo -->\n          <div class=\"flex justify-between items-center mb-1\">\n            <span class=\"font-semibold text-base truncate\">\n              {{ m.nombre || m.name }}\n            </span>\n            <span\n              class=\"text-xs px-2 py-0.5 rounded bg-blue-600 text-white uppercase\">\n              {{ m.tipo || m.type }}\n            </span>\n          </div>\n\n          <!-- Estado -->\n          <div class=\"flex items-center gap-2\">\n            <SvgIcon\n              :name=\"m.estadoIcono\"\n              class=\"text-blue-600 dark:text-blue-400\" />\n            <span\n              class=\"text-sm capitalize\"\n              :class=\"{\n                'text-green-600': m.estado === 'ok',\n                'text-yellow-600': m.estado === 'proxima',\n                'text-red-600': m.estado === 'vencida'\n              }\">\n              {{ m.estado }}\n            </span>\n          </div>\n\n          <!-- Fechas -->\n          <div class=\"text-gray-700 dark:text-gray-300\">\n            <p><strong>Última:</strong> {{ formatFecha(m.fechaUltima) }}</p>\n            <p><strong>Próxima:</strong> {{ formatFecha(m.fechaProxima) }}</p>\n          </div>\n\n          <!-- Acciones -->\n          <div class=\"flex justify-end gap-2 mt-3\">\n            <button\n              @click=\"$emit('editar', m)\"\n              class=\"text-blue-600 hover:text-blue-800 transition\">\n              <SvgIcon name=\"pencil\" />\n            </button>\n            <button\n              @click=\"$emit('eliminar', m)\"\n              class=\"text-red-600 hover:text-red-800 transition\">\n              <SvgIcon name=\"trash\" />\n            </button>\n          </div>\n        </div>\n\n        <!-- Si no hay mantenciones -->\n        <div\n          v-if=\"!mantenciones || mantenciones.length === 0\"\n          class=\"text-center text-gray-500 dark:text-gray-400 py-10 w-full\">\n          No hay mantenciones registradas\n        </div>\n      </div>\n\n      <!-- Paginación -->\n      <div\n        class=\"flex justify-center items-center gap-4 py-4 border-t border-gray-300 dark:border-gray-700 mt-4\">\n        <button\n          @click=\"prevPage\"\n          :disabled=\"currentPage === 1\"\n          class=\"disabled:opacity-40 disabled:cursor-not-allowed\">\n          <SvgIcon name=\"chevron-left\" />\n        </button>\n        <span class=\"text-sm text-gray-600 dark:text-gray-300\">\n          Página {{ currentPage }} / {{ totalPages }}\n        </span>\n        <button\n          @click=\"nextPage\"\n          :disabled=\"currentPage === totalPages\"\n          class=\"disabled:opacity-40 disabled:cursor-not-allowed\">\n          <SvgIcon name=\"chevron-right\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nexport default {\n  name: 'ModalVerMantenciones',\n  components: { SvgIcon },\n  props: {\n    patente: { type: String, required: true },\n    mantenciones: { type: Array, required: true },\n    horometrosActuales: { type: Object, default: () => ({}) },\n    odometroActual: { type: Number, default: 0 }\n  },\n  data() {\n    return {\n      currentPage: 1,\n      totalItemsPerPage: 3\n    }\n  },\n  watch: {\n    mantenciones: {\n      handler() {\n        this.currentPage = 1\n      },\n      deep: true\n    }\n  },\n  computed: {\n    mantencionesConEstado() {\n      return this.mantenciones.map((m) => {\n        const estado = m.estado || 'ok'\n        let icono = 'ok'\n        if (estado === 'vencida') icono = 'vencida'\n        else if (estado === 'proxima') icono = 'proxima'\n        return { ...m, estadoIcono: icono }\n      })\n    },\n    totalPages() {\n      return Math.ceil(this.mantencionesConEstado.length / this.totalItemsPerPage)\n    },\n    mantencionesPaginadas() {\n      const start = (this.currentPage - 1) * this.totalItemsPerPage\n      return this.mantencionesConEstado.slice(start, start + this.totalItemsPerPage)\n    }\n  },\n  methods: {\n    formatFecha(fechaStr) {\n      if (!fechaStr) return 'N/A'\n      const f = new Date(fechaStr)\n      if (isNaN(f.getTime())) return fechaStr\n      const opts = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      }\n      return f.toLocaleString('es-CL', opts)\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++\n    }\n  }\n}\n</script>\n"],"mappings":";;AA0GA,OAAOA,OAAM,MAAO,gCAA+B;AAEnD,eAAe;EACbC,IAAI,EAAE,sBAAsB;EAC5BC,UAAU,EAAE;IAAEF;EAAQ,CAAC;EACvBG,KAAK,EAAE;IACLC,OAAO,EAAE;MAAEC,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACzCC,YAAY,EAAE;MAAEH,IAAI,EAAEI,KAAK;MAAEF,QAAQ,EAAE;IAAK,CAAC;IAC7CG,kBAAkB,EAAE;MAAEL,IAAI,EAAEM,MAAM;MAAEC,OAAO,EAAEA,CAAA,MAAO,CAAC,CAAC;IAAE,CAAC;IACzDC,cAAc,EAAE;MAAER,IAAI,EAAES,MAAM;MAAEF,OAAO,EAAE;IAAE;EAC7C,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,iBAAiB,EAAE;IACrB;EACF,CAAC;EACDC,KAAK,EAAE;IACLV,YAAY,EAAE;MACZW,OAAOA,CAAA,EAAG;QACR,IAAI,CAACH,WAAU,GAAI;MACrB,CAAC;MACDI,IAAI,EAAE;IACR;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,qBAAqBA,CAAA,EAAG;MACtB,OAAO,IAAI,CAACd,YAAY,CAACe,GAAG,CAAEC,CAAC,IAAK;QAClC,MAAMC,MAAK,GAAID,CAAC,CAACC,MAAK,IAAK,IAAG;QAC9B,IAAIC,KAAI,GAAI,IAAG;QACf,IAAID,MAAK,KAAM,SAAS,EAAEC,KAAI,GAAI,SAAQ,MACrC,IAAID,MAAK,KAAM,SAAS,EAAEC,KAAI,GAAI,SAAQ;QAC/C,OAAO;UAAE,GAAGF,CAAC;UAAEG,WAAW,EAAED;QAAM;MACpC,CAAC;IACH,CAAC;IACDE,UAAUA,CAAA,EAAG;MACX,OAAOC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACR,qBAAqB,CAACS,MAAK,GAAI,IAAI,CAACd,iBAAiB;IAC7E,CAAC;IACDe,qBAAqBA,CAAA,EAAG;MACtB,MAAMC,KAAI,GAAI,CAAC,IAAI,CAACjB,WAAU,GAAI,CAAC,IAAI,IAAI,CAACC,iBAAgB;MAC5D,OAAO,IAAI,CAACK,qBAAqB,CAACY,KAAK,CAACD,KAAK,EAAEA,KAAI,GAAI,IAAI,CAAChB,iBAAiB;IAC/E;EACF,CAAC;EACDkB,OAAO,EAAE;IACPC,WAAWA,CAACC,QAAQ,EAAE;MACpB,IAAI,CAACA,QAAQ,EAAE,OAAO,KAAI;MAC1B,MAAMC,CAAA,GAAI,IAAIC,IAAI,CAACF,QAAQ;MAC3B,IAAIG,KAAK,CAACF,CAAC,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,OAAOJ,QAAO;MACtC,MAAMK,IAAG,GAAI;QACXC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,SAAS;QAChBC,GAAG,EAAE,SAAS;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;MACV;MACA,OAAOT,CAAC,CAACU,cAAc,CAAC,OAAO,EAAEN,IAAI;IACvC,CAAC;IACDO,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACjC,WAAU,GAAI,CAAC,EAAE,IAAI,CAACA,WAAW,EAAC;IAC7C,CAAC;IACDkC,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAAClC,WAAU,GAAI,IAAI,CAACY,UAAU,EAAE,IAAI,CAACZ,WAAW,EAAC;IAC3D;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}