{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, computed } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'AgregarEmpresasModal',\n  props: {\n    templates: Array\n  },\n  emits: ['add', 'cancel'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const step = ref(1);\n    const form = ref({\n      name: '',\n      rut: '',\n      contact: '',\n      city: ''\n    });\n    const selectedTemplate = ref(null);\n    const isValidRut = rut => /^(\\d{1,2}\\.\\d{3}\\.\\d{3}-[\\dkK])$/.test(rut);\n    const isStep1Valid = computed(() => {\n      const {\n        name,\n        rut,\n        contact,\n        city\n      } = form.value;\n      return name && rut && contact && city && isValidRut(rut);\n    });\n    const goToNextStep = () => {\n      if (isStep1Valid.value) step.value = 2;else alert('Completa todos los campos correctamente');\n    };\n    const add = () => {\n      if (!selectedTemplate.value) return;\n      emit('add', {\n        ...form.value,\n        templateId: selectedTemplate.value\n      });\n    };\n    const formatRut = () => {\n      let rut = form.value.rut.replace(/[^0-9kK]/g, '');\n      if (rut.length > 9) rut = rut.slice(0, 9);\n      if (rut.length > 1) {\n        const body = rut.slice(0, -1);\n        const dv = rut.slice(-1);\n        const reversed = body.split('').reverse();\n        const withDots = [];\n        reversed.forEach((char, i) => {\n          if (i > 0 && i % 3 === 0) withDots.push('.');\n          withDots.push(char);\n        });\n        form.value.rut = withDots.reverse().join('') + '-' + dv;\n      } else form.value.rut = rut;\n    };\n    const __returned__ = {\n      props,\n      emit,\n      step,\n      form,\n      selectedTemplate,\n      isValidRut,\n      isStep1Valid,\n      goToNextStep,\n      add,\n      formatRut,\n      ref,\n      computed,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","SvgIcon","props","__props","emit","__emit","step","form","name","rut","contact","city","selectedTemplate","isValidRut","test","isStep1Valid","value","goToNextStep","alert","add","templateId","formatRut","replace","length","slice","body","dv","reversed","split","reverse","withDots","forEach","char","i","push","join"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/AgregarEmpresasModal.vue"],"sourcesContent":["<template>\n  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n    <div class=\"bg-white dark:bg-gray-900 rounded-lg relative w-full max-w-lg p-6\">\n      <button v-if=\"step === 2\" @click=\"step = 1\" class=\"absolute top-4 left-4\">\n        <SvgIcon name=\"arrow-left\" class=\"w-6 h-6\" />\n      </button>\n\n      <h2 class=\"text-2xl font-bold mb-4 text-center text-[#102372] dark:text-[#ff6600]\">\n        {{ step === 1 ? 'Agregar Empresa' : 'Seleccionar Template' }}\n      </h2>\n\n      <form v-if=\"step === 1\" @submit.prevent=\"goToNextStep\" class=\"flex flex-col gap-3\">\n        <input v-model=\"form.name\" placeholder=\"Nombre\" class=\"input\" required />\n        <input v-model=\"form.rut\" placeholder=\"RUT\" class=\"input\" required @input=\"formatRut\" />\n        <input v-model=\"form.contact\" placeholder=\"Contacto\" class=\"input\" required />\n        <input v-model=\"form.city\" placeholder=\"Ciudad\" class=\"input\" required />\n      </form>\n\n      <div v-else class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4\">\n        <div\n          v-for=\"t in templates\" :key=\"t.id\"\n          @click=\"selectedTemplate = t.id\"\n          :class=\"['p-4 rounded-lg border text-center cursor-pointer transition',\n            selectedTemplate === t.id ? 'border-[#ff6600] bg-orange-100 dark:bg-[#e65500]/30'\n            : 'border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800']\"\n        >\n          <h3 class=\"font-semibold\">{{ t.name }}</h3>\n          <p class=\"text-sm text-gray-500 dark:text-gray-400\">{{ t.description }}</p>\n        </div>\n      </div>\n\n      <div class=\"flex justify-between mt-6\">\n        <button @click=\"$emit('cancel')\" class=\"bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded text-white\">Cancelar</button>\n        <button\n          v-if=\"step === 1\"\n          @click=\"goToNextStep\"\n          :disabled=\"!isStep1Valid\"\n          class=\"bg-[#102372] hover:bg-[#0c1a5b] px-4 py-2 rounded text-white\"\n        >Siguiente</button>\n        <button\n          v-else\n          @click=\"add\"\n          :disabled=\"!selectedTemplate\"\n          class=\"bg-[#ff6600] hover:bg-[#e65500] px-4 py-2 rounded text-white\"\n        >Crear Empresa</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({ templates: Array })\nconst emit = defineEmits(['add', 'cancel'])\n\nconst step = ref(1)\nconst form = ref({ name: '', rut: '', contact: '', city: '' })\nconst selectedTemplate = ref(null)\n\nconst isValidRut = (rut) => /^(\\d{1,2}\\.\\d{3}\\.\\d{3}-[\\dkK])$/.test(rut)\nconst isStep1Valid = computed(() => {\n  const { name, rut, contact, city } = form.value\n  return name && rut && contact && city && isValidRut(rut)\n})\n\nconst goToNextStep = () => {\n  if (isStep1Valid.value) step.value = 2\n  else alert('Completa todos los campos correctamente')\n}\n\nconst add = () => {\n  if (!selectedTemplate.value) return\n  emit('add', { ...form.value, templateId: selectedTemplate.value })\n}\n\nconst formatRut = () => {\n  let rut = form.value.rut.replace(/[^0-9kK]/g, '')\n  if (rut.length > 9) rut = rut.slice(0, 9)\n  if (rut.length > 1) {\n    const body = rut.slice(0, -1)\n    const dv = rut.slice(-1)\n    const reversed = body.split('').reverse()\n    const withDots = []\n    reversed.forEach((char, i) => { if (i > 0 && i % 3 === 0) withDots.push('.'); withDots.push(char) })\n    form.value.rut = withDots.reverse().join('') + '-' + dv\n  } else form.value.rut = rut\n}\n</script>\n\n<style scoped>\n.input {\n  @apply px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none;\n}\n</style>\n"],"mappings":";;;AAmDA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;AAClC,OAAOC,OAAO,MAAM,gCAA+B;;;;;;;;;;;;IAEnD,MAAMC,KAAK,GAAGC,OAAA;IACd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,IAAI,GAAGP,GAAG,CAAC,CAAC;IAClB,MAAMQ,IAAI,GAAGR,GAAG,CAAC;MAAES,IAAI,EAAE,EAAE;MAAEC,GAAG,EAAE,EAAE;MAAEC,OAAO,EAAE,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC;IAC7D,MAAMC,gBAAgB,GAAGb,GAAG,CAAC,IAAI;IAEjC,MAAMc,UAAU,GAAIJ,GAAG,IAAK,kCAAkC,CAACK,IAAI,CAACL,GAAG;IACvE,MAAMM,YAAY,GAAGf,QAAQ,CAAC,MAAM;MAClC,MAAM;QAAEQ,IAAI;QAAEC,GAAG;QAAEC,OAAO;QAAEC;MAAK,CAAC,GAAGJ,IAAI,CAACS,KAAI;MAC9C,OAAOR,IAAI,IAAIC,GAAG,IAAIC,OAAO,IAAIC,IAAI,IAAIE,UAAU,CAACJ,GAAG;IACzD,CAAC;IAED,MAAMQ,YAAY,GAAGA,CAAA,KAAM;MACzB,IAAIF,YAAY,CAACC,KAAK,EAAEV,IAAI,CAACU,KAAK,GAAG,OAChCE,KAAK,CAAC,yCAAyC;IACtD;IAEA,MAAMC,GAAG,GAAGA,CAAA,KAAM;MAChB,IAAI,CAACP,gBAAgB,CAACI,KAAK,EAAE;MAC7BZ,IAAI,CAAC,KAAK,EAAE;QAAE,GAAGG,IAAI,CAACS,KAAK;QAAEI,UAAU,EAAER,gBAAgB,CAACI;MAAM,CAAC;IACnE;IAEA,MAAMK,SAAS,GAAGA,CAAA,KAAM;MACtB,IAAIZ,GAAG,GAAGF,IAAI,CAACS,KAAK,CAACP,GAAG,CAACa,OAAO,CAAC,WAAW,EAAE,EAAE;MAChD,IAAIb,GAAG,CAACc,MAAM,GAAG,CAAC,EAAEd,GAAG,GAAGA,GAAG,CAACe,KAAK,CAAC,CAAC,EAAE,CAAC;MACxC,IAAIf,GAAG,CAACc,MAAM,GAAG,CAAC,EAAE;QAClB,MAAME,IAAI,GAAGhB,GAAG,CAACe,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5B,MAAME,EAAE,GAAGjB,GAAG,CAACe,KAAK,CAAC,CAAC,CAAC;QACvB,MAAMG,QAAQ,GAAGF,IAAI,CAACG,KAAK,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC;QACxC,MAAMC,QAAQ,GAAG,EAAC;QAClBH,QAAQ,CAACI,OAAO,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAK;UAAE,IAAIA,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,KAAK,CAAC,EAAEH,QAAQ,CAACI,IAAI,CAAC,GAAG,CAAC;UAAEJ,QAAQ,CAACI,IAAI,CAACF,IAAI,CAAC;QAAC,CAAC;QACnGzB,IAAI,CAACS,KAAK,CAACP,GAAG,GAAGqB,QAAQ,CAACD,OAAO,CAAC,CAAC,CAACM,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAGT,EAAC;MACxD,CAAC,MAAMnB,IAAI,CAACS,KAAK,CAACP,GAAG,GAAGA,GAAE;IAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}