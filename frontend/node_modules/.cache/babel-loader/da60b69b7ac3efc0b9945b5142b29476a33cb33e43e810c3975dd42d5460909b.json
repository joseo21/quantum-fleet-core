{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"bg-[#1f2937] border-b border-gray-700 flex justify-between items-center px-3 py-2\"\n};\nconst _hoisted_2 = {\n  class: \"flex items-center gap-2\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center gap-2 text-white\"\n};\nconst _hoisted_4 = {\n  class: \"relative w-10 h-10\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"relative\"\n};\nconst _hoisted_7 = {\n  class: \"flex items-center gap-1\"\n};\nconst _hoisted_8 = {\n  class: \"font-medium\"\n};\nconst _hoisted_9 = {\n  class: \"text-gray-400 text-xs\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"absolute right-0 mt-1 w-40 bg-[#1f2937] text-white rounded-lg shadow-lg z-50\"\n};\nconst _hoisted_11 = {\n  class: \"list-none p-2\"\n};\nconst _hoisted_12 = {\n  class: \"absolute -start-full transition-all group-hover:start-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"header\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    class: \"md:hidden text-white text-2xl px-6\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('toggle-sidebar'))\n  }, \"☰\"), _cache[2] || (_cache[2] = _createElementVNode(\"img\", {\n    alt: \"Logo\",\n    src: \"https://www.gpsenchile.com/wp-content/uploads/2023/06/logowebblanco.png\",\n    class: \"w-36 h-15\"\n  }, null, -1 /* CACHED */))]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: $setup.profileImage,\n    alt: \"Perfil\",\n    class: \"w-full h-full rounded-full object-cover\"\n  }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"button\", {\n    onClick: $setup.selectFile,\n    class: \"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity\",\n    title: \"Editar foto\"\n  }, \" ✎ \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    ref: \"fileInput\",\n    accept: \"image/*\",\n    class: \"hidden\",\n    onChange: $setup.previewImage\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.showDropdown = !$setup.showDropdown),\n    class: \"flex flex-col items-start px-2 py-1 rounded hover:bg-[#2a3748] transition-colors group\"\n  }, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"strong\", _hoisted_8, _toDisplayString($setup.userName), 1 /* TEXT */), _createElementVNode(\"span\", {\n    class: _normalizeClass([\"transition-transform duration-200 text-[10px] hidden group-hover:inline\", {\n      'rotate-180 inline': $setup.showDropdown\n    }])\n  }, \" ▼ \", 2 /* CLASS */)]), _createElementVNode(\"span\", _hoisted_9, _toDisplayString($setup.userRole), 1 /* TEXT */)]), $setup.showDropdown ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"ul\", _hoisted_11, [_cache[4] || (_cache[4] = _createElementVNode(\"li\", null, [_createElementVNode(\"hr\", {\n    class: \"border-t my-1 border-gray-600\"\n  })], -1 /* CACHED */)), _createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    onClick: _withModifiers($setup.logout, [\"prevent\"]),\n    class: \"w-full group relative inline-flex items-center overflow-hidden gap-x-3.5 py-2 px-2.5 rounded-lg text-sm hover:bg-[#ff6600] cursor-pointer\"\n  }, [_createElementVNode(\"span\", _hoisted_12, [_createVNode($setup[\"SvgIcon\"], {\n    name: \"logout\",\n    class: \"w-4 h-4\"\n  })]), _cache[3] || (_cache[3] = _createElementVNode(\"span\", {\n    class: \"transition-all group-hover:ms-4\"\n  }, \"Cerrar sesión\", -1 /* CACHED */))])])])])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","$event","_ctx","$emit","alt","src","_hoisted_3","_hoisted_4","$setup","profileImage","selectFile","title","type","ref","accept","onChange","previewImage","_hoisted_6","showDropdown","_hoisted_7","_hoisted_8","_toDisplayString","userName","_normalizeClass","_hoisted_9","userRole","_hoisted_10","_hoisted_11","_withModifiers","logout","_hoisted_12","_createVNode","name"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/AppHeader.vue"],"sourcesContent":["<template>\n  <header class=\"bg-[#1f2937] border-b border-gray-700 flex justify-between items-center px-3 py-2\">\n    <div class=\"flex items-center gap-2\">\n      <button class=\"md:hidden text-white text-2xl px-6\" @click=\"$emit('toggle-sidebar')\">☰</button>\n      <img alt=\"Logo\" src=\"https://www.gpsenchile.com/wp-content/uploads/2023/06/logowebblanco.png\" class=\"w-36 h-15\" />\n    </div>\n\n    <div class=\"flex items-center gap-2 text-white\">\n      <div class=\"relative w-10 h-10\">\n        <img :src=\"profileImage\" alt=\"Perfil\" class=\"w-full h-full rounded-full object-cover\" />\n        <button @click=\"selectFile\"\n          class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity\"\n          title=\"Editar foto\">\n          ✎\n        </button>\n        <input type=\"file\" ref=\"fileInput\" accept=\"image/*\" class=\"hidden\" @change=\"previewImage\" />\n      </div>\n\n      <div class=\"relative\">\n        <button @click=\"showDropdown = !showDropdown\"\n          class=\"flex flex-col items-start px-2 py-1 rounded hover:bg-[#2a3748] transition-colors group\">\n          <div class=\"flex items-center gap-1\">\n            <strong class=\"font-medium\">{{ userName }}</strong>\n            <span class=\"transition-transform duration-200 text-[10px] hidden group-hover:inline\" \n                  :class=\"{ 'rotate-180 inline': showDropdown }\">\n                ▼\n            </span>\n          </div>\n          <span class=\"text-gray-400 text-xs\">{{ userRole }}</span>\n        </button>\n\n        <div v-if=\"showDropdown\" class=\"absolute right-0 mt-1 w-40 bg-[#1f2937] text-white rounded-lg shadow-lg z-50\">\n          <ul class=\"list-none p-2\">\n            <li>\n              <hr class=\"border-t my-1 border-gray-600\" />\n            </li>\n            <li>\n              <a @click.prevent=\"logout\"\n                class=\"w-full group relative inline-flex items-center overflow-hidden gap-x-3.5 py-2 px-2.5 rounded-lg text-sm hover:bg-[#ff6600] cursor-pointer\">\n                <span class=\"absolute -start-full transition-all group-hover:start-2\">\n                  <SvgIcon name=\"logout\" class=\"w-4 h-4\" />\n                </span>\n                <span class=\"transition-all group-hover:ms-4\">Cerrar sesión</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </header>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst router = useRouter()\nconst user = ref({})\nconst profileImage = ref('')\nconst fileInput = ref(null)\nconst showDropdown = ref(false)\n\nonMounted(() => {\n  const storedUser = localStorage.getItem('user')\n  console.log('AppHeader - usuario cargado de localStorage:', storedUser)\n  user.value = storedUser ? JSON.parse(storedUser) : {}\n  profileImage.value = user.value.profileImage || 'https://img.freepik.com/vector-premium/perfil-hombre_1083548-15963.jpg'\n  console.log('AppHeader - profileImage inicial:', profileImage.value)\n})\n\nconst userName = computed(() => user.value.name || 'Invitado')\nconst userRole = computed(() => user.value.role || 'Invitado')\n\nconst selectFile = () => fileInput.value.click()\n\nconst previewImage = (event) => {\n  const file = event.target.files[0]\n  if (!file) return\n\n  const reader = new FileReader()\n  reader.onload = () => {\n    const dataUrl = reader.result\n    console.log('Imagen seleccionada:', dataUrl.length, 'bytes')\n\n    profileImage.value = dataUrl\n    const updatedUser = { ...user.value, profileImage: dataUrl }\n    user.value = updatedUser\n\n    localStorage.setItem('user', JSON.stringify(updatedUser))\n    console.log('Imagen guardada en localStorage:', JSON.parse(localStorage.getItem('user')).profileImage.length, 'bytes')\n  }\n  reader.readAsDataURL(file)\n}\n\nconst logout = () => {\n  localStorage.removeItem('user')\n  user.value = {}\n  profileImage.value = 'https://img.freepik.com/vector-premium/perfil-hombre_1083548-15963.jpg'\n  console.log('Logout - usuario eliminado')\n  router.push('/')\n}\n</script>"],"mappings":";;EACUA,KAAK,EAAC;AAAmF;;EAC1FA,KAAK,EAAC;AAAyB;;EAK/BA,KAAK,EAAC;AAAoC;;EACxCA,KAAK,EAAC;AAAoB;;;EAU1BA,KAAK,EAAC;AAAU;;EAGZA,KAAK,EAAC;AAAyB;;EAC1BA,KAAK,EAAC;AAAa;;EAMvBA,KAAK,EAAC;AAAuB;;;EAGZA,KAAK,EAAC;;;EACzBA,KAAK,EAAC;AAAe;;EAObA,KAAK,EAAC;AAAyD;;uBAtCnFC,mBAAA,CAgDS,UAhDTC,UAgDS,GA/CPC,mBAAA,CAGM,OAHNC,UAGM,GAFJD,mBAAA,CAA8F;IAAtFH,KAAK,EAAC,oCAAoC;IAAEK,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,KAAK;KAAoB,GAAC,G,0BACrFN,mBAAA,CAAkH;IAA7GO,GAAG,EAAC,MAAM;IAACC,GAAG,EAAC,yEAAyE;IAACX,KAAK,EAAC;gCAGtGG,mBAAA,CAyCM,OAzCNS,UAyCM,GAxCJT,mBAAA,CAQM,OARNU,UAQM,GAPJV,mBAAA,CAAwF;IAAlFQ,GAAG,EAAEG,MAAA,CAAAC,YAAY;IAAEL,GAAG,EAAC,QAAQ;IAACV,KAAK,EAAC;uCAC5CG,mBAAA,CAIS;IAJAE,OAAK,EAAES,MAAA,CAAAE,UAAU;IACxBhB,KAAK,EAAC,iJAAiJ;IACvJiB,KAAK,EAAC;KAAc,KAEtB,GACAd,mBAAA,CAA4F;IAArFe,IAAI,EAAC,MAAM;IAACC,GAAG,EAAC,WAAW;IAACC,MAAM,EAAC,SAAS;IAACpB,KAAK,EAAC,QAAQ;IAAEqB,QAAM,EAAEP,MAAA,CAAAQ;oDAG9EnB,mBAAA,CA6BM,OA7BNoB,UA6BM,GA5BJpB,mBAAA,CAUS;IAVAE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEO,MAAA,CAAAU,YAAY,IAAIV,MAAA,CAAAU,YAAY;IAC1CxB,KAAK,EAAC;MACNG,mBAAA,CAMM,OANNsB,UAMM,GALJtB,mBAAA,CAAmD,UAAnDuB,UAAmD,EAAAC,gBAAA,CAApBb,MAAA,CAAAc,QAAQ,kBACvCzB,mBAAA,CAGO;IAHDH,KAAK,EAAA6B,eAAA,EAAC,yEAAyE;MAAA,qBAChDf,MAAA,CAAAU;IAAY;KAAI,KAErD,iB,GAEFrB,mBAAA,CAAyD,QAAzD2B,UAAyD,EAAAH,gBAAA,CAAlBb,MAAA,CAAAiB,QAAQ,iB,GAGtCjB,MAAA,CAAAU,YAAY,I,cAAvBvB,mBAAA,CAeM,OAfN+B,WAeM,GAdJ7B,mBAAA,CAaK,MAbL8B,WAaK,G,0BAZH9B,mBAAA,CAEK,aADHA,mBAAA,CAA4C;IAAxCH,KAAK,EAAC;EAA+B,G,qBAE3CG,mBAAA,CAQK,aAPHA,mBAAA,CAMI;IANAE,OAAK,EAAA6B,cAAA,CAAUpB,MAAA,CAAAqB,MAAM;IACvBnC,KAAK,EAAC;MACNG,mBAAA,CAEO,QAFPiC,WAEO,GADLC,YAAA,CAAyCvB,MAAA;IAAhCwB,IAAI,EAAC,QAAQ;IAACtC,KAAK,EAAC;kCAE/BG,mBAAA,CAAkE;IAA5DH,KAAK,EAAC;EAAiC,GAAC,eAAa,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}