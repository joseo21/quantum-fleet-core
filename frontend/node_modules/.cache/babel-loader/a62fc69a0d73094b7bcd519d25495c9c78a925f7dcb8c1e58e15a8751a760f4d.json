{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4 overflow-auto\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-5xl relative\"\n};\nconst _hoisted_3 = {\n  class: \"text-2xl font-semibold text-center mb-6 text-gray-800 dark:text-gray-100\"\n};\nconst _hoisted_4 = {\n  class: \"flex flex-wrap justify-center items-center gap-4 min-h-[60vh] px-4\"\n};\nconst _hoisted_5 = {\n  class: \"flex justify-between items-center mb-1\"\n};\nconst _hoisted_6 = {\n  class: \"font-semibold text-base truncate\"\n};\nconst _hoisted_7 = {\n  class: \"text-xs px-2 py-0.5 rounded bg-blue-600 text-white uppercase\"\n};\nconst _hoisted_8 = {\n  class: \"flex items-center gap-2\"\n};\nconst _hoisted_9 = {\n  class: \"text-gray-700 dark:text-gray-300\"\n};\nconst _hoisted_10 = {\n  class: \"flex justify-end gap-2 mt-3\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"text-center text-gray-500 dark:text-gray-400 py-10 w-full\"\n};\nconst _hoisted_14 = {\n  class: \"flex justify-center items-center gap-4 py-4 border-t border-gray-300 dark:border-gray-700 mt-4\"\n};\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = {\n  class: \"text-sm text-gray-600 dark:text-gray-300\"\n};\nconst _hoisted_17 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SvgIcon = _resolveComponent(\"SvgIcon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Botón cerrar \"), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('cerrar')),\n    class: \"absolute top-3 right-3 text-gray-500 hover:text-red-500 transition\"\n  }, [_createVNode(_component_SvgIcon, {\n    name: \"close\"\n  })]), _createCommentVNode(\" Título \"), _createElementVNode(\"h2\", _hoisted_3, \" Mantenciones de \" + _toDisplayString($props.patente), 1 /* TEXT */), _createCommentVNode(\" Cards \"), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.mantencionesPaginadas, (m, idx) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: idx,\n      class: \"bg-gray-100 dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col gap-2 border border-gray-300 dark:border-gray-700 text-sm w-full sm:w-72 transition hover:shadow-lg\"\n    }, [_createCommentVNode(\" Nombre y tipo \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"span\", _hoisted_6, _toDisplayString(m.nombre || m.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(m.tipo || m.type), 1 /* TEXT */)]), _createCommentVNode(\" Estado \"), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_SvgIcon, {\n      name: m.estadoIcono,\n      class: \"text-blue-600 dark:text-blue-400\"\n    }, null, 8 /* PROPS */, [\"name\"]), _createElementVNode(\"span\", {\n      class: _normalizeClass([\"text-sm capitalize\", {\n        'text-green-600': m.estado === 'ok',\n        'text-yellow-600': m.estado === 'proxima',\n        'text-red-600': m.estado === 'vencida'\n      }])\n    }, _toDisplayString(m.estado), 3 /* TEXT, CLASS */)]), _createCommentVNode(\" Fechas \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Última:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($options.formatFecha(m.fechaUltima)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Próxima:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($options.formatFecha(m.fechaProxima)), 1 /* TEXT */)])]), _createCommentVNode(\" Acciones \"), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('editar', m),\n      class: \"text-blue-600 hover:text-blue-800 transition\"\n    }, [_createVNode(_component_SvgIcon, {\n      name: \"pencil\"\n    })], 8 /* PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('eliminar', m),\n      class: \"text-red-600 hover:text-red-800 transition\"\n    }, [_createVNode(_component_SvgIcon, {\n      name: \"trash\"\n    })], 8 /* PROPS */, _hoisted_12)])]);\n  }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" Si no hay mantenciones \"), !$props.mantenciones || $props.mantenciones.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \" No hay mantenciones registradas \")) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Paginación \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.prevPage && $options.prevPage(...args)),\n    disabled: $data.currentPage === 1,\n    class: \"disabled:opacity-40 disabled:cursor-not-allowed\"\n  }, [_createVNode(_component_SvgIcon, {\n    name: \"chevron-left\"\n  })], 8 /* PROPS */, _hoisted_15), _createElementVNode(\"span\", _hoisted_16, \" Página \" + _toDisplayString($data.currentPage) + \" / \" + _toDisplayString($options.totalPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.nextPage && $options.nextPage(...args)),\n    disabled: $data.currentPage === $options.totalPages,\n    class: \"disabled:opacity-40 disabled:cursor-not-allowed\"\n  }, [_createVNode(_component_SvgIcon, {\n    name: \"chevron-right\"\n  })], 8 /* PROPS */, _hoisted_17)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","onClick","_cache","$event","_ctx","$emit","_createVNode","_component_SvgIcon","name","_hoisted_3","_toDisplayString","$props","patente","_hoisted_4","_Fragment","_renderList","$options","mantencionesPaginadas","m","idx","key","_hoisted_5","_hoisted_6","nombre","_hoisted_7","tipo","type","_hoisted_8","estadoIcono","_normalizeClass","estado","_hoisted_9","formatFecha","fechaUltima","fechaProxima","_hoisted_10","mantenciones","length","_hoisted_13","_hoisted_14","args","prevPage","disabled","$data","currentPage","_hoisted_16","totalPages","nextPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalVerMantenciones.vue"],"sourcesContent":["<template>\n  <div\n    class=\"fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4 overflow-auto\">\n    <div\n      class=\"bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-5xl relative\">\n\n      <!-- Botón cerrar -->\n      <button\n        @click=\"$emit('cerrar')\"\n        class=\"absolute top-3 right-3 text-gray-500 hover:text-red-500 transition\">\n        <SvgIcon name=\"close\" />\n      </button>\n\n      <!-- Título -->\n      <h2 class=\"text-2xl font-semibold text-center mb-6 text-gray-800 dark:text-gray-100\">\n        Mantenciones de {{ patente }}\n      </h2>\n\n      <!-- Cards -->\n      <div\n        class=\"flex flex-wrap justify-center items-center gap-4 min-h-[60vh] px-4\">\n        <div\n          v-for=\"(m, idx) in mantencionesPaginadas\"\n          :key=\"idx\"\n          class=\"bg-gray-100 dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col gap-2 border border-gray-300 dark:border-gray-700 text-sm w-full sm:w-72 transition hover:shadow-lg\">\n\n          <!-- Nombre y tipo -->\n          <div class=\"flex justify-between items-center mb-1\">\n            <span class=\"font-semibold text-base truncate\">\n              {{ m.nombre || m.name }}\n            </span>\n            <span\n              class=\"text-xs px-2 py-0.5 rounded bg-blue-600 text-white uppercase\">\n              {{ m.tipo || m.type }}\n            </span>\n          </div>\n\n          <!-- Estado -->\n          <div class=\"flex items-center gap-2\">\n            <SvgIcon\n              :name=\"m.estadoIcono\"\n              class=\"text-blue-600 dark:text-blue-400\" />\n            <span\n              class=\"text-sm capitalize\"\n              :class=\"{\n                'text-green-600': m.estado === 'ok',\n                'text-yellow-600': m.estado === 'proxima',\n                'text-red-600': m.estado === 'vencida'\n              }\">\n              {{ m.estado }}\n            </span>\n          </div>\n\n          <!-- Fechas -->\n          <div class=\"text-gray-700 dark:text-gray-300\">\n            <p><strong>Última:</strong> {{ formatFecha(m.fechaUltima) }}</p>\n            <p><strong>Próxima:</strong> {{ formatFecha(m.fechaProxima) }}</p>\n          </div>\n\n          <!-- Acciones -->\n          <div class=\"flex justify-end gap-2 mt-3\">\n            <button\n              @click=\"$emit('editar', m)\"\n              class=\"text-blue-600 hover:text-blue-800 transition\">\n              <SvgIcon name=\"pencil\" />\n            </button>\n            <button\n              @click=\"$emit('eliminar', m)\"\n              class=\"text-red-600 hover:text-red-800 transition\">\n              <SvgIcon name=\"trash\" />\n            </button>\n          </div>\n        </div>\n\n        <!-- Si no hay mantenciones -->\n        <div\n          v-if=\"!mantenciones || mantenciones.length === 0\"\n          class=\"text-center text-gray-500 dark:text-gray-400 py-10 w-full\">\n          No hay mantenciones registradas\n        </div>\n      </div>\n\n      <!-- Paginación -->\n      <div\n        class=\"flex justify-center items-center gap-4 py-4 border-t border-gray-300 dark:border-gray-700 mt-4\">\n        <button\n          @click=\"prevPage\"\n          :disabled=\"currentPage === 1\"\n          class=\"disabled:opacity-40 disabled:cursor-not-allowed\">\n          <SvgIcon name=\"chevron-left\" />\n        </button>\n        <span class=\"text-sm text-gray-600 dark:text-gray-300\">\n          Página {{ currentPage }} / {{ totalPages }}\n        </span>\n        <button\n          @click=\"nextPage\"\n          :disabled=\"currentPage === totalPages\"\n          class=\"disabled:opacity-40 disabled:cursor-not-allowed\">\n          <SvgIcon name=\"chevron-right\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nexport default {\n  name: 'ModalVerMantenciones',\n  components: { SvgIcon },\n  props: {\n    patente: { type: String, required: true },\n    mantenciones: { type: Array, required: true },\n    horometrosActuales: { type: Object, default: () => ({}) },\n    odometroActual: { type: Number, default: 0 }\n  },\n  data() {\n    return {\n      currentPage: 1,\n      totalItemsPerPage: 3\n    }\n  },\n  watch: {\n    mantenciones: {\n      handler() {\n        this.currentPage = 1\n      },\n      deep: true\n    }\n  },\n  computed: {\n    mantencionesConEstado() {\n      return this.mantenciones.map((m) => {\n        const estado = m.estado || 'ok'\n        let icono = 'ok'\n        if (estado === 'vencida') icono = 'vencida'\n        else if (estado === 'proxima') icono = 'proxima'\n        return { ...m, estadoIcono: icono }\n      })\n    },\n    totalPages() {\n      return Math.ceil(this.mantencionesConEstado.length / this.totalItemsPerPage)\n    },\n    mantencionesPaginadas() {\n      const start = (this.currentPage - 1) * this.totalItemsPerPage\n      return this.mantencionesConEstado.slice(start, start + this.totalItemsPerPage)\n    }\n  },\n  methods: {\n    formatFecha(fechaStr) {\n      if (!fechaStr) return 'N/A'\n      const f = new Date(fechaStr)\n      if (isNaN(f.getTime())) return fechaStr\n      const opts = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      }\n      return f.toLocaleString('es-CL', opts)\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}