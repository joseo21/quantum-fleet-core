{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'EmpresasTable',\n  props: {\n    customers: Array,\n    selectedIds: Array,\n    searchTerm: String,\n    rowsPerPage: Number,\n    currentPage: Number\n  },\n  emits: ['edit', 'copy', 'delete-selected'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const selectAll = ref(false);\n    const filteredCustomers = computed(() => {\n      if (!props.searchTerm) return props.customers;\n      const term = props.searchTerm.toLowerCase();\n      return props.customers.filter(c => c.name.toLowerCase().includes(term) || c.rut.toLowerCase().includes(term) || c.contact.toLowerCase().includes(term) || c.createdAt.includes(term));\n    });\n    const localSearch = ref(props.searchTerm);\n    watch(localSearch, val => emit('update:searchTerm', val));\n    const localSelected = ref([...props.selectedIds]);\n    watch(localSelected, val => emit('update:selectedIds', val));\n    const localPage = ref(props.currentPage);\n    watch(localPage, val => emit('update:currentPage', val));\n    const paginatedCustomers = computed(() => {\n      const start = (props.currentPage - 1) * props.rowsPerPage;\n      return filteredCustomers.value.slice(start, start + props.rowsPerPage);\n    });\n    const totalPages = computed(() => Math.ceil(filteredCustomers.value.length / props.rowsPerPage));\n    const toggleSelectAll = () => selectAll.value ? props.selectedIds.splice(0, props.selectedIds.length, ...paginatedCustomers.value.map(c => c.id)) : props.selectedIds.splice(0, props.selectedIds.length, []);\n    const nextPage = () => {\n      if (props.currentPage < totalPages.value) props.currentPage++;\n    };\n    const previousPage = () => {\n      if (props.currentPage > 1) props.currentPage--;\n    };\n    watch(paginatedCustomers, () => selectAll.value = false);\n    const __returned__ = {\n      props,\n      emit,\n      selectAll,\n      filteredCustomers,\n      localSearch,\n      localSelected,\n      localPage,\n      paginatedCustomers,\n      totalPages,\n      toggleSelectAll,\n      nextPage,\n      previousPage,\n      ref,\n      computed,\n      watch,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","SvgIcon","props","__props","emit","__emit","selectAll","filteredCustomers","searchTerm","customers","term","toLowerCase","filter","c","name","includes","rut","contact","createdAt","localSearch","val","localSelected","selectedIds","localPage","currentPage","paginatedCustomers","start","rowsPerPage","value","slice","totalPages","Math","ceil","length","toggleSelectAll","splice","map","id","nextPage","previousPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/EmpresasTable.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col gap-3\">\n    <!-- Barra superior -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3\">\n      <div class=\"flex w-full sm:w-2/3 md:w-1/2\">\n        <div class=\"flex w-full border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden\">\n          <div class=\"flex items-center justify-center px-3 bg-gray-100 dark:bg-gray-800 text-gray-500\">\n            <SvgIcon name=\"search\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <input v-model=\"searchTerm\" placeholder=\"Buscar empresa...\" class=\"flex-1 p-2\" />\n          <button v-if=\"searchTerm\" @click=\"searchTerm = ''\" class=\"px-4 bg-[#ff6600] text-white\">Limpiar</button>\n        </div>\n      </div>\n\n      <div class=\"flex gap-2\">\n        <button @click=\"$emit('update:showAddModal', true)\">Agregar Empresa</button>\n        <button v-if=\"selectedIds.length > 0\" @click=\"$emit('delete-selected', selectedIds)\">Eliminar</button>\n      </div>\n    </div>\n\n    <!-- Tabla -->\n    <table class=\"min-w-full text-center border-collapse\">\n      <thead>\n        <tr>\n          <th><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" /></th>\n          <th>Fecha</th>\n          <th>Nombre</th>\n          <th>RUT</th>\n          <th>Contacto</th>\n          <th>Ciudad</th>\n          <th>Acciones</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"customer in paginatedCustomers\" :key=\"customer.id\">\n          <td><input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" /></td>\n          <td>{{ customer.createdAt }}</td>\n          <td>{{ customer.name }}</td>\n          <td>{{ customer.rut }}</td>\n          <td>{{ customer.contact }}</td>\n          <td>{{ customer.city }}</td>\n          <td>\n            <button @click=\"$emit('edit', customer)\">Editar</button>\n            <button @click=\"$emit('copy', customer)\">Copiar</button>\n          </td>\n        </tr>\n        <tr v-if=\"paginatedCustomers.length === 0\">\n          <td colspan=\"7\">No hay empresas registradas</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Paginación simple -->\n    <div class=\"flex justify-between items-center mt-2\">\n      <button @click=\"previousPage\" :disabled=\"currentPage === 1\">←</button>\n      <span>Página {{ currentPage }} / {{ totalPages }}</span>\n      <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\">→</button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({\n  customers: Array,\n  selectedIds: Array,\n  searchTerm: String,\n  rowsPerPage: Number,\n  currentPage: Number\n})\nconst emit = defineEmits(['edit', 'copy', 'delete-selected'])\n\nconst selectAll = ref(false)\n\nconst filteredCustomers = computed(() => {\n  if (!props.searchTerm) return props.customers\n  const term = props.searchTerm.toLowerCase()\n  return props.customers.filter(c =>\n    c.name.toLowerCase().includes(term) ||\n    c.rut.toLowerCase().includes(term) ||\n    c.contact.toLowerCase().includes(term) ||\n    c.createdAt.includes(term)\n  )\n})\n\nconst localSearch = ref(props.searchTerm)\nwatch(localSearch, val => emit('update:searchTerm', val))\n\nconst localSelected = ref([...props.selectedIds])\nwatch(localSelected, val => emit('update:selectedIds', val))\n\nconst localPage = ref(props.currentPage)\nwatch(localPage, val => emit('update:currentPage', val))\n\n\nconst paginatedCustomers = computed(() => {\n  const start = (props.currentPage - 1) * props.rowsPerPage\n  return filteredCustomers.value.slice(start, start + props.rowsPerPage)\n})\n\nconst totalPages = computed(() => Math.ceil(filteredCustomers.value.length / props.rowsPerPage))\n\nconst toggleSelectAll = () => selectAll.value\n  ? props.selectedIds.splice(0, props.selectedIds.length, ...paginatedCustomers.value.map(c => c.id))\n  : props.selectedIds.splice(0, props.selectedIds.length, [])\n\nconst nextPage = () => { if (props.currentPage < totalPages.value) props.currentPage++ }\nconst previousPage = () => { if (props.currentPage > 1) props.currentPage-- }\n\nwatch(paginatedCustomers, () => selectAll.value = false)\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}