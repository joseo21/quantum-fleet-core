{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, watch, computed } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'EmpresasTable',\n  props: {\n    customers: Array,\n    searchTerm: String,\n    selectedIds: Array,\n    rowsPerPage: Number,\n    currentPage: Number\n  },\n  emits: ['update:searchTerm', 'update:selectedIds', 'update:rowsPerPage', 'update:currentPage', 'open-add-modal', 'delete-selected', 'edit', 'copy'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // ðŸ”Ž Buscador local\n    const localSearchTerm = ref(props.searchTerm);\n    watch(localSearchTerm, val => emit('update:searchTerm', val));\n    watch(() => props.searchTerm, val => localSearchTerm.value = val);\n\n    // ðŸ§© Variables locales para props no mutables\n    const localSelectedIds = ref([...props.selectedIds]);\n    const localRowsPerPage = ref(props.rowsPerPage || 10);\n    const selectAll = ref(false);\n\n    // ðŸª„ SincronizaciÃ³n\n    watch(() => props.selectedIds, val => localSelectedIds.value = [...val]);\n    watch(() => props.rowsPerPage, val => localRowsPerPage.value = val);\n\n    // ðŸš€ Emitir cambios locales\n    watch(localSelectedIds, val => emit('update:selectedIds', val));\n    watch(localRowsPerPage, val => emit('update:rowsPerPage', val));\n\n    // ðŸ” Filtros + PaginaciÃ³n\n    const filtered = computed(() => {\n      if (!props.searchTerm) return props.customers;\n      const term = props.searchTerm.toLowerCase();\n      return props.customers.filter(c => c.name.toLowerCase().includes(term) || c.rut.toLowerCase().includes(term) || c.contact.toLowerCase().includes(term));\n    });\n    const totalPages = computed(() => Math.max(1, Math.ceil(filtered.value.length / localRowsPerPage.value)));\n    const paginated = computed(() => {\n      const start = (props.currentPage - 1) * localRowsPerPage.value;\n      return filtered.value.slice(start, start + localRowsPerPage.value);\n    });\n\n    // ðŸ” SelecciÃ³n mÃºltiple\n    const toggleSelectAll = () => {\n      emit('update:selectedIds', selectAll.value ? paginated.value.map(c => c.id) : []);\n    };\n\n    // â© PaginaciÃ³n\n    const nextPage = () => {\n      if (props.currentPage < totalPages.value) emit('update:currentPage', props.currentPage + 1);\n    };\n    const previousPage = () => {\n      if (props.currentPage > 1) emit('update:currentPage', props.currentPage - 1);\n    };\n    watch(paginated, () => selectAll.value = false);\n    const __returned__ = {\n      props,\n      emit,\n      localSearchTerm,\n      localSelectedIds,\n      localRowsPerPage,\n      selectAll,\n      filtered,\n      totalPages,\n      paginated,\n      toggleSelectAll,\n      nextPage,\n      previousPage,\n      ref,\n      watch,\n      computed,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","computed","SvgIcon","props","__props","emit","__emit","localSearchTerm","searchTerm","val","value","localSelectedIds","selectedIds","localRowsPerPage","rowsPerPage","selectAll","filtered","customers","term","toLowerCase","filter","c","name","includes","rut","contact","totalPages","Math","max","ceil","length","paginated","start","currentPage","slice","toggleSelectAll","map","id","nextPage","previousPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/EmpresasTable.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- ðŸ” Barra de bÃºsqueda -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3\">\n      <div class=\"flex w-full sm:w-2/3 md:w-1/2\">\n        <div class=\"flex w-full border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden\">\n          <div class=\"flex items-center justify-center px-3 bg-gray-100 dark:bg-gray-800 text-gray-500\">\n            <SvgIcon name=\"search\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <input\n            v-model=\"localSearchTerm\"\n            placeholder=\"Buscar empresa...\"\n            class=\"flex-1 p-2 text-sm sm:text-base bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none\"\n          />\n          <button\n            v-if=\"localSearchTerm\"\n            @click=\"localSearchTerm = ''\"\n            class=\"px-4 bg-[#ff6600] hover:bg-[#e65500] text-white font-semibold text-sm transition\"\n          >\n            Limpiar\n          </button>\n        </div>\n      </div>\n\n      <!-- ðŸ§© Botones -->\n      <div class=\"flex gap-2\">\n        <button\n          @click=\"$emit('open-add-modal')\"\n          class=\"flex items-center gap-2 px-4 py-2 bg-[#ff6600] hover:bg-[#e65500] text-white rounded-md font-medium transition\"\n        >\n          <SvgIcon name=\"plus\" class=\"w-5 h-5\" />\n          <span>Agregar Empresa</span>\n        </button>\n\n        <transition name=\"fade-scale\">\n          <button\n            v-if=\"localSelectedIds.length\"\n            @click=\"$emit('delete-selected')\"\n            class=\"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md transition\"\n          >\n            <SvgIcon name=\"trash\" class=\"w-5 h-5\" />\n          </button>\n        </transition>\n      </div>\n    </div>\n\n    <!-- ðŸ“‹ Tabla -->\n    <div class=\"border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm overflow-y-auto max-h-[500px]\">\n      <table class=\"min-w-full text-xs sm:text-sm md:text-base text-center border-collapse\">\n        <thead class=\"bg-[#102372] sticky top-0 text-gray-100\">\n          <tr>\n            <th><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" /></th>\n            <th>Fecha</th><th>Nombre</th><th>RUT</th><th>Contacto</th><th>Ciudad</th><th>Acciones</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr\n            v-for=\"customer in paginated\"\n            :key=\"customer.id\"\n            class=\"hover:bg-gray-50 dark:hover:bg-gray-700\"\n          >\n            <td><input type=\"checkbox\" v-model=\"localSelectedIds\" :value=\"customer.id\" /></td>\n            <td>{{ customer.createdAt }}</td>\n            <td>{{ customer.name }}</td>\n            <td>{{ customer.rut }}</td>\n            <td>{{ customer.contact }}</td>\n            <td>{{ customer.city }}</td>\n            <td class=\"flex justify-center gap-2\">\n              <button\n                @click=\"$emit('edit', customer)\"\n                class=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md\"\n              >\n                <SvgIcon name=\"pencil\" class=\"w-4 h-4\" />\n              </button>\n              <button\n                @click=\"$emit('copy', customer)\"\n                class=\"px-3 py-1 bg-gray-800 text-white rounded hover:bg-gray-700\"\n              >\n                <SvgIcon name=\"copy\" class=\"w-4 h-4\" />\n              </button>\n            </td>\n          </tr>\n          <tr v-if=\"paginated.length === 0\">\n            <td colspan=\"7\" class=\"py-4 text-gray-500\">No hay empresas registradas</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- ðŸ“‘ PaginaciÃ³n -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mt-4 gap-2 text-xs sm:text-sm\">\n      <div class=\"flex items-center gap-2\">\n        <label>Filas:</label>\n        <select v-model.number=\"localRowsPerPage\" class=\"border rounded px-2 py-1\">\n          <option v-for=\"n in [5,10,20,50]\" :key=\"n\" :value=\"n\">{{ n }}</option>\n        </select>\n      </div>\n\n      <div class=\"flex items-center gap-2\">\n        <button @click=\"previousPage\" :disabled=\"currentPage === 1\" class=\"px-2 border rounded\">â€¹</button>\n        <span>PÃ¡gina {{ currentPage }} / {{ totalPages }}</span>\n        <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\" class=\"px-2 border rounded\">â€º</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, computed } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({\n  customers: Array,\n  searchTerm: String,\n  selectedIds: Array,\n  rowsPerPage: Number,\n  currentPage: Number,\n})\n\nconst emit = defineEmits([\n  'update:searchTerm',\n  'update:selectedIds',\n  'update:rowsPerPage',\n  'update:currentPage',\n  'open-add-modal',\n  'delete-selected',\n  'edit',\n  'copy',\n])\n\n// ðŸ”Ž Buscador local\nconst localSearchTerm = ref(props.searchTerm)\nwatch(localSearchTerm, (val) => emit('update:searchTerm', val))\nwatch(() => props.searchTerm, (val) => (localSearchTerm.value = val))\n\n// ðŸ§© Variables locales para props no mutables\nconst localSelectedIds = ref([...props.selectedIds])\nconst localRowsPerPage = ref(props.rowsPerPage || 10)\nconst selectAll = ref(false)\n\n// ðŸª„ SincronizaciÃ³n\nwatch(() => props.selectedIds, (val) => (localSelectedIds.value = [...val]))\nwatch(() => props.rowsPerPage, (val) => (localRowsPerPage.value = val))\n\n// ðŸš€ Emitir cambios locales\nwatch(localSelectedIds, (val) => emit('update:selectedIds', val))\nwatch(localRowsPerPage, (val) => emit('update:rowsPerPage', val))\n\n// ðŸ” Filtros + PaginaciÃ³n\nconst filtered = computed(() => {\n  if (!props.searchTerm) return props.customers\n  const term = props.searchTerm.toLowerCase()\n  return props.customers.filter(\n    (c) =>\n      c.name.toLowerCase().includes(term) ||\n      c.rut.toLowerCase().includes(term) ||\n      c.contact.toLowerCase().includes(term),\n  )\n})\n\nconst totalPages = computed(() => Math.max(1, Math.ceil(filtered.value.length / localRowsPerPage.value)))\n\nconst paginated = computed(() => {\n  const start = (props.currentPage - 1) * localRowsPerPage.value\n  return filtered.value.slice(start, start + localRowsPerPage.value)\n})\n\n// ðŸ” SelecciÃ³n mÃºltiple\nconst toggleSelectAll = () => {\n  emit('update:selectedIds', selectAll.value ? paginated.value.map((c) => c.id) : [])\n}\n\n// â© PaginaciÃ³n\nconst nextPage = () => {\n  if (props.currentPage < totalPages.value) emit('update:currentPage', props.currentPage + 1)\n}\nconst previousPage = () => {\n  if (props.currentPage > 1) emit('update:currentPage', props.currentPage - 1)\n}\n\nwatch(paginated, () => (selectAll.value = false))\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}