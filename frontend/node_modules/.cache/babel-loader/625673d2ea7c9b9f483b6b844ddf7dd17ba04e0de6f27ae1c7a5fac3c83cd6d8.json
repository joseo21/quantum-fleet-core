{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, watch, computed } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'EmpresasTable',\n  props: {\n    customers: Array,\n    searchTerm: String,\n    selectedIds: Array,\n    rowsPerPage: Number,\n    currentPage: Number\n  },\n  emits: ['update:searchTerm', 'update:selectedIds', 'update:rowsPerPage', 'update:currentPage', 'open-add-modal', 'delete-selected', 'edit', 'copy'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const localSearchTerm = ref(props.searchTerm);\n    watch(localSearchTerm, val => emit('update:searchTerm', val));\n    const selectAll = ref(false);\n    const filtered = computed(() => {\n      if (!props.searchTerm) return props.customers;\n      const term = props.searchTerm.toLowerCase();\n      return props.customers.filter(c => c.name.toLowerCase().includes(term) || c.rut.toLowerCase().includes(term) || c.contact.toLowerCase().includes(term));\n    });\n    const totalPages = computed(() => Math.ceil(filtered.value.length / props.rowsPerPage));\n    const paginated = computed(() => {\n      const start = (props.currentPage - 1) * props.rowsPerPage;\n      return filtered.value.slice(start, start + props.rowsPerPage);\n    });\n    const toggleSelectAll = () => {\n      emit('update:selectedIds', selectAll.value ? paginated.value.map(c => c.id) : []);\n    };\n    const nextPage = () => emit('update:currentPage', props.currentPage + 1);\n    const previousPage = () => emit('update:currentPage', props.currentPage - 1);\n    watch(paginated, () => selectAll.value = false);\n    const __returned__ = {\n      props,\n      emit,\n      localSearchTerm,\n      selectAll,\n      filtered,\n      totalPages,\n      paginated,\n      toggleSelectAll,\n      nextPage,\n      previousPage,\n      ref,\n      watch,\n      computed,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","computed","SvgIcon","props","__props","emit","__emit","localSearchTerm","searchTerm","val","selectAll","filtered","customers","term","toLowerCase","filter","c","name","includes","rut","contact","totalPages","Math","ceil","value","length","rowsPerPage","paginated","start","currentPage","slice","toggleSelectAll","map","id","nextPage","previousPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/EmpresasTable.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- Barra de búsqueda -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3\">\n      <div class=\"flex w-full sm:w-2/3 md:w-1/2\">\n        <div class=\"flex w-full border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden\">\n          <div class=\"flex items-center justify-center px-3 bg-gray-100 dark:bg-gray-800 text-gray-500\">\n            <SvgIcon name=\"search\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <input\n            v-model=\"localSearchTerm\"\n            placeholder=\"Buscar empresa...\"\n            class=\"flex-1 p-2 text-sm sm:text-base bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none\"\n          />\n          <button\n            v-if=\"localSearchTerm\"\n            @click=\"localSearchTerm = ''\"\n            class=\"px-4 bg-[#ff6600] hover:bg-[#e65500] text-white font-semibold text-sm transition\"\n          >\n            Limpiar\n          </button>\n        </div>\n      </div>\n\n      <!-- Botones -->\n      <div class=\"flex gap-2\">\n        <button\n          @click=\"$emit('open-add-modal')\"\n          class=\"flex items-center gap-2 px-4 py-2 bg-[#ff6600] hover:bg-[#e65500] text-white rounded-md font-medium transition\"\n        >\n          <SvgIcon name=\"plus\" class=\"w-5 h-5\" />\n          <span>Agregar Empresa</span>\n        </button>\n\n        <transition name=\"fade-scale\">\n          <button\n            v-if=\"selectedIds.length\"\n            @click=\"$emit('delete-selected')\"\n            class=\"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md transition\"\n          >\n            <SvgIcon name=\"trash\" class=\"w-5 h-5\" />\n          </button>\n        </transition>\n      </div>\n    </div>\n\n    <!-- Tabla -->\n    <div class=\"border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm overflow-y-auto max-h-[500px]\">\n      <table class=\"min-w-full text-xs sm:text-sm md:text-base text-center border-collapse\">\n        <thead class=\"bg-[#102372] sticky top-0 text-gray-100\">\n          <tr>\n            <th><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" /></th>\n            <th>Fecha</th><th>Nombre</th><th>RUT</th><th>Contacto</th><th>Ciudad</th><th>Acciones</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr v-for=\"customer in paginated\" :key=\"customer.id\" class=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n            <td><input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" /></td>\n            <td>{{ customer.createdAt }}</td>\n            <td>{{ customer.name }}</td>\n            <td>{{ customer.rut }}</td>\n            <td>{{ customer.contact }}</td>\n            <td>{{ customer.city }}</td>\n            <td class=\"flex justify-center gap-2\">\n              <button @click=\"$emit('edit', customer)\" class=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md\">\n                <SvgIcon name=\"pencil\" class=\"w-4 h-4\" />\n              </button>\n              <button @click=\"$emit('copy', customer)\" class=\"px-3 py-1 bg-gray-800 text-white rounded hover:bg-gray-700\">\n                <SvgIcon name=\"copy\" class=\"w-4 h-4\" />\n              </button>\n            </td>\n          </tr>\n          <tr v-if=\"paginated.length === 0\">\n            <td colspan=\"7\" class=\"py-4 text-gray-500\">No hay empresas registradas</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Paginación -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mt-4 gap-2 text-xs sm:text-sm\">\n      <div class=\"flex items-center gap-2\">\n        <label>Filas:</label>\n        <select v-model.number=\"rowsPerPage\" class=\"border rounded px-2 py-1\">\n          <option v-for=\"n in [5,10,20,50]\" :key=\"n\" :value=\"n\">{{ n }}</option>\n        </select>\n      </div>\n\n      <div class=\"flex items-center gap-2\">\n        <button @click=\"previousPage\" :disabled=\"currentPage === 1\" class=\"px-2 border rounded\">‹</button>\n        <span>Página {{ currentPage }} / {{ totalPages }}</span>\n        <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\" class=\"px-2 border rounded\">›</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, computed } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({\n  customers: Array,\n  searchTerm: String,\n  selectedIds: Array,\n  rowsPerPage: Number,\n  currentPage: Number\n})\nconst emit = defineEmits([\n  'update:searchTerm', 'update:selectedIds', 'update:rowsPerPage', 'update:currentPage',\n  'open-add-modal', 'delete-selected', 'edit', 'copy'\n])\n\nconst localSearchTerm = ref(props.searchTerm)\nwatch(localSearchTerm, val => emit('update:searchTerm', val))\n\nconst selectAll = ref(false)\n\nconst filtered = computed(() => {\n  if (!props.searchTerm) return props.customers\n  const term = props.searchTerm.toLowerCase()\n  return props.customers.filter(c =>\n    c.name.toLowerCase().includes(term) ||\n    c.rut.toLowerCase().includes(term) ||\n    c.contact.toLowerCase().includes(term)\n  )\n})\n\nconst totalPages = computed(() => Math.ceil(filtered.value.length / props.rowsPerPage))\nconst paginated = computed(() => {\n  const start = (props.currentPage - 1) * props.rowsPerPage\n  return filtered.value.slice(start, start + props.rowsPerPage)\n})\n\nconst toggleSelectAll = () => {\n  emit('update:selectedIds', selectAll.value ? paginated.value.map(c => c.id) : [])\n}\n\nconst nextPage = () => emit('update:currentPage', props.currentPage + 1)\nconst previousPage = () => emit('update:currentPage', props.currentPage - 1)\n\nwatch(paginated, () => selectAll.value = false)\n</script>\n"],"mappings":";;;AAmGA,SAASA,GAAG,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,KAAI;AACzC,OAAOC,OAAO,MAAM,gCAA+B;;;;;;;;;;;;;;;;IAEnD,MAAMC,KAAK,GAAGC,OAAA;IAOd,MAAMC,IAAI,GAAGC,MAAA;IAKb,MAAMC,eAAe,GAAGR,GAAG,CAACI,KAAK,CAACK,UAAU;IAC5CR,KAAK,CAACO,eAAe,EAAEE,GAAG,IAAIJ,IAAI,CAAC,mBAAmB,EAAEI,GAAG,CAAC;IAE5D,MAAMC,SAAS,GAAGX,GAAG,CAAC,KAAK;IAE3B,MAAMY,QAAQ,GAAGV,QAAQ,CAAC,MAAM;MAC9B,IAAI,CAACE,KAAK,CAACK,UAAU,EAAE,OAAOL,KAAK,CAACS,SAAQ;MAC5C,MAAMC,IAAI,GAAGV,KAAK,CAACK,UAAU,CAACM,WAAW,CAAC;MAC1C,OAAOX,KAAK,CAACS,SAAS,CAACG,MAAM,CAACC,CAAC,IAC7BA,CAAC,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,IAAI,CAAC,IACnCG,CAAC,CAACG,GAAG,CAACL,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,IAAI,CAAC,IAClCG,CAAC,CAACI,OAAO,CAACN,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,IAAI,CACvC;IACF,CAAC;IAED,MAAMQ,UAAU,GAAGpB,QAAQ,CAAC,MAAMqB,IAAI,CAACC,IAAI,CAACZ,QAAQ,CAACa,KAAK,CAACC,MAAM,GAAGtB,KAAK,CAACuB,WAAW,CAAC;IACtF,MAAMC,SAAS,GAAG1B,QAAQ,CAAC,MAAM;MAC/B,MAAM2B,KAAK,GAAG,CAACzB,KAAK,CAAC0B,WAAW,GAAG,CAAC,IAAI1B,KAAK,CAACuB,WAAU;MACxD,OAAOf,QAAQ,CAACa,KAAK,CAACM,KAAK,CAACF,KAAK,EAAEA,KAAK,GAAGzB,KAAK,CAACuB,WAAW;IAC9D,CAAC;IAED,MAAMK,eAAe,GAAGA,CAAA,KAAM;MAC5B1B,IAAI,CAAC,oBAAoB,EAAEK,SAAS,CAACc,KAAK,GAAGG,SAAS,CAACH,KAAK,CAACQ,GAAG,CAAChB,CAAC,IAAIA,CAAC,CAACiB,EAAE,CAAC,GAAG,EAAE;IAClF;IAEA,MAAMC,QAAQ,GAAGA,CAAA,KAAM7B,IAAI,CAAC,oBAAoB,EAAEF,KAAK,CAAC0B,WAAW,GAAG,CAAC;IACvE,MAAMM,YAAY,GAAGA,CAAA,KAAM9B,IAAI,CAAC,oBAAoB,EAAEF,KAAK,CAAC0B,WAAW,GAAG,CAAC;IAE3E7B,KAAK,CAAC2B,SAAS,EAAE,MAAMjB,SAAS,CAACc,KAAK,GAAG,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}