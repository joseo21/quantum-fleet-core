{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'AgregarEmpresasModal',\n  props: {\n    show: Boolean,\n    step: Number,\n    newCompany: Object,\n    templates: Array,\n    selectedTemplate: [Number, null],\n    isStep1Valid: Boolean\n  },\n  emits: ['update:step', 'update:newCompany', 'update:selectedTemplate', 'go-to-next-step', 'add-company', 'cancel'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n\n    // Función RUT reutilizable\n    const formatRut = company => {\n      let rut = company.rut.replace(/[^0-9kK]/g, '');\n      if (rut.length > 9) rut = rut.slice(0, 9);\n      if (rut.length > 1) {\n        const body = rut.slice(0, -1);\n        const dv = rut.slice(-1);\n        const reversed = body.split('').reverse();\n        const withDots = [];\n        reversed.forEach((char, i) => {\n          if (i > 0 && i % 3 === 0) withDots.push('.');\n          withDots.push(char);\n        });\n        company.rut = withDots.reverse().join('') + '-' + dv;\n      } else company.rut = rut;\n      return company;\n    };\n    const __returned__ = {\n      props,\n      emit,\n      formatRut,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["SvgIcon","props","__props","emit","__emit","formatRut","company","rut","replace","length","slice","body","dv","reversed","split","reverse","withDots","forEach","char","i","push","join"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/AgregarEmpresasModal.vue"],"sourcesContent":["<template>\n  <div v-if=\"show\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n    <div\n      class=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-lg relative flex flex-col w-full max-w-lg h-auto p-6 border border-gray-300 dark:border-gray-700 shadow-xl\">\n\n      <!-- Botón volver -->\n      <button v-if=\"step === 2\" @click=\"$emit('update:step',1)\"\n        class=\"absolute top-4 left-4 p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition\" title=\"Volver\">\n        <SvgIcon name=\"arrow-left\" class=\"w-6 h-6\" />\n      </button>\n\n      <h2 class=\"text-2xl font-bold mb-4 text-center text-[#102372] dark:text-[#ff6600]\">\n        {{ step === 1 ? 'Agregar Empresa' : 'Seleccionar Template' }}\n      </h2>\n\n      <span class=\"h-px bg-gray-300 dark:bg-gray-700 mb-4\"></span>\n\n      <!-- Paso 1 -->\n      <form v-if=\"step === 1\" @submit.prevent=\"$emit('go-to-next-step')\" class=\"flex-1 flex flex-col gap-3 py-2 overflow-y-auto\">\n        <input :value=\"newCompany.name\" @input=\"$emit('update:newCompany', { ...newCompany, name: $event.target.value })\"\n          type=\"text\" placeholder=\"Nombre de la empresa\"\n          class=\"px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none\"\n          required />\n\n        <input :value=\"newCompany.rut\" @input=\"$emit('update:newCompany', formatRut({ ...newCompany, rut: $event.target.value }))\"\n          type=\"text\" placeholder=\"RUT de la empresa\"\n          class=\"px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none\"\n          required />\n\n        <input :value=\"newCompany.contact\" @input=\"$emit('update:newCompany', { ...newCompany, contact: $event.target.value })\"\n          type=\"text\" placeholder=\"Contacto\"\n          class=\"px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none\"\n          required />\n\n        <input :value=\"newCompany.city\" @input=\"$emit('update:newCompany', { ...newCompany, city: $event.target.value })\"\n          type=\"text\" placeholder=\"Ciudad de la empresa\"\n          class=\"px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none\"\n          required />\n      </form>\n\n      <!-- Paso 2: seleccionar template -->\n      <div v-else class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4\">\n        <div v-for=\"template in templates\" :key=\"template.id\"\n          @click=\"$emit('update:selectedTemplate', template.id)\"\n          :class=\"[\n            'p-6 rounded-lg border cursor-pointer text-center transition',\n            selectedTemplate === template.id\n              ? 'border-[#ff6600] bg-orange-100 dark:bg-[#e65500]/30'\n              : 'border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800'\n          ]\">\n          <h3 class=\"text-lg font-semibold mb-2\">{{ template.name }}</h3>\n          <p class=\"text-gray-500 dark:text-gray-400 text-sm\">{{ template.description }}</p>\n        </div>\n      </div>\n\n      <!-- Botones -->\n      <div class=\"flex justify-between mt-6\">\n        <button @click=\"$emit('cancel')\"\n          class=\"bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded w-[48%] text-white\">\n          Cancelar\n        </button>\n\n        <button v-if=\"step === 1\" @click=\"$emit('go-to-next-step')\" :disabled=\"!isStep1Valid\"\n          :class=\"['px-4 py-2 rounded w-[48%] text-white font-medium', isStep1Valid ? 'bg-[#102372] hover:bg-[#0c1a5b]' : 'bg-[#102372]/50 cursor-not-allowed']\">\n          Siguiente\n        </button>\n\n        <button v-else @click=\"$emit('add-company')\" :disabled=\"!selectedTemplate\"\n          :class=\"['px-4 py-2 rounded w-[48%] text-white font-medium', selectedTemplate ? 'bg-[#ff6600] hover:bg-[#e65500]' : 'bg-[#ff6600]/50 cursor-not-allowed']\">\n          Crear Empresa\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({\n  show: Boolean,\n  step: Number,\n  newCompany: Object,\n  templates: Array,\n  selectedTemplate: [Number, null],\n  isStep1Valid: Boolean\n})\n\nconst emit = defineEmits([\n  'update:step',\n  'update:newCompany',\n  'update:selectedTemplate',\n  'go-to-next-step',\n  'add-company',\n  'cancel'\n])\n\n// Función RUT reutilizable\nconst formatRut = (company) => {\n  let rut = company.rut.replace(/[^0-9kK]/g, '')\n  if (rut.length > 9) rut = rut.slice(0, 9)\n  if (rut.length > 1) {\n    const body = rut.slice(0, -1)\n    const dv = rut.slice(-1)\n    const reversed = body.split('').reverse()\n    const withDots = []\n    reversed.forEach((char, i) => { if (i > 0 && i % 3 === 0) withDots.push('.'); withDots.push(char) })\n    company.rut = withDots.reverse().join('') + '-' + dv\n  } else company.rut = rut\n  return company\n}\n</script>\n"],"mappings":";;;AA6EA,OAAOA,OAAO,MAAM,gCAA+B;;;;;;;;;;;;;;;;;IAEnD,MAAMC,KAAK,GAAGC,OAAA;IASd,MAAMC,IAAI,GAAGC,MAAA;;IASb;IACA,MAAMC,SAAS,GAAIC,OAAO,IAAK;MAC7B,IAAIC,GAAG,GAAGD,OAAO,CAACC,GAAG,CAACC,OAAO,CAAC,WAAW,EAAE,EAAE;MAC7C,IAAID,GAAG,CAACE,MAAM,GAAG,CAAC,EAAEF,GAAG,GAAGA,GAAG,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC;MACxC,IAAIH,GAAG,CAACE,MAAM,GAAG,CAAC,EAAE;QAClB,MAAME,IAAI,GAAGJ,GAAG,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5B,MAAME,EAAE,GAAGL,GAAG,CAACG,KAAK,CAAC,CAAC,CAAC;QACvB,MAAMG,QAAQ,GAAGF,IAAI,CAACG,KAAK,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC;QACxC,MAAMC,QAAQ,GAAG,EAAC;QAClBH,QAAQ,CAACI,OAAO,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAK;UAAE,IAAIA,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,KAAK,CAAC,EAAEH,QAAQ,CAACI,IAAI,CAAC,GAAG,CAAC;UAAEJ,QAAQ,CAACI,IAAI,CAACF,IAAI,CAAC;QAAC,CAAC;QACnGZ,OAAO,CAACC,GAAG,GAAGS,QAAQ,CAACD,OAAO,CAAC,CAAC,CAACM,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAGT,EAAC;MACrD,CAAC,MAAMN,OAAO,CAACC,GAAG,GAAGA,GAAE;MACvB,OAAOD,OAAM;IACf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}