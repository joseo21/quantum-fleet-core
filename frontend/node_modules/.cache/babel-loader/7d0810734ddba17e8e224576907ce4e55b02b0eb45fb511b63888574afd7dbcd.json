{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  name: \"MantencionesTable\",\n  components: {\n    SvgIcon\n  },\n  props: {\n    showAddModal: {\n      type: Boolean,\n      required: true\n    },\n    selectedPatente: {\n      type: String,\n      required: true\n    },\n    mantenciones: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      search: \"\",\n      debouncedSearch: \"\",\n      currentPage: 1,\n      rowsPerPage: 5,\n      columns: [\"Patente\", \"Od贸metro (Km)\", \"Estado de mantenci贸n\", \"Ver Mantenciones\", \"Agregar Mantenci贸n\"]\n    };\n  },\n  computed: {\n    ultimoCampoValue: {\n      get() {\n        if (!this.selectedTemplate) return '';\n        if (this.selectedTemplate.type === 'Por Od贸metro') {\n          const vehiculo = this.mantenciones.find(v => v.patente === this.selectedPatente);\n          return this.maintenance.km || (vehiculo ? vehiculo.odometro : '');\n        } else {\n          return this.maintenance.fechaUltima;\n        }\n      },\n      set(value) {\n        if (!this.selectedTemplate) return;\n        if (this.selectedTemplate.type === 'Por Od贸metro') {\n          this.maintenance.km = value;\n        } else {\n          this.maintenance.fechaUltima = value;\n        }\n      }\n    }\n  },\n  watch: {\n    search(val) {\n      clearTimeout(this._debounceTimeout);\n      this._debounceTimeout = setTimeout(() => {\n        this.debouncedSearch = val.trim().toLowerCase();\n        this.currentPage = 1;\n      }, 300);\n    }\n  },\n  methods: {\n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages) this.currentPage = page;\n    },\n    formatOdometro(valor) {\n      const num = parseFloat(valor);\n      return isNaN(num) ? '0.00' : num.toFixed(2);\n    },\n    clearSearch() {\n      this.search = \"\";\n      this.debouncedSearch = \"\";\n    }\n  }\n};","map":{"version":3,"names":["SvgIcon","name","components","props","showAddModal","type","Boolean","required","selectedPatente","String","mantenciones","Array","data","search","debouncedSearch","currentPage","rowsPerPage","columns","computed","ultimoCampoValue","get","selectedTemplate","vehiculo","find","v","patente","maintenance","km","odometro","fechaUltima","set","value","watch","val","clearTimeout","_debounceTimeout","setTimeout","trim","toLowerCase","methods","goToPage","page","totalPages","formatOdometro","valor","num","parseFloat","isNaN","toFixed","clearSearch"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/MantencionesTable.vue"],"sourcesContent":["<template>\n  <div class=\"p-2 sm:p-2 w-full flex flex-col\">\n    <!--  Barra de b煤squeda + KPIs -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3\">\n      <!--  Barra de b煤squeda -->\n      <div class=\"flex w-full sm:w-2/3 md:w-1/2\">\n        <div class=\"flex w-full border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden\">\n          <div class=\"flex items-center justify-center px-3 bg-gray-100 dark:bg-gray-800 text-gray-500\">\n            <SvgIcon name=\"search\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <input v-model=\"search\" placeholder=\"Buscar patente...\"\n            class=\"flex-1 p-2 text-sm sm:text-base bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-300 focus:outline-none\" />\n          <button v-if=\"search\" @click=\"clearSearch\"\n            class=\"px-4 bg-[#ff6600] hover:bg-[#e65500] text-white font-semibold text-sm transition\">\n            Limpiar\n          </button>\n        </div>\n      </div>\n\n      <!--  Peque帽os KPIs -->\n      <div class=\"flex gap-2\">\n        <div class=\"mini-kpi kpi-green\">\n          <span class=\"text-xs font-medium\">Mantenci贸n al D铆a</span>\n          <span class=\"font-bold text-sm\">{{ totalVerde }}</span>\n        </div>\n\n        <div class=\"mini-kpi kpi-yellow\">\n          <span class=\"text-xs font-medium\">Proximo a Mantenci贸n</span>\n          <span class=\"font-bold text-sm\">{{ totalAmarillo }}</span>\n        </div>\n\n        <div class=\"mini-kpi kpi-red\">\n          <span class=\"text-xs font-medium\">Mantenci贸n Vencida</span>\n          <span class=\"font-bold text-sm\">{{ totalRojo }}</span>\n        </div>\n      </div>\n    </div>\n\n    <!--  Tabla con scroll -->\n    <div class=\"border border-gray-300 dark:border-gray-700 rounded-lg shadow-sm overflow-y-auto max-h-[500px]\">\n      <table class=\"min-w-full text-xs sm:text-sm md:text-base text-center border-collapse\">\n        <thead class=\"bg-[#102372] dark:bg-[#102372] sticky top-0 z-10 text-gray-100\">\n          <tr>\n            <th v-for=\"col in columns\" :key=\"col\"\n              class=\"font-semibold py-2 px-3 border-b border-gray-300 dark:border-gray-600\">\n              {{ col }}\n            </th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr v-for=\"(item, idx) in paginatedData\" :key=\"idx\"\n            class=\"hover:bg-gray-50 dark:hover:bg-gray-700 border-b dark:border-gray-600\">\n            <td class=\"py-2 px-3\">{{ item.patente }}</td>\n            <td class=\"py-2 px-3\">{{ formatOdometro(item.odometro) }}</td>\n            <td class=\"py-2 px-3 text-center\">\n              <div class=\"flex flex-col items-center justify-center gap-2\">\n                <!-- Imagen -->\n                <img v-if=\"item.estado === 'OK'\" src=\"https://sinergygroup.cl/Mantenciones/img/verde.png\" alt=\"OK\"\n                  class=\"w-24 sm:w-28 md:w-32 h-auto object-contain\" />\n                <img v-else-if=\"item.estado === 'Pr贸xima mantenci贸n'\"\n                  src=\"https://sinergygroup.cl/Mantenciones/img/amarillo.png\" alt=\"Pr贸xima mantenci贸n\"\n                  class=\"w-24 sm:w-28 md:w-32 h-auto object-contain\" />\n                <img v-else-if=\"item.estado === 'Requiere mantenci贸n'\"\n                  src=\"https://sinergygroup.cl/Mantenciones/img/rojo.png\" alt=\"Mantenci贸n vencida\"\n                  class=\"w-24 sm:w-28 md:w-32 h-auto object-contain\" />\n\n                <!-- Etiquetas tipo badge -->\n                <span v-if=\"item.estado === 'OK'\"\n                  class=\"inline-flex items-center gap-1 sm:gap-2 justify-center rounded-full bg-emerald-100 px-3 py-1 text-emerald-700 text-xs sm:text-sm font-medium\">\n                  <SvgIcon name=\"ok\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                  <span>Veh铆culo al d铆a</span>\n                </span>\n\n                <span v-else-if=\"item.estado === 'Pr贸xima mantenci贸n'\"\n                  class=\"inline-flex items-center gap-1 sm:gap-2 justify-center rounded-full bg-amber-100 px-3 py-1 text-amber-700 text-xs sm:text-sm font-medium\">\n                  <SvgIcon name=\"proxima\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                  <span>Proximo a Mantenci贸n</span>\n                </span>\n\n                <span v-else-if=\"item.estado === 'Requiere mantenci贸n'\"\n                  class=\"inline-flex items-center gap-1 sm:gap-2 justify-center rounded-full bg-red-100 px-3 py-1 text-red-700 text-xs sm:text-sm font-medium\">\n                  <SvgIcon name=\"vencida\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                  <span>Mantenci贸n vencida</span>\n                </span>\n\n                <span v-else class=\"text-gray-500 text-xs\">{{ item.estado }}</span>\n              </div>\n            </td>\n\n            <td class=\"py-2 px-3\">\n              <button @click=\"$emit('ver-mantenciones', item)\"\n                class=\"flex items-center justify-center gap-1 sm:gap-2 mx-auto px-2 sm:px-6 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm font-medium transition\">\n                <SvgIcon name=\"eye\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                <span class=\"hidden sm:inline\">Ver</span>\n              </button>\n            </td>\n            <td class=\"py-2 px-3\">\n              <button @click=\"$emit('agregar-mantencion', item)\"\n                class=\"flex items-center justify-center gap-1 sm:gap-2 mx-auto px-2 sm:px-6 py-2 rounded bg-[#ff6600] hover:bg-[#e65500] text-white text-xs sm:text-sm font-medium transition\">\n                <SvgIcon name=\"plus\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                <span class=\"hidden sm:inline\">Agregar</span>\n              </button>\n\n            </td>\n          </tr>\n\n          <tr v-if=\"filteredData.length === 0\">\n            <td colspan=\"5\" class=\"text-center py-4 text-gray-500 dark:text-gray-400\">\n              No hay registros de mantenciones\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!--  Controles de paginaci贸n -->\n    <div\n      class=\"flex flex-col sm:flex-row justify-between items-center mt-4 text-xs sm:text-sm text-gray-700 dark:text-gray-300 gap-2 bg-[#f3f3f3] dark:bg-gray-800 p-2 rounded-md shadow-sm\">\n      <div class=\"flex items-center gap-2\">\n        <label for=\"rowsPerPage\" class=\"text-xs\">Filas por p谩gina:</label>\n        <select id=\"rowsPerPage\" v-model.number=\"rowsPerPage\"\n          class=\"border dark:border-gray-600 rounded px-2 py-1 text-xs sm:text-sm bg-white dark:bg-gray-700\">\n          <option v-for=\"n in [5, 10, 25, 50, 100]\" :key=\"n\" :value=\"n\">{{ n }}</option>\n        </select>\n      </div>\n\n      <div class=\"flex items-center gap-1 sm:gap-2\">\n        <button @click=\"goToPage(currentPage - 1)\" :disabled=\"currentPage === 1\"\n          class=\"px-2 py-1 rounded border border-gray-400 dark:border-gray-600 disabled:opacity-40 hover:bg-[#ff6600] hover:text-white transition\">\n          <SvgIcon name=\"chevron-left\" class=\"w-4 h-4\" />\n        </button>\n\n        <span class=\"px-2\">P谩gina {{ currentPage }} / {{ totalPages }}</span>\n\n        <button @click=\"goToPage(currentPage + 1)\" :disabled=\"currentPage === totalPages\"\n          class=\"px-2 py-1 rounded border border-gray-400 dark:border-gray-600 disabled:opacity-40 hover:bg-[#ff6600] hover:text-white transition\">\n          <SvgIcon name=\"chevron-right\" class=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nexport default {\n  name: \"MantencionesTable\",\n  components: { SvgIcon },\n  props: {\n    showAddModal: { type: Boolean, required: true },\n    selectedPatente: { type: String, required: true },\n    mantenciones: { type: Array, required: true },\n  },\n  data() {\n    return {\n      search: \"\",\n      debouncedSearch: \"\",\n      currentPage: 1,\n      rowsPerPage: 5,\n      columns: [\n        \"Patente\",\n        \"Od贸metro (Km)\",\n        \"Estado de mantenci贸n\",\n        \"Ver Mantenciones\",\n        \"Agregar Mantenci贸n\",\n      ],\n    };\n  },\n  computed: {\n    ultimoCampoValue: {\n      get() {\n        if (!this.selectedTemplate) return ''\n        if (this.selectedTemplate.type === 'Por Od贸metro') {\n          const vehiculo = this.mantenciones.find(v => v.patente === this.selectedPatente)\n          return this.maintenance.km || (vehiculo ? vehiculo.odometro : '')\n        } else {\n          return this.maintenance.fechaUltima\n        }\n      },\n      set(value) {\n        if (!this.selectedTemplate) return\n        if (this.selectedTemplate.type === 'Por Od贸metro') {\n          this.maintenance.km = value\n        } else {\n          this.maintenance.fechaUltima = value\n        }\n      }\n    }\n  },\n  watch: {\n    search(val) {\n      clearTimeout(this._debounceTimeout);\n      this._debounceTimeout = setTimeout(() => {\n        this.debouncedSearch = val.trim().toLowerCase();\n        this.currentPage = 1;\n      }, 300);\n    },\n  },\n  methods: {\n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages) this.currentPage = page;\n    },\n    formatOdometro(valor) {\n      const num = parseFloat(valor);\n      return isNaN(num) ? '0.00' : num.toFixed(2);\n    },\n    clearSearch() {\n      this.search = \"\";\n      this.debouncedSearch = \"\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.mini-kpi {\n  @apply flex flex-col items-center justify-center rounded-md px-9 py-5 border text-center shadow-sm;\n  min-width: 60px;\n}\n\n.kpi-green {\n  @apply bg-green-50 border-green-200 text-green-700;\n}\n\n.kpi-yellow {\n  @apply bg-yellow-50 border-yellow-200 text-yellow-700;\n}\n\n.kpi-red {\n  @apply bg-red-50 border-red-200 text-red-700;\n}\n</style>\n"],"mappings":";;AAiJA,OAAOA,OAAM,MAAO,gCAA+B;AAEnD,eAAe;EACbC,IAAI,EAAE,mBAAmB;EACzBC,UAAU,EAAE;IAAEF;EAAQ,CAAC;EACvBG,KAAK,EAAE;IACLC,YAAY,EAAE;MAAEC,IAAI,EAAEC,OAAO;MAAEC,QAAQ,EAAE;IAAK,CAAC;IAC/CC,eAAe,EAAE;MAAEH,IAAI,EAAEI,MAAM;MAAEF,QAAQ,EAAE;IAAK,CAAC;IACjDG,YAAY,EAAE;MAAEL,IAAI,EAAEM,KAAK;MAAEJ,QAAQ,EAAE;IAAK;EAC9C,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,eAAe,EAAE,EAAE;MACnBC,WAAW,EAAE,CAAC;MACdC,WAAW,EAAE,CAAC;MACdC,OAAO,EAAE,CACP,SAAS,EACT,eAAe,EACf,sBAAsB,EACtB,kBAAkB,EAClB,oBAAoB;IAExB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,gBAAgB,EAAE;MAChBC,GAAGA,CAAA,EAAG;QACJ,IAAI,CAAC,IAAI,CAACC,gBAAgB,EAAE,OAAO,EAAC;QACpC,IAAI,IAAI,CAACA,gBAAgB,CAAChB,IAAG,KAAM,cAAc,EAAE;UACjD,MAAMiB,QAAO,GAAI,IAAI,CAACZ,YAAY,CAACa,IAAI,CAACC,CAAA,IAAKA,CAAC,CAACC,OAAM,KAAM,IAAI,CAACjB,eAAe;UAC/E,OAAO,IAAI,CAACkB,WAAW,CAACC,EAAC,KAAML,QAAO,GAAIA,QAAQ,CAACM,QAAO,GAAI,EAAE;QAClE,OAAO;UACL,OAAO,IAAI,CAACF,WAAW,CAACG,WAAU;QACpC;MACF,CAAC;MACDC,GAAGA,CAACC,KAAK,EAAE;QACT,IAAI,CAAC,IAAI,CAACV,gBAAgB,EAAE;QAC5B,IAAI,IAAI,CAACA,gBAAgB,CAAChB,IAAG,KAAM,cAAc,EAAE;UACjD,IAAI,CAACqB,WAAW,CAACC,EAAC,GAAII,KAAI;QAC5B,OAAO;UACL,IAAI,CAACL,WAAW,CAACG,WAAU,GAAIE,KAAI;QACrC;MACF;IACF;EACF,CAAC;EACDC,KAAK,EAAE;IACLnB,MAAMA,CAACoB,GAAG,EAAE;MACVC,YAAY,CAAC,IAAI,CAACC,gBAAgB,CAAC;MACnC,IAAI,CAACA,gBAAe,GAAIC,UAAU,CAAC,MAAM;QACvC,IAAI,CAACtB,eAAc,GAAImB,GAAG,CAACI,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QAC/C,IAAI,CAACvB,WAAU,GAAI,CAAC;MACtB,CAAC,EAAE,GAAG,CAAC;IACT;EACF,CAAC;EACDwB,OAAO,EAAE;IACPC,QAAQA,CAACC,IAAI,EAAE;MACb,IAAIA,IAAG,IAAK,KAAKA,IAAG,IAAK,IAAI,CAACC,UAAU,EAAE,IAAI,CAAC3B,WAAU,GAAI0B,IAAI;IACnE,CAAC;IACDE,cAAcA,CAACC,KAAK,EAAE;MACpB,MAAMC,GAAE,GAAIC,UAAU,CAACF,KAAK,CAAC;MAC7B,OAAOG,KAAK,CAACF,GAAG,IAAI,MAAK,GAAIA,GAAG,CAACG,OAAO,CAAC,CAAC,CAAC;IAC7C,CAAC;IACDC,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACpC,MAAK,GAAI,EAAE;MAChB,IAAI,CAACC,eAAc,GAAI,EAAE;IAC3B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}