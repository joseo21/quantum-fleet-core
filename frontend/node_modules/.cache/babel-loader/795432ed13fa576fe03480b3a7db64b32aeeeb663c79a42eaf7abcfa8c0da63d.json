{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-2\"\n};\nexport function render(_ctx, _cache) {\n  const _component_MantencionesTable = _resolveComponent(\"MantencionesTable\");\n  const _component_ModalAgregar = _resolveComponent(\"ModalAgregar\");\n  const _component_ModalVerMantenciones = _resolveComponent(\"ModalVerMantenciones\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_MantencionesTable, {\n    mantenciones: _ctx.mantenciones,\n    onVerMantenciones: _ctx.verMantenciones,\n    onAgregarMantencion: _ctx.abrirModal\n  }, null, 8 /* PROPS */, [\"mantenciones\", \"onVerMantenciones\", \"onAgregarMantencion\"]), _cache[1] || (_cache[1] = _createTextVNode()), _ctx.showAddModal ? (_openBlock(), _createBlock(_component_ModalAgregar, {\n    key: 0,\n    \"show-add-modal\": _ctx.showAddModal,\n    \"selected-patente\": _ctx.patenteSeleccionada,\n    mantenciones: _ctx.mantencionesPorPatente[_ctx.patenteSeleccionada] || [],\n    \"selected-mantencion\": _ctx.mantencionSeleccionada,\n    onClose: _ctx.cerrarModal,\n    onSave: _ctx.guardarMantencion\n  }, null, 8 /* PROPS */, [\"show-add-modal\", \"selected-patente\", \"mantenciones\", \"selected-mantencion\", \"onClose\", \"onSave\"])) : _createCommentVNode(\"v-if\", true), _cache[2] || (_cache[2] = _createTextVNode()), _ctx.showVerModal ? (_openBlock(), _createBlock(_component_ModalVerMantenciones, {\n    key: 1,\n    patente: _ctx.patenteSeleccionada,\n    mantenciones: _ctx.mantencionesPorPatente[_ctx.patenteSeleccionada] || [],\n    onClose: _cache[0] || (_cache[0] = $event => _ctx.showVerModal = false),\n    onEditar: _ctx.editarMantencion,\n    onEliminar: _ctx.eliminarMantencion\n  }, null, 8 /* PROPS */, [\"patente\", \"mantenciones\", \"onEditar\", \"onEliminar\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_MantencionesTable","mantenciones","_ctx","onVerMantenciones","verMantenciones","onAgregarMantencion","abrirModal","showAddModal","_createBlock","_component_ModalAgregar","patenteSeleccionada","mantencionesPorPatente","mantencionSeleccionada","onClose","cerrarModal","onSave","guardarMantencion","showVerModal","_component_ModalVerMantenciones","patente","_cache","$event","onEditar","editarMantencion","onEliminar","eliminarMantencion"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/Views/MantencionesView.vue"],"sourcesContent":["<template> <div class=\"p-2\"> <MantencionesTable :mantenciones=\"mantenciones\" @ver-mantenciones=\"verMantenciones\" @agregar-mantencion=\"abrirModal\" /> <ModalAgregar v-if=\"showAddModal\" :show-add-modal=\"showAddModal\" :selected-patente=\"patenteSeleccionada\" :mantenciones=\"mantencionesPorPatente[patenteSeleccionada] || []\" :selected-mantencion=\"mantencionSeleccionada\" @close=\"cerrarModal\" @save=\"guardarMantencion\" /> <ModalVerMantenciones v-if=\"showVerModal\" :patente=\"patenteSeleccionada\" :mantenciones=\"mantencionesPorPatente[patenteSeleccionada] || []\" @close=\"showVerModal = false\" @editar=\"editarMantencion\" @eliminar=\"eliminarMantencion\" /> </div> </template> <script setup> import { ref } from 'vue' import MantencionesTable from '@/components/MantencionesUi/MantencionesTable.vue' import ModalAgregar from '@/components/MantencionesUi/ModalAgregar.vue' import ModalVerMantenciones from '@/components/MantencionesUi/ModalVerMantenciones.vue' const patenteSeleccionada = ref('') const selectedVehiculo = ref(null) const mantencionSeleccionada = ref(null) // Para editar const showAddModal = ref(false) const showVerModal = ref(false) // Mantenciones por patente const mantencionesPorPatente = ref({}) // Lista inicial de vehículos const mantenciones = ref([ { patente: 'ABC123', odometro: 4500, estado: 'OK' }, { patente: 'XYZ789', odometro: 72000, estado: 'Requiere mantención' }, { patente: 'DEF456', odometro: 60000, estado: 'Próxima mantención' }, ]) function abrirModal(item) { selectedVehiculo.value = item patenteSeleccionada.value = item.patente mantencionSeleccionada.value = null // Nuevo registro showAddModal.value = true } function cerrarModal() { showAddModal.value = false selectedVehiculo.value = null mantencionSeleccionada.value = null } function verMantenciones(item) { patenteSeleccionada.value = item.patente showVerModal.value = true } function guardarMantencion(maintenance) { console.log('--- guardarMantencion en padre ---'); console.log('maintenance recibido:', maintenance); const patente = patenteSeleccionada.value; if (!mantencionesPorPatente.value[patente]) { mantencionesPorPatente.value[patente] = []; } if (mantencionSeleccionada.value !== null) { // Editar existente console.log('Editando mantencion en índice:', mantencionSeleccionada.value); mantencionesPorPatente.value[patente][mantencionSeleccionada.value] = maintenance; } else { // Agregar nuevo console.log('Agregando nueva mantencion'); mantencionesPorPatente.value[patente].push(maintenance); } console.log('Mantenciones actuales por patente:', mantencionesPorPatente.value[patente]); cerrarModal(); } // Editar desde ModalVerMantenciones function editarMantencion(idx) { const patente = patenteSeleccionada.value mantencionSeleccionada.value = idx selectedVehiculo.value = { patente } showAddModal.value = true } // Eliminar desde ModalVerMantenciones function eliminarMantencion(idx) { const patente = patenteSeleccionada.value mantencionesPorPatente.value[patente].splice(idx, 1) } </script>"],"mappings":";;EAAgBA,KAAK,EAAC;AAAK;;;;;uBAAhBC,mBAAA,CAAioB,OAAjoBC,UAAioB,GAA/mBC,YAAA,CAAuHC,4BAAA;IAAnGC,YAAY,EAAEC,IAAA,CAAAD,YAAY;IAAGE,iBAAgB,EAAED,IAAA,CAAAE,eAAe;IAAGC,mBAAkB,EAAEH,IAAA,CAAAI;wIAAmCJ,IAAA,CAAAK,YAAY,I,cAAhCC,YAAA,CAA0QC,uBAAA;;IAAvO,gBAAc,EAAEP,IAAA,CAAAK,YAAY;IAAG,kBAAgB,EAAEL,IAAA,CAAAQ,mBAAmB;IAAGT,YAAY,EAAEC,IAAA,CAAAS,sBAAsB,CAACT,IAAA,CAAAQ,mBAAmB;IAAU,qBAAmB,EAAER,IAAA,CAAAU,sBAAsB;IAAGC,OAAK,EAAEX,IAAA,CAAAY,WAAW;IAAGC,MAAI,EAAEb,IAAA,CAAAc;mNAAkDd,IAAA,CAAAe,YAAY,I,cAAxCT,YAAA,CAAqOU,+BAAA;;IAA1LC,OAAO,EAAEjB,IAAA,CAAAQ,mBAAmB;IAAGT,YAAY,EAAEC,IAAA,CAAAS,sBAAsB,CAACT,IAAA,CAAAQ,mBAAmB;IAAUG,OAAK,EAAAO,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEnB,IAAA,CAAAe,YAAY;IAAWK,QAAM,EAAEpB,IAAA,CAAAqB,gBAAgB;IAAGC,UAAQ,EAAEtB,IAAA,CAAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}