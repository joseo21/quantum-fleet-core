{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed } from \"vue\";\nimport SvgIcon from \"@/components/icons/SvgIcon.vue\";\n\n// üîß Estado general\n\nexport default {\n  __name: 'EmpresasView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const searchTerm = ref(\"\");\n    const customers = ref([{\n      id: 1,\n      name: \"Quantum Fleet\",\n      rut: \"76.543.210-9\",\n      contact: \"Juan P√©rez\",\n      city: \"Santiago\",\n      createdAt: \"2025-01-12\"\n    }, {\n      id: 2,\n      name: \"Andes Motors\",\n      rut: \"77.111.222-3\",\n      contact: \"Ana L√≥pez\",\n      city: \"Valpara√≠so\",\n      createdAt: \"2025-02-05\"\n    }]);\n    const selectedIds = ref([]);\n    const selectAll = ref(false);\n    const showAddModal = ref(false);\n    const showEditSidebar = ref(false);\n    const editingCompany = ref({});\n    const copiedId = ref(null);\n\n    // üìÑ Paginaci√≥n\n    const currentPage = ref(1);\n    const rowsPerPage = ref(10);\n    const rowsPerPageOptions = [10, 25, 50];\n    const totalPages = computed(() => Math.max(1, Math.ceil(filteredCustomers.value.length / rowsPerPage.value)));\n    const filteredCustomers = computed(() => customers.value.filter(c => c.name.toLowerCase().includes(searchTerm.value.toLowerCase())));\n    const paginatedCustomers = computed(() => {\n      const start = (currentPage.value - 1) * rowsPerPage.value;\n      return filteredCustomers.value.slice(start, start + rowsPerPage.value);\n    });\n\n    // ‚öôÔ∏è M√©todos\n    function toggleSelectAll() {\n      selectedIds.value = selectAll.value ? customers.value.map(c => c.id) : [];\n    }\n    function deleteSelected() {\n      customers.value = customers.value.filter(c => !selectedIds.value.includes(c.id));\n      selectedIds.value = [];\n      selectAll.value = false;\n    }\n    function previousPage() {\n      if (currentPage.value > 1) currentPage.value--;\n    }\n    function nextPage() {\n      if (currentPage.value < totalPages.value) currentPage.value++;\n    }\n    function editCustomer(c) {\n      editingCompany.value = {\n        ...c\n      };\n      showEditSidebar.value = true;\n    }\n    function copyCustomerData(c) {\n      navigator.clipboard.writeText(JSON.stringify(c, null, 2));\n      copiedId.value = c.id;\n      setTimeout(() => copiedId.value = null, 2000);\n    }\n    function updateCompany() {\n      const idx = customers.value.findIndex(c => c.id === editingCompany.value.id);\n      if (idx !== -1) customers.value[idx] = {\n        ...editingCompany.value\n      };\n      showEditSidebar.value = false;\n    }\n    const __returned__ = {\n      searchTerm,\n      customers,\n      selectedIds,\n      selectAll,\n      showAddModal,\n      showEditSidebar,\n      editingCompany,\n      copiedId,\n      currentPage,\n      rowsPerPage,\n      rowsPerPageOptions,\n      totalPages,\n      filteredCustomers,\n      paginatedCustomers,\n      toggleSelectAll,\n      deleteSelected,\n      previousPage,\n      nextPage,\n      editCustomer,\n      copyCustomerData,\n      updateCompany,\n      ref,\n      computed,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","SvgIcon","searchTerm","customers","id","name","rut","contact","city","createdAt","selectedIds","selectAll","showAddModal","showEditSidebar","editingCompany","copiedId","currentPage","rowsPerPage","rowsPerPageOptions","totalPages","Math","max","ceil","filteredCustomers","value","length","filter","c","toLowerCase","includes","paginatedCustomers","start","slice","toggleSelectAll","map","deleteSelected","previousPage","nextPage","editCustomer","copyCustomerData","navigator","clipboard","writeText","JSON","stringify","setTimeout","updateCompany","idx","findIndex"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/Views/EmpresasView.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col p-4 bg-white text-gray-900\">\n    <!-- üîç Navbar -->\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-gray-300 pb-2\">\n      <div class=\"w-full sm:flex-1\">\n        <input\n          v-model=\"searchTerm\"\n          type=\"text\"\n          placeholder=\"Buscar empresa...\"\n          class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ff6600]\"\n        />\n      </div>\n\n      <div class=\"flex w-full sm:w-auto gap-2 mt-2 sm:mt-0\">\n        <!-- Agregar -->\n        <button\n          @click.prevent=\"showAddModal = true\"\n          class=\"relative inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 font-medium text-white rounded-lg bg-[#ff6600] hover:bg-[#e65500] transition\"\n        >\n          ‚ûï Agregar Empresa\n        </button>\n\n        <!-- Eliminar seleccionados -->\n        <transition name=\"fade-scale\">\n          <button\n            v-if=\"selectedIds.length > 0\"\n            @click=\"deleteSelected\"\n            class=\"bg-red-600 hover:bg-red-700 text-white p-2 rounded flex items-center justify-center\"\n            title=\"Eliminar seleccionados\"\n          >\n            <SvgIcon name=\"trash\" class=\"w-5 h-5\" />\n          </button>\n        </transition>\n      </div>\n    </div>\n\n    <!-- üìã Tabla -->\n    <div class=\"flex flex-col h-full mt-4\">\n      <div class=\"flex-1 overflow-y-auto max-h-[500px] border rounded-lg shadow-sm\">\n        <table class=\"min-w-full bg-white text-gray-800\">\n          <thead class=\"bg-[#102372] text-white\">\n            <tr>\n              <th class=\"py-3 px-4 w-1/12 text-left\">\n                <input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" />\n              </th>\n              <th class=\"py-3 px-4 text-left\">Fecha de Creaci√≥n</th>\n              <th class=\"py-3 px-4 text-left\">Nombre</th>\n              <th class=\"py-3 px-4 text-left\">Rut</th>\n              <th class=\"py-3 px-4 text-left\">Contacto</th>\n              <th class=\"py-3 px-4 text-left\">Ciudad</th>\n              <th class=\"py-3 px-4 text-left\">Acciones</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr\n              v-for=\"customer in paginatedCustomers\"\n              :key=\"customer.id\"\n              class=\"border-t border-gray-200 hover:bg-gray-100 transition\"\n            >\n              <td class=\"py-2 px-4\">\n                <input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" />\n              </td>\n              <td class=\"py-2 px-4\">{{ customer.createdAt }}</td>\n              <td class=\"py-2 px-4\">{{ customer.name }}</td>\n              <td class=\"py-2 px-4\">{{ customer.rut }}</td>\n              <td class=\"py-2 px-4\">{{ customer.contact }}</td>\n              <td class=\"py-2 px-4\">{{ customer.city }}</td>\n              <td class=\"py-2 px-4 flex gap-2\">\n                <button\n                  @click=\"editCustomer(customer)\"\n                  title=\"Editar\"\n                  class=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md flex items-center gap-1\"\n                >\n                  <SvgIcon name=\"pencil\" class=\"w-4 h-4\" />\n                </button>\n\n                <button\n                  @click=\"copyCustomerData(customer)\"\n                  title=\"Copiar\"\n                  class=\"px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded relative flex items-center\"\n                >\n                  <SvgIcon name=\"copy\" class=\"w-5 h-5\" />\n                  <span\n                    v-if=\"copiedId === customer.id\"\n                    class=\"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-700 text-white text-xs px-2 py-1 rounded\"\n                  >\n                    Copiado!\n                  </span>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- üìë Paginaci√≥n -->\n      <div\n        class=\"bg-gray-50 text-gray-700 p-3 rounded-b-lg shadow-sm flex flex-col sm:flex-row sm:justify-between items-center gap-4 mt-2\"\n      >\n        <div class=\"flex items-center gap-2\">\n          <span>Filas por p√°gina:</span>\n          <select\n            v-model=\"rowsPerPage\"\n            class=\"border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-[#ff6600]\"\n          >\n            <option v-for=\"option in rowsPerPageOptions\" :key=\"option\" :value=\"option\">{{ option }}</option>\n          </select>\n        </div>\n\n        <ul class=\"flex justify-center gap-1\">\n          <li>\n            <button\n              @click=\"previousPage\"\n              :disabled=\"currentPage === 1\"\n              class=\"grid w-8 h-8 place-content-center rounded border border-gray-300 hover:bg-[#ff6600] hover:text-white disabled:opacity-50 transition\"\n            >\n              <SvgIcon name=\"chevron-left\" class=\"w-4 h-4\" />\n            </button>\n          </li>\n\n          <li v-for=\"page in totalPages\" :key=\"page\">\n            <button\n              @click=\"currentPage = page\"\n              :class=\"[\n                'w-8 h-8 text-sm font-medium rounded border flex items-center justify-center transition',\n                page === currentPage\n                  ? 'bg-[#102372] border-[#102372] text-white'\n                  : 'border-gray-300 hover:bg-gray-200'\n              ]\"\n            >\n              {{ page }}\n            </button>\n          </li>\n\n          <li>\n            <button\n              @click=\"nextPage\"\n              :disabled=\"currentPage === totalPages\"\n              class=\"grid w-8 h-8 place-content-center rounded border border-gray-300 hover:bg-[#ff6600] hover:text-white disabled:opacity-50 transition\"\n            >\n              <SvgIcon name=\"chevron-right\" class=\"w-4 h-4\" />\n            </button>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <!-- ‚úèÔ∏è Sidebar edici√≥n -->\n    <transition name=\"slide-fade\">\n      <div v-if=\"showEditSidebar\" class=\"fixed inset-0 z-50 flex justify-end\">\n        <div @click=\"showEditSidebar = false\" class=\"absolute inset-0 bg-black bg-opacity-50\"></div>\n\n        <div class=\"relative w-full max-w-md bg-white text-gray-900 shadow-xl flex flex-col h-full rounded-l-lg\">\n          <div class=\"flex-1 overflow-y-auto p-6\">\n            <button\n              @click=\"showEditSidebar = false\"\n              class=\"self-end p-2 rounded hover:bg-gray-100 transition mb-2\"\n            >\n              <SvgIcon name=\"close\" class=\"w-6 h-6\" />\n            </button>\n\n            <h2 class=\"text-2xl font-bold mb-4 text-[#102372]\">Editar Empresa</h2>\n\n            <form @submit.prevent=\"updateCompany\" class=\"flex flex-col gap-3\">\n              <input\n                v-model=\"editingCompany.name\"\n                type=\"text\"\n                placeholder=\"Nombre de la empresa\"\n                class=\"px-3 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ff6600]\"\n                required\n              />\n              <input\n                v-model=\"editingCompany.rut\"\n                type=\"text\"\n                placeholder=\"RUT de la empresa\"\n                class=\"px-3 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ff6600]\"\n                required\n              />\n              <input\n                v-model=\"editingCompany.contact\"\n                type=\"text\"\n                placeholder=\"Contacto\"\n                class=\"px-3 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ff6600]\"\n                required\n              />\n              <input\n                v-model=\"editingCompany.city\"\n                type=\"text\"\n                placeholder=\"Ciudad\"\n                class=\"px-3 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#ff6600]\"\n                required\n              />\n            </form>\n          </div>\n\n          <div class=\"p-4 border-t border-gray-200 bg-gray-50 flex justify-center gap-2\">\n            <button @click=\"updateCompany\" class=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded\">\n              Guardar Cambios\n            </button>\n            <button @click=\"showEditSidebar = false\" class=\"bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded\">\n              Cancelar\n            </button>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport SvgIcon from \"@/components/icons/SvgIcon.vue\";\n\n// üîß Estado general\nconst searchTerm = ref(\"\");\nconst customers = ref([\n  { id: 1, name: \"Quantum Fleet\", rut: \"76.543.210-9\", contact: \"Juan P√©rez\", city: \"Santiago\", createdAt: \"2025-01-12\" },\n  { id: 2, name: \"Andes Motors\", rut: \"77.111.222-3\", contact: \"Ana L√≥pez\", city: \"Valpara√≠so\", createdAt: \"2025-02-05\" },\n]);\nconst selectedIds = ref([]);\nconst selectAll = ref(false);\nconst showAddModal = ref(false);\nconst showEditSidebar = ref(false);\nconst editingCompany = ref({});\nconst copiedId = ref(null);\n\n// üìÑ Paginaci√≥n\nconst currentPage = ref(1);\nconst rowsPerPage = ref(10);\nconst rowsPerPageOptions = [10, 25, 50];\nconst totalPages = computed(() => Math.max(1, Math.ceil(filteredCustomers.value.length / rowsPerPage.value)));\n\nconst filteredCustomers = computed(() =>\n  customers.value.filter(c => c.name.toLowerCase().includes(searchTerm.value.toLowerCase()))\n);\nconst paginatedCustomers = computed(() => {\n  const start = (currentPage.value - 1) * rowsPerPage.value;\n  return filteredCustomers.value.slice(start, start + rowsPerPage.value);\n});\n\n// ‚öôÔ∏è M√©todos\nfunction toggleSelectAll() {\n  selectedIds.value = selectAll.value ? customers.value.map(c => c.id) : [];\n}\nfunction deleteSelected() {\n  customers.value = customers.value.filter(c => !selectedIds.value.includes(c.id));\n  selectedIds.value = [];\n  selectAll.value = false;\n}\nfunction previousPage() {\n  if (currentPage.value > 1) currentPage.value--;\n}\nfunction nextPage() {\n  if (currentPage.value < totalPages.value) currentPage.value++;\n}\nfunction editCustomer(c) {\n  editingCompany.value = { ...c };\n  showEditSidebar.value = true;\n}\nfunction copyCustomerData(c) {\n  navigator.clipboard.writeText(JSON.stringify(c, null, 2));\n  copiedId.value = c.id;\n  setTimeout(() => (copiedId.value = null), 2000);\n}\nfunction updateCompany() {\n  const idx = customers.value.findIndex(c => c.id === editingCompany.value.id);\n  if (idx !== -1) customers.value[idx] = { ...editingCompany.value };\n  showEditSidebar.value = false;\n}\n</script>\n\n<style scoped>\n.fade-scale-enter-active,\n.fade-scale-leave-active {\n  transition: all 0.2s ease;\n}\n.fade-scale-enter-from,\n.fade-scale-leave-to {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n.slide-fade-enter-active,\n.slide-fade-leave-active {\n  transition: all 0.3s ease;\n}\n.slide-fade-enter-from,\n.slide-fade-leave-to {\n  transform: translateX(100%);\n  opacity: 0;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}