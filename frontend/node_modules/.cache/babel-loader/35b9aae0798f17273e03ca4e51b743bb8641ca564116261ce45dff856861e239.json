{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"bg-[#1f2937] border-b border-gray-700 flex justify-between items-center px-3 py-2\"\n};\nconst _hoisted_2 = {\n  class: \"flex items-center gap-2\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center gap-2 text-white\"\n};\nconst _hoisted_4 = {\n  class: \"relative w-10 h-10\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"relative\"\n};\nconst _hoisted_7 = {\n  class: \"flex items-center gap-1\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"absolute right-0 mt-1 w-40 bg-[#1f2937] text-white rounded-lg shadow-lg z-50\"\n};\nconst _hoisted_9 = {\n  class: \"list-none p-2\"\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"header\", _hoisted_1, [_createCommentVNode(\" Logo \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    class: \"md:hidden text-white text-2xl px-6\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('toggle-sidebar'))\n  }, \"☰\"), _cache[5] || (_cache[5] = _createElementVNode(\"img\", {\n    alt: \"Logo\",\n    src: \"https://www.gpsenchile.com/wp-content/uploads/2023/06/logowebblanco.png\",\n    class: \"w-36 h-15\"\n  }, null, -1 /* CACHED */))]), _createCommentVNode(\" Perfil \"), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Imagen editable \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: _ctx.profileImage,\n    alt: \"Perfil\",\n    class: \"w-full h-full rounded-full object-cover\"\n  }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.selectFile && _ctx.selectFile(...args)),\n    class: \"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity\",\n    title: \"Editar foto\"\n  }, \" ✎ \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    ref: \"fileInput\",\n    accept: \"image/*\",\n    class: \"hidden\",\n    onChange: _cache[2] || (_cache[2] = (...args) => _ctx.previewImage && _ctx.previewImage(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), _createCommentVNode(\" Texto + flecha \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.showDropdown = !_ctx.showDropdown),\n    class: \"flex flex-col items-start px-2 py-1 rounded hover:bg-[#2a3748] transition-colors\"\n  }, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"strong\", null, _toDisplayString(_ctx.userName), 1 /* TEXT */), _createElementVNode(\"span\", {\n    class: _normalizeClass([\"transition-transform duration-200 text-[10px]\", {\n      'rotate-180': _ctx.showDropdown\n    }])\n  }, \"▼\", 2 /* CLASS */)]), _createElementVNode(\"span\", null, _toDisplayString(_ctx.userRole), 1 /* TEXT */)]), _createCommentVNode(\" Dropdown \"), _ctx.showDropdown ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"ul\", _hoisted_9, [_cache[7] || (_cache[7] = _createElementVNode(\"li\", null, [_createElementVNode(\"hr\", {\n    class: \"border-t my-1 border-gray-600\"\n  })], -1 /* CACHED */)), _createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    onClick: _cache[4] || (_cache[4] = _withModifiers((...args) => _ctx.logout && _ctx.logout(...args), [\"prevent\"])),\n    class: \"w-full group relative inline-flex items-center overflow-hidden gap-x-3.5 py-2 px-2.5 rounded-lg text-sm hover:bg-[#ff6600] cursor-pointer\"\n  }, [...(_cache[6] || (_cache[6] = [_createElementVNode(\"span\", {\n    class: \"absolute -start-full transition-all group-hover:start-2\"\n  }, [_createElementVNode(\"svg\", {\n    class: \"w-4 h-4\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    \"stroke-linecap\": \"round\",\n    \"stroke-linejoin\": \"round\",\n    \"stroke-width\": \"2\",\n    d: \"M17 8l4 4m0 0l-4 4m4-4H3\"\n  })])], -1 /* CACHED */), _createElementVNode(\"span\", {\n    class: \"transition-all group-hover:ms-4\"\n  }, \"Cerrar sesión\", -1 /* CACHED */)]))])])])])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","onClick","_cache","$event","_ctx","$emit","alt","src","_hoisted_3","_hoisted_4","profileImage","args","selectFile","title","type","ref","accept","onChange","previewImage","_hoisted_6","showDropdown","_hoisted_7","_toDisplayString","userName","_normalizeClass","userRole","_hoisted_8","_hoisted_9","_withModifiers","logout","xmlns","fill","viewBox","stroke","d"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/AppHeader.vue"],"sourcesContent":["<template>\n  <header class=\"bg-[#1f2937] border-b border-gray-700 flex justify-between items-center px-3 py-2\">\n    <!-- Logo -->\n    <div class=\"flex items-center gap-2\">\n      <button class=\"md:hidden text-white text-2xl px-6\" @click=\"$emit('toggle-sidebar')\">☰</button>\n      <img alt=\"Logo\" src=\"https://www.gpsenchile.com/wp-content/uploads/2023/06/logowebblanco.png\" class=\"w-36 h-15\" />\n    </div>\n\n    <!-- Perfil -->\n    <div class=\"flex items-center gap-2 text-white\">\n      <!-- Imagen editable -->\n      <div class=\"relative w-10 h-10\">\n        <img :src=\"profileImage\" alt=\"Perfil\" class=\"w-full h-full rounded-full object-cover\" />\n        <button @click=\"selectFile\"\n          class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity\"\n          title=\"Editar foto\">\n          ✎\n        </button>\n        <input type=\"file\" ref=\"fileInput\" accept=\"image/*\" class=\"hidden\" @change=\"previewImage\" />\n      </div>\n\n      <!-- Texto + flecha -->\n      <div class=\"relative\">\n        <button @click=\"showDropdown = !showDropdown\"\n          class=\"flex flex-col items-start px-2 py-1 rounded hover:bg-[#2a3748] transition-colors\">\n          <div class=\"flex items-center gap-1\">\n            <strong>{{ userName }}</strong>\n            <span class=\"transition-transform duration-200 text-[10px]\" :class=\"{ 'rotate-180': showDropdown }\">▼</span>\n          </div>\n          <span>{{ userRole }}</span>\n        </button>\n\n        <!-- Dropdown -->\n        <div v-if=\"showDropdown\" class=\"absolute right-0 mt-1 w-40 bg-[#1f2937] text-white rounded-lg shadow-lg z-50\">\n          <ul class=\"list-none p-2\">\n            <li>\n              <hr class=\"border-t my-1 border-gray-600\" />\n            </li>\n            <li>\n              <a @click.prevent=\"logout\"\n                class=\"w-full group relative inline-flex items-center overflow-hidden gap-x-3.5 py-2 px-2.5 rounded-lg text-sm hover:bg-[#ff6600] cursor-pointer\">\n                <span class=\"absolute -start-full transition-all group-hover:start-2\">\n                  <svg class=\"w-4 h-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                      d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\n                  </svg>\n                </span>\n                <span class=\"transition-all group-hover:ms-4\">Cerrar sesión</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n      </div>\n    </div>\n  </header>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst router = useRouter()\nconst user = ref({})\nconst profileImage = ref('')\n\n// Cargar datos del usuario desde localStorage al montar\nonMounted(() => {\n  const storedUser = localStorage.getItem('user')\n  user.value = storedUser ? JSON.parse(storedUser) : {}\n})\n\nconst userName = computed(() => user.value.name || 'Invitado')\nconst userRole = computed(() => user.value.role || 'Invitado')\nconst profileImage = ref(\n  JSON.parse(localStorage.getItem('user'))?.profileImage || user.value.profileImage || 'https://img.freepik.com/vector-premium/perfil-hombre_1083548-15963.jpg'\n)\n\nconst fileInput = ref(null)\nconst showDropdown = ref(false)\n\nconst selectFile = () => fileInput.value.click()\nconst previewImage = (event) => {\n  const file = event.target.files[0]\n  if (!file) return\n\n  const reader = new FileReader()\n  reader.onload = () => {\n    const updatedUser = { ...user.value, profileImage: reader.result }\n    user.value = updatedUser\n    profileImage.value = reader.result\n\n    // Guardar solo el campo de la imagen en localStorage dentro del usuario\n    localStorage.setItem('user', JSON.stringify(updatedUser))\n  }\n\n  // Para evitar imágenes demasiado grandes, podrías reducir tamaño aquí\n  reader.readAsDataURL(file)\n}\n\nconst logout = () => {\n  localStorage.removeItem('user')\n  user.value = {}\n  router.push('/')\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}