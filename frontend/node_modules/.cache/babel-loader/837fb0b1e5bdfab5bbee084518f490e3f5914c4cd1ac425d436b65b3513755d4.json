{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  name: 'ModalVerMantenciones',\n  components: {\n    SvgIcon\n  },\n  props: {\n    patente: String,\n    mantenciones: Array,\n    horometrosActuales: Object,\n    odometroActual: Number\n  },\n  data() {\n    return {\n      currentPage: 1,\n      totalItemsPerPage: 3,\n      screenWidth: window.innerWidth\n    };\n  },\n  mounted() {\n    this.updatePerPage();\n    window.addEventListener('resize', this.updatePerPage);\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.updatePerPage);\n  },\n  methods: {\n    updatePerPage() {\n      this.screenWidth = window.innerWidth;\n      if (this.screenWidth < 640) this.totalItemsPerPage = 1; // móvil\n      else if (this.screenWidth < 1024) this.totalItemsPerPage = 2; // tablet\n      else this.totalItemsPerPage = 3; // desktop\n    },\n    formatFecha(fechaStr) {\n      if (!fechaStr) return 'N/A';\n      const f = new Date(fechaStr);\n      if (isNaN(f.getTime())) return fechaStr;\n      return f.toLocaleString('es-CL', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      });\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--;\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++;\n    }\n  },\n  computed: {\n    mantencionesConEstado() {\n      return this.mantenciones.map(m => ({\n        ...m,\n        estado: m.estado || 'OK',\n        faltante: m.faltante ?? 0\n      }));\n    },\n    totalPages() {\n      return Math.ceil(this.mantencionesConEstado.length / this.totalItemsPerPage);\n    },\n    mantencionesPaginadas() {\n      const start = (this.currentPage - 1) * this.totalItemsPerPage;\n      const end = start + this.totalItemsPerPage;\n      return this.mantencionesConEstado.slice(start, end);\n    }\n  }\n};","map":{"version":3,"names":["SvgIcon","name","components","props","patente","String","mantenciones","Array","horometrosActuales","Object","odometroActual","Number","data","currentPage","totalItemsPerPage","screenWidth","window","innerWidth","mounted","updatePerPage","addEventListener","beforeUnmount","removeEventListener","methods","formatFecha","fechaStr","f","Date","isNaN","getTime","toLocaleString","year","month","day","prevPage","nextPage","totalPages","computed","mantencionesConEstado","map","m","estado","faltante","Math","ceil","length","mantencionesPaginadas","start","end","slice"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalVerMantenciones.vue"],"sourcesContent":["<template>\n  <div\n    class=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto\"\n  >\n    <div\n      class=\"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl relative w-full max-w-5xl h-auto p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-2xl transition-all duration-300 my-8 overflow-y-auto max-h-[90vh]\"\n    >\n      <h2\n        class=\"text-lg sm:text-2xl font-extrabold mb-5 text-center text-[#1A457D] dark:text-[#66B3FF] break-words\"\n      >\n        Mantenciones Vehículo\n        <span class=\"text-[#007BFF] dark:text-[#FDD835]\">{{ patente }}</span>\n      </h2>\n\n      <!-- Botón Cerrar -->\n      <button\n        @click=\"$emit('close')\"\n        class=\"absolute top-3 right-3 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200\"\n        title=\"Cerrar\"\n      >\n        <SvgIcon name=\"close\" class=\"w-5 h-5 sm:w-6 sm:h-6\" />\n      </button>\n\n      <!-- GRID RESPONSIVE -->\n      <div\n        class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 justify-items-stretch\"\n        :class=\"{ 'justify-items-center': mantencionesPaginadas.length === 1 && totalPages <= 1 }\"\n      >\n        <div\n          v-for=\"(m, idx) in mantencionesPaginadas\"\n          :key=\"m.id || idx\"\n          class=\"bg-white dark:bg-gray-900 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-4 flex flex-col gap-3 border border-gray-200 dark:border-gray-700 text-sm w-full sm:w-auto\"\n        >\n          <!-- Encabezado Card -->\n          <div\n            class=\"flex flex-wrap justify-between items-start pb-2 border-b border-gray-100 dark:border-gray-700\"\n          >\n            <span\n              class=\"font-bold text-base sm:text-lg text-[#1A457D] dark:text-[#66B3FF] truncate max-w-[70%]\"\n              >{{ m.nombre || m.name }}</span\n            >\n            <span\n              class=\"text-xs font-semibold px-3 py-1 rounded-full bg-[#007BFF] text-white dark:bg-[#FDD835] dark:text-gray-900 shadow-md whitespace-nowrap mt-2 sm:mt-0\"\n              >{{ m.tipo || m.type }}</span\n            >\n          </div>\n\n          <!-- Detalles -->\n          <div class=\"grid grid-cols-2 gap-x-4 gap-y-3 text-gray-700 dark:text-gray-300\">\n            <div class=\"flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Intervalo</span>\n              <div class=\"font-semibold text-base\">{{ m.intervalo }}</div>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Último</span>\n              <div class=\"font-semibold text-base\">{{ m.ultimo }}</div>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Umbral</span>\n              <div class=\"font-semibold text-base\">{{ m.umbral }}</div>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Actual</span>\n              <div class=\"font-semibold text-base\">{{ m.actual }}</div>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Faltante</span>\n              <div\n                class=\"font-semibold text-base\"\n                :class=\"{\n                  'text-red-500 dark:text-red-400': m.faltante <= 0,\n                  'text-yellow-600 dark:text-yellow-400': m.faltante > 0 && m.faltante <= m.alerta,\n                  'text-green-600 dark:text-green-400': m.faltante > m.alerta\n                }\"\n              >\n                {{ m.faltante }}\n              </div>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Alerta</span>\n              <div class=\"font-semibold text-base\">{{ m.alerta || 0 }}</div>\n            </div>\n\n            <div class=\"col-span-2 flex flex-col pt-3 border-t border-gray-100 dark:border-gray-700\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Email Contacto</span>\n              <div class=\"font-medium text-sm truncate\">{{ m.email || m.correo || 'N/A' }}</div>\n            </div>\n            <div class=\"col-span-2 flex flex-col\">\n              <span class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">Fecha Creación</span>\n              <div class=\"font-medium text-sm\">{{ formatFecha(m.fechaCreacion) }}</div>\n            </div>\n          </div>\n\n          <!-- Estado + Botones -->\n          <div\n            class=\"flex flex-wrap items-center justify-between mt-4 border-t pt-3 border-gray-100 dark:border-gray-700 gap-3\"\n          >\n            <div class=\"flex items-center gap-2\">\n              <img\n                v-if=\"m.estado === 'OK'\"\n                src=\"https://sinergygroup.cl/Mantenciones/img/verde.png\"\n                class=\"w-6 h-6 object-contain rounded-full\"\n              />\n              <img\n                v-else-if=\"m.estado === 'Próxima mantención'\"\n                src=\"https://sinergygroup.cl/Mantenciones/img/amarillo.png\"\n                class=\"w-6 h-6 object-contain rounded-full\"\n              />\n              <img\n                v-else\n                src=\"https://sinergygroup.cl/Mantenciones/img/rojo.png\"\n                class=\"w-6 h-6 object-contain rounded-full\"\n              />\n              <span\n                class=\"text-sm font-semibold\"\n                :class=\"{\n                  'text-green-600 dark:text-green-400': m.estado === 'OK',\n                  'text-yellow-600 dark:text-yellow-400': m.estado === 'Próxima mantención',\n                  'text-red-500 dark:text-red-400': m.estado === 'Requiere mantención'\n                }\"\n              >\n                {{ m.estado }}\n              </span>\n            </div>\n\n            <div class=\"flex gap-2 w-full sm:w-auto justify-center sm:justify-end\">\n              <button\n                @click=\"$emit('editar', totalItemsPerPage * (currentPage - 1) + idx)\"\n                class=\"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-colors duration-200 shadow-md\"\n              >\n                Editar\n              </button>\n              <button\n                @click=\"$emit('eliminar', totalItemsPerPage * (currentPage - 1) + idx)\"\n                class=\"bg-red-500 hover:bg-red-600 text-white font-semibold px-3 py-1.5 rounded-lg text-xs sm:text-sm transition-colors duration-200 shadow-md\"\n              >\n                Eliminar\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Sin datos -->\n        <div\n          v-if=\"!mantenciones || mantenciones.length === 0\"\n          class=\"col-span-full text-center py-10 text-lg font-medium text-gray-500 dark:text-gray-400\"\n        >\n          No hay mantenciones registradas para el vehículo {{ patente }}.\n        </div>\n      </div>\n\n      <!-- Paginación -->\n      <div v-if=\"totalPages > 1\" class=\"flex justify-center items-center mt-6 flex-wrap gap-3\">\n        <button\n          @click=\"prevPage\"\n          :disabled=\"currentPage === 1\"\n          class=\"p-2 text-sm font-medium rounded-lg flex items-center gap-1 transition-all\"\n          :class=\"{\n            'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed': currentPage === 1,\n            'bg-[#1A457D] hover:bg-[#007BFF] text-white': currentPage !== 1\n          }\"\n        >\n          <SvgIcon name=\"chevron-left\" class=\"w-4 h-4\" /> Anterior\n        </button>\n        <span class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n          Página <span class=\"font-bold\">{{ currentPage }}</span> de\n          <span class=\"font-bold\">{{ totalPages }}</span>\n        </span>\n        <button\n          @click=\"nextPage\"\n          :disabled=\"currentPage === totalPages\"\n          class=\"p-2 text-sm font-medium rounded-lg flex items-center gap-1 transition-all\"\n          :class=\"{\n            'bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 cursor-not-allowed': currentPage === totalPages,\n            'bg-[#1A457D] hover:bg-[#007BFF] text-white': currentPage !== totalPages\n          }\"\n        >\n          Siguiente <SvgIcon name=\"chevron-right\" class=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nexport default {\n  name: 'ModalVerMantenciones',\n  components: { SvgIcon },\n  props: {\n    patente: String,\n    mantenciones: Array,\n    horometrosActuales: Object,\n    odometroActual: Number\n  },\n  data() {\n    return {\n      currentPage: 1,\n      totalItemsPerPage: 3,\n      screenWidth: window.innerWidth\n    }\n  },\n  mounted() {\n    this.updatePerPage()\n    window.addEventListener('resize', this.updatePerPage)\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.updatePerPage)\n  },\n  methods: {\n    updatePerPage() {\n      this.screenWidth = window.innerWidth\n      if (this.screenWidth < 640) this.totalItemsPerPage = 1 // móvil\n      else if (this.screenWidth < 1024) this.totalItemsPerPage = 2 // tablet\n      else this.totalItemsPerPage = 3 // desktop\n    },\n    formatFecha(fechaStr) {\n      if (!fechaStr) return 'N/A'\n      const f = new Date(fechaStr)\n      if (isNaN(f.getTime())) return fechaStr\n      return f.toLocaleString('es-CL', { year: 'numeric', month: '2-digit', day: '2-digit' })\n    },\n    prevPage() {\n      if (this.currentPage > 1) this.currentPage--\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) this.currentPage++\n    }\n  },\n  computed: {\n    mantencionesConEstado() {\n      return this.mantenciones.map((m) => ({\n        ...m,\n        estado: m.estado || 'OK',\n        faltante: m.faltante ?? 0\n      }))\n    },\n    totalPages() {\n      return Math.ceil(this.mantencionesConEstado.length / this.totalItemsPerPage)\n    },\n    mantencionesPaginadas() {\n      const start = (this.currentPage - 1) * this.totalItemsPerPage\n      const end = start + this.totalItemsPerPage\n      return this.mantencionesConEstado.slice(start, end)\n    }\n  }\n}\n</script>\n"],"mappings":";;AAyLA,OAAOA,OAAM,MAAO,gCAA+B;AAEnD,eAAe;EACbC,IAAI,EAAE,sBAAsB;EAC5BC,UAAU,EAAE;IAAEF;EAAQ,CAAC;EACvBG,KAAK,EAAE;IACLC,OAAO,EAAEC,MAAM;IACfC,YAAY,EAAEC,KAAK;IACnBC,kBAAkB,EAAEC,MAAM;IAC1BC,cAAc,EAAEC;EAClB,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,iBAAiB,EAAE,CAAC;MACpBC,WAAW,EAAEC,MAAM,CAACC;IACtB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC;IACnBH,MAAM,CAACI,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACD,aAAa;EACtD,CAAC;EACDE,aAAaA,CAAA,EAAG;IACdL,MAAM,CAACM,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAACH,aAAa;EACzD,CAAC;EACDI,OAAO,EAAE;IACPJ,aAAaA,CAAA,EAAG;MACd,IAAI,CAACJ,WAAU,GAAIC,MAAM,CAACC,UAAS;MACnC,IAAI,IAAI,CAACF,WAAU,GAAI,GAAG,EAAE,IAAI,CAACD,iBAAgB,GAAI,GAAE;MAAA,KAClD,IAAI,IAAI,CAACC,WAAU,GAAI,IAAI,EAAE,IAAI,CAACD,iBAAgB,GAAI,GAAE;MAAA,KACxD,IAAI,CAACA,iBAAgB,GAAI,GAAE;IAClC,CAAC;IACDU,WAAWA,CAACC,QAAQ,EAAE;MACpB,IAAI,CAACA,QAAQ,EAAE,OAAO,KAAI;MAC1B,MAAMC,CAAA,GAAI,IAAIC,IAAI,CAACF,QAAQ;MAC3B,IAAIG,KAAK,CAACF,CAAC,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,OAAOJ,QAAO;MACtC,OAAOC,CAAC,CAACI,cAAc,CAAC,OAAO,EAAE;QAAEC,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAE,SAAS;QAAEC,GAAG,EAAE;MAAU,CAAC;IACxF,CAAC;IACDC,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACrB,WAAU,GAAI,CAAC,EAAE,IAAI,CAACA,WAAW,EAAC;IAC7C,CAAC;IACDsB,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACtB,WAAU,GAAI,IAAI,CAACuB,UAAU,EAAE,IAAI,CAACvB,WAAW,EAAC;IAC3D;EACF,CAAC;EACDwB,QAAQ,EAAE;IACRC,qBAAqBA,CAAA,EAAG;MACtB,OAAO,IAAI,CAAChC,YAAY,CAACiC,GAAG,CAAEC,CAAC,KAAM;QACnC,GAAGA,CAAC;QACJC,MAAM,EAAED,CAAC,CAACC,MAAK,IAAK,IAAI;QACxBC,QAAQ,EAAEF,CAAC,CAACE,QAAO,IAAK;MAC1B,CAAC,CAAC;IACJ,CAAC;IACDN,UAAUA,CAAA,EAAG;MACX,OAAOO,IAAI,CAACC,IAAI,CAAC,IAAI,CAACN,qBAAqB,CAACO,MAAK,GAAI,IAAI,CAAC/B,iBAAiB;IAC7E,CAAC;IACDgC,qBAAqBA,CAAA,EAAG;MACtB,MAAMC,KAAI,GAAI,CAAC,IAAI,CAAClC,WAAU,GAAI,CAAC,IAAI,IAAI,CAACC,iBAAgB;MAC5D,MAAMkC,GAAE,GAAID,KAAI,GAAI,IAAI,CAACjC,iBAAgB;MACzC,OAAO,IAAI,CAACwB,qBAAqB,CAACW,KAAK,CAACF,KAAK,EAAEC,GAAG;IACpD;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}