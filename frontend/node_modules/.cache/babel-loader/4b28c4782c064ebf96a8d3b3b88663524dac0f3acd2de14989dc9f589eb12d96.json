{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\n\n// Constante para plantilla por defecto\nconst DEFAULT_TEMPLATE_ID = 1;\n\n// Datos iniciales\n\nexport default {\n  __name: 'EmpresasView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const customers = ref([{\n      id: 1,\n      createdAt: '2025-07-30',\n      name: 'Demo Combustible',\n      rut: '76.145.230-9',\n      contact: 'Marcelo Díaz',\n      city: 'Santiago'\n    }, {\n      id: 2,\n      createdAt: '2025-07-23',\n      name: 'Industrial Glover S.P.A.',\n      rut: '77.239.684-2',\n      contact: 'Patricia González',\n      city: 'Lautaro'\n    }, {\n      id: 3,\n      createdAt: '2025-05-29',\n      name: 'Cuenta Demo',\n      rut: '76.003.412-5',\n      contact: 'Claudia Muñoz',\n      city: 'Temuco'\n    }, {\n      id: 4,\n      createdAt: '2025-05-19',\n      name: 'Constructora Rucol Limitada',\n      rut: '76.918.527-1',\n      contact: 'Rodrigo Herrera',\n      city: 'Temuco'\n    }, {\n      id: 5,\n      createdAt: '2025-05-19',\n      name: 'Armory Sustentable',\n      rut: '77.562.981-3',\n      contact: 'Andrea Castillo',\n      city: 'Temuco'\n    }, {\n      id: 6,\n      createdAt: '2025-05-19',\n      name: 'Transportes Betancourt',\n      rut: '76.421.875-6',\n      contact: 'Carlos Fuentes',\n      city: 'Temuco'\n    }, {\n      id: 7,\n      createdAt: '2025-05-19',\n      name: 'Áridos Macoga SPA',\n      rut: '77.158.443-0',\n      contact: 'Natalia Vega',\n      city: 'Temuco'\n    }, {\n      id: 8,\n      createdAt: '2025-05-19',\n      name: 'Servicios Marítimos Plast Marine Limitada',\n      rut: '76.998.224-9',\n      contact: 'Ignacio Contreras',\n      city: 'Puerto Montt'\n    }, {\n      id: 9,\n      createdAt: '2025-05-19',\n      name: 'Constructora Stange Hermanos Ltda',\n      rut: '77.304.652-2',\n      contact: 'Francisca Rojas',\n      city: 'Temuco'\n    }, {\n      id: 10,\n      createdAt: '2025-05-16',\n      name: 'Safco',\n      rut: '76.842.913-8',\n      contact: 'Germán Paredes',\n      city: 'Temuco'\n    }]);\n    const searchTerm = ref('');\n    const selectedIds = ref([]);\n    const selectAll = ref(false);\n    const rowsPerPageOptions = [5, 10, 20, 50];\n    const rowsPerPage = ref(5);\n    const currentPage = ref(1);\n    const showAddModal = ref(false);\n    const step = ref(1);\n    const selectedTemplate = ref(null);\n    const showEditSidebar = ref(false);\n    const editingCompany = ref({\n      id: null,\n      name: '',\n      rut: '',\n      contact: '',\n      city: '',\n      templateId: DEFAULT_TEMPLATE_ID\n    });\n    const newCompany = ref({\n      name: '',\n      rut: '',\n      contact: '',\n      city: ''\n    });\n    const copiedId = ref(null);\n\n    // Plantillas\n    const templates = ref([{\n      id: 1,\n      name: 'Básico',\n      description: 'Acceso limitado a reportes y panel general.'\n    }, {\n      id: 2,\n      name: 'Profesional',\n      description: 'Incluye reportes y comentarios.'\n    }, {\n      id: 3,\n      name: 'Avanzado',\n      description: 'Incluye dashboards personalizados y reportes completos.'\n    }, {\n      id: 4,\n      name: 'Full',\n      description: 'Todas las funciones habilitadas.'\n    }]);\n\n    // Validación RUT chileno (formato xx.xxx.xxx-x)\n    const isValidRut = rut => /^(\\d{1,2}\\.\\d{3}\\.\\d{3}-[\\dkK])$/.test(rut);\n\n    // Computed: filtrado y paginación\n    const filteredCustomers = computed(() => {\n      if (!searchTerm.value) return customers.value;\n      const term = searchTerm.value.toLowerCase();\n      return customers.value.filter(c => c.name.toLowerCase().includes(term) || c.rut.toLowerCase().includes(term) || c.contact.toLowerCase().includes(term) || c.createdAt.toLowerCase().includes(term));\n    });\n\n    // Formateo automático RUT mientras se escribe\n    const formatRut = company => {\n      let rut = company.rut.replace(/[^0-9kK]/g, '');\n      if (rut.length > 9) rut = rut.slice(0, 9);\n      if (rut.length > 1) {\n        const body = rut.slice(0, -1);\n        const dv = rut.slice(-1);\n        const reversed = body.split('').reverse();\n        const withDots = [];\n        reversed.forEach((char, i) => {\n          if (i > 0 && i % 3 === 0) withDots.push('.');\n          withDots.push(char);\n        });\n        company.rut = withDots.reverse().join('') + '-' + dv;\n      } else {\n        company.rut = rut;\n      }\n    };\n\n    // Validación paso 1: todos los campos requeridos + RUT válido\n    const isStep1Valid = computed(() => {\n      const {\n        name,\n        rut,\n        contact,\n        city\n      } = newCompany.value;\n      return name.trim() && rut.trim() && contact.trim() && city.trim() && isValidRut(rut);\n    });\n\n    // Paginar clientes\n    const paginatedCustomers = computed(() => {\n      const start = (currentPage.value - 1) * rowsPerPage.value;\n      return filteredCustomers.value.slice(start, start + rowsPerPage.value);\n    });\n    const totalPages = computed(() => Math.ceil(filteredCustomers.value.length / rowsPerPage.value));\n\n    // Select all toggle\n    const toggleSelectAll = () => selectAll.value ? selectedIds.value = paginatedCustomers.value.map(c => c.id) : selectedIds.value = [];\n\n    // Paginación\n    const nextPage = () => {\n      if (currentPage.value < totalPages.value) currentPage.value++;\n    };\n    const previousPage = () => {\n      if (currentPage.value > 1) currentPage.value--;\n    };\n\n    // Modal multi-paso\n    const goToNextStep = () => {\n      if (isStep1Valid.value) step.value = 2;else alert('Completa todos los campos correctamente antes de continuar.');\n    };\n\n    // Cancelar modal\n    const cancel = () => {\n      showAddModal.value = false;\n      step.value = 1;\n      selectedTemplate.value = null;\n      newCompany.value = {\n        name: '',\n        rut: '',\n        contact: '',\n        city: ''\n      };\n    };\n\n    // Agregar empresa con ID único y validación RUT\n    const addCompany = () => {\n      if (!selectedTemplate.value) return;\n      if (!isValidRut(newCompany.value.rut)) {\n        alert('RUT inválido. Formato esperado: xx.xxx.xxx-x');\n        return;\n      }\n      const id = Date.now();\n      const createdAt = new Date().toISOString().slice(0, 10);\n      customers.value.push({\n        id,\n        createdAt,\n        ...newCompany.value,\n        templateId: selectedTemplate.value\n      });\n      cancel();\n    };\n\n    // Eliminar seleccionados\n    const deleteSelected = () => {\n      customers.value = customers.value.filter(c => !selectedIds.value.includes(c.id));\n      selectedIds.value = [];\n    };\n\n    // Copiar datos con tooltip reutilizable\n    const copyCustomerData = customer => {\n      const data = `Nombre: ${customer.name}\\nRUT: ${customer.rut}\\nContacto: ${customer.contact}`;\n      navigator.clipboard.writeText(data).then(() => {\n        copiedId.value = customer.id;\n        setTimeout(() => copiedId.value = null, 1000);\n      });\n    };\n\n    // Editar empresa\n    const editCustomer = customer => {\n      editingCompany.value = {\n        ...customer\n      };\n      if (!editingCompany.value.templateId) editingCompany.value.templateId = DEFAULT_TEMPLATE_ID;\n      showEditSidebar.value = true;\n    };\n\n    // Guardar cambios\n    const updateCompany = () => {\n      if (!isValidRut(editingCompany.value.rut)) {\n        alert('RUT inválido. Formato esperado: xx.xxx.xxx-x');\n        return;\n      }\n      const index = customers.value.findIndex(c => c.id === editingCompany.value.id);\n      if (index !== -1) customers.value[index] = {\n        ...editingCompany.value\n      };\n      showEditSidebar.value = false;\n    };\n\n    // Computed para texto dinámico de botones en modal\n    const modalButtonText = computed(() => step.value === 1 ? 'Siguiente' : 'Crear Empresa');\n    const isModalButtonDisabled = computed(() => step.value === 2 && !selectedTemplate.value);\n\n    // Reset selectAll al cambiar página\n    watch(paginatedCustomers, () => selectAll.value = false);\n    const __returned__ = {\n      DEFAULT_TEMPLATE_ID,\n      customers,\n      searchTerm,\n      selectedIds,\n      selectAll,\n      rowsPerPageOptions,\n      rowsPerPage,\n      currentPage,\n      showAddModal,\n      step,\n      selectedTemplate,\n      showEditSidebar,\n      editingCompany,\n      newCompany,\n      copiedId,\n      templates,\n      isValidRut,\n      filteredCustomers,\n      formatRut,\n      isStep1Valid,\n      paginatedCustomers,\n      totalPages,\n      toggleSelectAll,\n      nextPage,\n      previousPage,\n      goToNextStep,\n      cancel,\n      addCompany,\n      deleteSelected,\n      copyCustomerData,\n      editCustomer,\n      updateCompany,\n      modalButtonText,\n      isModalButtonDisabled,\n      ref,\n      computed,\n      watch,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","SvgIcon","DEFAULT_TEMPLATE_ID","customers","id","createdAt","name","rut","contact","city","searchTerm","selectedIds","selectAll","rowsPerPageOptions","rowsPerPage","currentPage","showAddModal","step","selectedTemplate","showEditSidebar","editingCompany","templateId","newCompany","copiedId","templates","description","isValidRut","test","filteredCustomers","value","term","toLowerCase","filter","c","includes","formatRut","company","replace","length","slice","body","dv","reversed","split","reverse","withDots","forEach","char","i","push","join","isStep1Valid","trim","paginatedCustomers","start","totalPages","Math","ceil","toggleSelectAll","map","nextPage","previousPage","goToNextStep","alert","cancel","addCompany","Date","now","toISOString","deleteSelected","copyCustomerData","customer","data","navigator","clipboard","writeText","then","setTimeout","editCustomer","updateCompany","index","findIndex","modalButtonText","isModalButtonDisabled"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/Views/EmpresasView.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col p-4\">\n    <!-- Navbar -->\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-gray-700 pb-2\">\n      <div class=\"w-full sm:flex-1\">\n        <input v-model=\"searchTerm\" type=\"text\" placeholder=\"Buscar empresa...\"\n          class=\"w-full px-3 py-1 text-gray-900 focus:outline-none focus:ring focus:ring-gray-500 rounded\" />\n      </div>\n\n      <div class=\"flex w-full sm:w-auto gap-2 mt-2 sm:mt-0\">\n        <button @click.prevent=\"showAddModal = true\"\n          class=\"relative inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 font-mono font-medium tracking-tighter text-white bg-gray-800 rounded-lg overflow-hidden group\">\n          <span\n            class=\"absolute w-0 h-0 bg-[#ff6600] rounded-full transition-all duration-500 ease-out group-hover:w-56 group-hover:h-56\"></span>\n          <span\n            class=\"absolute inset-0 w-full h-full opacity-30 bg-gradient-to-b from-transparent via-transparent to-gray-700 rounded-lg -mt-1\"></span>\n          <span class=\"relative\">➕ Agregar Empresa</span>\n        </button>\n\n        <!-- Botón eliminar seleccionados -->\n        <transition name=\"fade-scale\">\n          <button v-if=\"selectedIds.length > 0\" @click=\"deleteSelected\"\n            class=\"bg-red-600 hover:bg-red-700 text-white p-2 rounded flex items-center justify-center\"\n            title=\"Eliminar seleccionados\">\n            <SvgIcon name=\"trash\" class=\"w-5 h-5\" />\n          </button>\n        </transition>\n      </div>\n    </div>\n\n<!-- Tabla -->\n<div class=\"flex flex-col h-full mt-4\">\n  <div class=\"flex-1 overflow-y-auto max-h-[500px] border border-gray-700 rounded-lg shadow-md\">\n    <table class=\"min-w-full bg-gray-800 text-white\">\n      <thead class=\"bg-[#102372] text-gray-100\">\n        <tr>\n          <th class=\"py-3 px-4 w-1/12 text-center\">\n            <input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" />\n          </th>\n          <th class=\"py-3 px-4 text-left\">Fecha de Creación</th>\n          <th class=\"py-3 px-4 text-left\">Nombre</th>\n          <th class=\"py-3 px-4 text-left\">RUT</th>\n          <th class=\"py-3 px-4 text-left\">Contacto</th>\n          <th class=\"py-3 px-4 text-left\">Ciudad</th>\n          <th class=\"py-3 px-4 text-left\">Acciones</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"customer in paginatedCustomers\" :key=\"customer.id\"\n          class=\"border-t border-gray-700 bg-gray-900 hover:bg-gray-700 transition-colors\">\n          <td class=\"py-2 px-4 text-center\">\n            <input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" />\n          </td>\n          <td class=\"py-2 px-4\">{{ customer.createdAt }}</td>\n          <td class=\"py-2 px-4\">{{ customer.name }}</td>\n          <td class=\"py-2 px-4\">{{ customer.rut }}</td>\n          <td class=\"py-2 px-4\">{{ customer.contact }}</td>\n          <td class=\"py-2 px-4\">{{ customer.city }}</td>\n          <td class=\"py-2 px-4 flex gap-2 justify-center\">\n            <!-- Botones de acción -->\n            <button @click=\"editCustomer(customer)\" title=\"Editar\"\n              class=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md flex items-center gap-1\">\n              <SvgIcon name=\"pencil\" class=\"w-4 h-4\" />\n            </button>\n\n            <button @click=\"copyCustomerData(customer)\" title=\"Copiar\"\n              class=\"px-2 py-1 bg-gray-800 text-white rounded hover:bg-gray-700 relative flex items-center\">\n              <SvgIcon name=\"copy\" class=\"w-5 h-5\" />\n              <span v-if=\"copiedId === customer.id\"\n                class=\"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gray-700 text-white text-xs px-2 py-1 rounded\">\n                Copiado!\n              </span>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <!-- Paginación -->\n  <div\n    class=\"bg-gray-900 text-gray-300 p-4 rounded-b-lg shadow-inner flex flex-col sm:flex-row sm:justify-between items-center gap-4 border-t border-gray-700\">\n    <div class=\"flex items-center gap-2\">\n      <span>Filas por página:</span>\n      <select v-model=\"rowsPerPage\"\n        class=\"bg-gray-800 border border-gray-700 text-white rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-[#ff6600]\">\n        <option v-for=\"option in rowsPerPageOptions\" :key=\"option\" :value=\"option\">{{ option }}</option>\n      </select>\n    </div>\n\n    <ul class=\"flex justify-center gap-1 text-gray-300\">\n      <li>\n        <button @click=\"previousPage\" :disabled=\"currentPage === 1\"\n          class=\"grid w-8 h-8 place-content-center rounded border border-gray-700 transition-colors hover:bg-[#ff6600] hover:text-white disabled:opacity-50\"\n          aria-label=\"Previous page\">\n          <SvgIcon name=\"chevron-left\" class=\"w-4 h-4\" />\n        </button>\n      </li>\n\n      <li v-for=\"page in totalPages\" :key=\"page\">\n        <button @click=\"currentPage = page\" :class=\"[\n          'w-8 h-8 text-sm font-medium rounded border flex items-center justify-center transition',\n          page === currentPage\n            ? 'bg-[#ff6600] border-[#ff6600] text-white'\n            : 'border-gray-700 hover:bg-gray-700'\n        ]\">\n          {{ page }}\n        </button>\n      </li>\n\n      <li>\n        <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\"\n          class=\"grid w-8 h-8 place-content-center rounded border border-gray-700 transition-colors hover:bg-[#ff6600] hover:text-white disabled:opacity-50\"\n          aria-label=\"Next page\">\n          <SvgIcon name=\"chevron-right\" class=\"w-4 h-4\" />\n        </button>\n      </li>\n    </ul>\n  </div>\n</div>\n  </div>\n  <!-- Sidebar Edición -->\n  <transition name=\"slide-fade\">\n    <div v-if=\"showEditSidebar\" class=\"fixed inset-0 z-50 flex justify-end\">\n\n      <!-- Fondo semi-transparente -->\n      <div @click=\"showEditSidebar = false\" class=\"absolute inset-0 bg-black bg-opacity-50\"></div>\n\n      <!-- Sidebar -->\n      <div class=\"relative w-full max-w-md sm:w-96 bg-gray-800 text-white shadow-xl flex flex-col h-full\">\n\n        <!-- Contenido scrollable -->\n        <div class=\"flex-1 overflow-y-auto p-6\">\n          <!-- Botón cerrar -->\n          <button @click=\"showEditSidebar = false\" class=\"self-end p-2 rounded hover:bg-gray-700 transition mb-2\">\n            <SvgIcon name=\"close\" class=\"w-6 h-6\" />\n          </button>\n\n          <h2 class=\"text-2xl font-bold mb-4\">Editar Empresa</h2>\n\n          <form @submit.prevent=\"updateCompany\" class=\"flex flex-col gap-3\">\n            <input v-model=\"editingCompany.name\" type=\"text\" placeholder=\"Nombre de la empresa\"\n              class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n\n            <input v-model=\"editingCompany.rut\" type=\"text\" placeholder=\"RUT de la empresa\"\n              class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n\n            <input v-model=\"editingCompany.contact\" type=\"text\" placeholder=\"Contacto\"\n              class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n\n            <input v-model=\"editingCompany.city\" type=\"text\" placeholder=\"Ciudad de la empresa\"\n              class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n\n            <!-- Plantillas -->\n            <div class=\"mt-4\">\n              <label class=\"block mb-1\">Plantilla / Permisos:</label>\n              <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                <div v-for=\"template in templates\" :key=\"template.id\" @click=\"editingCompany.templateId = template.id\"\n                  :class=\"[\n                    'p-3 rounded-lg border cursor-pointer text-center transition',\n                    editingCompany.templateId === template.id\n                      ? 'border-blue-500 bg-blue-700'\n                      : 'border-gray-600 hover:bg-gray-700'\n                  ]\">\n                  <h3 class=\"font-semibold\">{{ template.name }}</h3>\n                  <p class=\"text-gray-300 text-sm\">{{ template.description }}</p>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n\n        <!-- Botones siempre visibles -->\n        <div class=\"p-6 border-t border-gray-700 bg-gray-800 flex justify-center gap-2\">\n\n          <button @click=\"updateCompany\" class=\"bg-green-600 hover:bg-green-700 px-4 py-2 rounded\">\n            Guardar Cambios\n          </button>\n          <button @click=\"showEditSidebar = false\" class=\"bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded\">\n            Cancelar\n          </button>\n        </div>\n\n      </div>\n    </div>\n  </transition>\n\n\n\n\n  <!-- Modal multi-paso -->\n  <div v-if=\"showAddModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n    <div class=\"bg-gray-800 text-white rounded-lg relative flex flex-col w-full max-w-lg h-auto p-6\">\n\n      <!-- Botón volver paso 2 -> 1 -->\n      <button v-if=\"step === 2\" @click=\"step = 1\" class=\"absolute top-4 left-4 p-2 rounded hover:bg-gray-700 transition\"\n        title=\"Volver\">\n        <SvgIcon name=\"arrow-left\" class=\"w-6 h-6\" />\n      </button>\n\n      <h2 class=\"text-2xl font-bold mb-4 text-center\">\n        {{ step === 1 ? 'Agregar Empresa' : 'Seleccionar Template' }}\n      </h2>\n\n      <span class=\"h-px bg-gray-600 mb-4\"></span>\n\n      <!-- Paso 1 -->\n      <form v-if=\"step === 1\" @submit.prevent=\"goToNextStep\" class=\"flex-1 flex flex-col gap-3 py-2 overflow-y-auto\">\n        <input v-model=\"newCompany.name\" type=\"text\" placeholder=\"Nombre de la empresa\"\n          class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n\n        <input v-model=\"newCompany.rut\" type=\"text\" placeholder=\"RUT de la empresa\"\n          class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required\n          @input=\"formatRut(newCompany)\" />\n\n        <input v-model=\"newCompany.contact\" type=\"text\" placeholder=\"Contacto\"\n          class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n\n        <input v-model=\"newCompany.city\" type=\"text\" placeholder=\"Ciudad de la empresa\"\n          class=\"px-3 py-2 rounded bg-gray-700 text-white focus:outline-none w-full\" required />\n      </form>\n\n      <!-- Paso 2 -->\n      <div v-else class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4\">\n        <div v-for=\"template in templates\" :key=\"template.id\" @click=\"selectedTemplate = template.id\" :class=\"[\n          'p-6 rounded-lg border cursor-pointer text-center transition',\n          selectedTemplate === template.id\n            ? 'border-blue-500 bg-blue-700'\n            : 'border-gray-600 hover:bg-gray-700'\n        ]\">\n          <h3 class=\"text-lg font-semibold mb-2\">{{ template.name }}</h3>\n          <p class=\"text-gray-300 text-sm\">{{ template.description }}</p>\n        </div>\n      </div>\n\n      <!-- Botones del modal multi-paso -->\n      <div class=\"flex justify-between mt-6\">\n        <button @click=\"cancel\" class=\"bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded w-[48%]\">\n          Cancelar\n        </button>\n\n        <button v-if=\"step === 1\" @click=\"goToNextStep\" :disabled=\"!isStep1Valid\"\n          :class=\"['px-4 py-2 rounded w-[48%]', isStep1Valid ? 'bg-blue-600 hover:bg-blue-700' : 'bg-blue-600 opacity-50 cursor-not-allowed']\">\n          {{ modalButtonText }}\n        </button>\n\n        <button v-else @click=\"addCompany\" :disabled=\"isModalButtonDisabled\" :class=\"[\n          'px-4 py-2 rounded w-[48%]',\n          isModalButtonDisabled\n            ? 'bg-green-600 opacity-50 cursor-not-allowed'\n            : 'bg-green-600 hover:bg-green-700'\n        ]\">\n          {{ modalButtonText }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\n// Constante para plantilla por defecto\nconst DEFAULT_TEMPLATE_ID = 1\n\n// Datos iniciales\nconst customers = ref([\n  { id: 1, createdAt: '2025-07-30', name: 'Demo Combustible', rut: '76.145.230-9', contact: 'Marcelo Díaz', city: 'Santiago' },\n  { id: 2, createdAt: '2025-07-23', name: 'Industrial Glover S.P.A.', rut: '77.239.684-2', contact: 'Patricia González', city: 'Lautaro' },\n  { id: 3, createdAt: '2025-05-29', name: 'Cuenta Demo', rut: '76.003.412-5', contact: 'Claudia Muñoz', city: 'Temuco' },\n  { id: 4, createdAt: '2025-05-19', name: 'Constructora Rucol Limitada', rut: '76.918.527-1', contact: 'Rodrigo Herrera', city: 'Temuco' },\n  { id: 5, createdAt: '2025-05-19', name: 'Armory Sustentable', rut: '77.562.981-3', contact: 'Andrea Castillo', city: 'Temuco' },\n  { id: 6, createdAt: '2025-05-19', name: 'Transportes Betancourt', rut: '76.421.875-6', contact: 'Carlos Fuentes', city: 'Temuco' },\n  { id: 7, createdAt: '2025-05-19', name: 'Áridos Macoga SPA', rut: '77.158.443-0', contact: 'Natalia Vega', city: 'Temuco' },\n  { id: 8, createdAt: '2025-05-19', name: 'Servicios Marítimos Plast Marine Limitada', rut: '76.998.224-9', contact: 'Ignacio Contreras', city: 'Puerto Montt' },\n  { id: 9, createdAt: '2025-05-19', name: 'Constructora Stange Hermanos Ltda', rut: '77.304.652-2', contact: 'Francisca Rojas', city: 'Temuco' },\n  { id: 10, createdAt: '2025-05-16', name: 'Safco', rut: '76.842.913-8', contact: 'Germán Paredes', city: 'Temuco' }\n])\n\nconst searchTerm = ref('')\nconst selectedIds = ref([])\nconst selectAll = ref(false)\nconst rowsPerPageOptions = [5, 10, 20, 50]\nconst rowsPerPage = ref(5)\nconst currentPage = ref(1)\nconst showAddModal = ref(false)\nconst step = ref(1)\nconst selectedTemplate = ref(null)\nconst showEditSidebar = ref(false)\nconst editingCompany = ref({ id: null, name: '', rut: '', contact: '', city: '', templateId: DEFAULT_TEMPLATE_ID })\nconst newCompany = ref({ name: '', rut: '', contact: '', city: '' })\nconst copiedId = ref(null)\n\n// Plantillas\nconst templates = ref([\n  { id: 1, name: 'Básico', description: 'Acceso limitado a reportes y panel general.' },\n  { id: 2, name: 'Profesional', description: 'Incluye reportes y comentarios.' },\n  { id: 3, name: 'Avanzado', description: 'Incluye dashboards personalizados y reportes completos.' },\n  { id: 4, name: 'Full', description: 'Todas las funciones habilitadas.' }\n])\n\n// Validación RUT chileno (formato xx.xxx.xxx-x)\nconst isValidRut = (rut) => /^(\\d{1,2}\\.\\d{3}\\.\\d{3}-[\\dkK])$/.test(rut)\n\n// Computed: filtrado y paginación\nconst filteredCustomers = computed(() => {\n  if (!searchTerm.value) return customers.value\n  const term = searchTerm.value.toLowerCase()\n  return customers.value.filter(c =>\n    c.name.toLowerCase().includes(term) ||\n    c.rut.toLowerCase().includes(term) ||\n    c.contact.toLowerCase().includes(term) ||\n    c.createdAt.toLowerCase().includes(term)\n  )\n})\n\n// Formateo automático RUT mientras se escribe\nconst formatRut = (company) => {\n  let rut = company.rut.replace(/[^0-9kK]/g, '')\n  if (rut.length > 9) rut = rut.slice(0, 9)\n\n  if (rut.length > 1) {\n    const body = rut.slice(0, -1)\n    const dv = rut.slice(-1)\n    const reversed = body.split('').reverse()\n    const withDots = []\n    reversed.forEach((char, i) => { if (i > 0 && i % 3 === 0) withDots.push('.'); withDots.push(char) })\n    company.rut = withDots.reverse().join('') + '-' + dv\n  } else {\n    company.rut = rut\n  }\n}\n\n// Validación paso 1: todos los campos requeridos + RUT válido\nconst isStep1Valid = computed(() => {\n  const { name, rut, contact, city } = newCompany.value\n  return name.trim() && rut.trim() && contact.trim() && city.trim() && isValidRut(rut)\n})\n\n// Paginar clientes\nconst paginatedCustomers = computed(() => {\n  const start = (currentPage.value - 1) * rowsPerPage.value\n  return filteredCustomers.value.slice(start, start + rowsPerPage.value)\n})\n\nconst totalPages = computed(() => Math.ceil(filteredCustomers.value.length / rowsPerPage.value))\n\n// Select all toggle\nconst toggleSelectAll = () => selectAll.value\n  ? selectedIds.value = paginatedCustomers.value.map(c => c.id)\n  : selectedIds.value = []\n\n// Paginación\nconst nextPage = () => { if (currentPage.value < totalPages.value) currentPage.value++ }\nconst previousPage = () => { if (currentPage.value > 1) currentPage.value-- }\n\n// Modal multi-paso\nconst goToNextStep = () => {\n  if (isStep1Valid.value) step.value = 2\n  else alert('Completa todos los campos correctamente antes de continuar.')\n}\n\n// Cancelar modal\nconst cancel = () => {\n  showAddModal.value = false\n  step.value = 1\n  selectedTemplate.value = null\n  newCompany.value = { name: '', rut: '', contact: '', city: '' }\n}\n\n// Agregar empresa con ID único y validación RUT\nconst addCompany = () => {\n  if (!selectedTemplate.value) return\n  if (!isValidRut(newCompany.value.rut)) {\n    alert('RUT inválido. Formato esperado: xx.xxx.xxx-x')\n    return\n  }\n  const id = Date.now()\n  const createdAt = new Date().toISOString().slice(0, 10)\n  customers.value.push({ id, createdAt, ...newCompany.value, templateId: selectedTemplate.value })\n  cancel()\n}\n\n// Eliminar seleccionados\nconst deleteSelected = () => {\n  customers.value = customers.value.filter(c => !selectedIds.value.includes(c.id))\n  selectedIds.value = []\n}\n\n// Copiar datos con tooltip reutilizable\nconst copyCustomerData = (customer) => {\n  const data = `Nombre: ${customer.name}\\nRUT: ${customer.rut}\\nContacto: ${customer.contact}`\n  navigator.clipboard.writeText(data).then(() => {\n    copiedId.value = customer.id\n    setTimeout(() => copiedId.value = null, 1000)\n  })\n}\n\n// Editar empresa\nconst editCustomer = (customer) => {\n  editingCompany.value = { ...customer }\n  if (!editingCompany.value.templateId) editingCompany.value.templateId = DEFAULT_TEMPLATE_ID\n  showEditSidebar.value = true\n}\n\n// Guardar cambios\nconst updateCompany = () => {\n  if (!isValidRut(editingCompany.value.rut)) {\n    alert('RUT inválido. Formato esperado: xx.xxx.xxx-x')\n    return\n  }\n  const index = customers.value.findIndex(c => c.id === editingCompany.value.id)\n  if (index !== -1) customers.value[index] = { ...editingCompany.value }\n  showEditSidebar.value = false\n}\n\n// Computed para texto dinámico de botones en modal\nconst modalButtonText = computed(() => step.value === 1 ? 'Siguiente' : 'Crear Empresa')\nconst isModalButtonDisabled = computed(() => step.value === 2 && !selectedTemplate.value)\n\n// Reset selectAll al cambiar página\nwatch(paginatedCustomers, () => selectAll.value = false)\n</script>\n\n\n\n<style scoped>\n.fade-scale-enter-active,\n.fade-scale-leave-active {\n  transition: all 0.3s ease;\n}\n\n.fade-scale-enter-from,\n.fade-scale-leave-to {\n  opacity: 0;\n  transform: scale(0.8);\n}\n\n.fade-scale-enter-to,\n.fade-scale-leave-from {\n  opacity: 1;\n  transform: scale(1);\n}\n\n\n.slide-fade-enter-active {\n  transition: transform 0.3s ease, opacity 0.3s ease;\n}\n\n.slide-fade-leave-active {\n  transition: transform 0.3s ease, opacity 0.3s ease;\n}\n\n.slide-fade-enter-from,\n.slide-fade-leave-to {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.slide-fade-enter-to,\n.slide-fade-leave-from {\n  transform: translateX(0);\n  opacity: 1;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}