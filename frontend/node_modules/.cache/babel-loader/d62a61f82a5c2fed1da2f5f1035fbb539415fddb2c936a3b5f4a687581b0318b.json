{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, computed, watch } from 'vue';\nimport EmpresasTable from './EmpresasTable.vue';\nimport AgregarEmpresasModal from './AgregarEmpresasModal.vue';\nimport EditarEmpresasSidebar from '@/components/EditarEmpresasSidebar.vue';\n\n// --- Estado global de empresas ---\nconst DEFAULT_TEMPLATE_ID = 1;\nexport default {\n  __name: 'EmpresasView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const customers = ref([{\n      id: 1,\n      createdAt: '2025-07-30',\n      name: 'Demo Combustible',\n      rut: '76.145.230-9',\n      contact: 'Marcelo Díaz',\n      city: 'Santiago'\n    }, {\n      id: 2,\n      createdAt: '2025-07-23',\n      name: 'Industrial Glover S.P.A.',\n      rut: '77.239.684-2',\n      contact: 'Patricia González',\n      city: 'Lautaro'\n    }, {\n      id: 3,\n      createdAt: '2025-05-29',\n      name: 'Cuenta Demo',\n      rut: '76.003.412-5',\n      contact: 'Claudia Muñoz',\n      city: 'Temuco'\n    }, {\n      id: 4,\n      createdAt: '2025-05-19',\n      name: 'Constructora Rucol Limitada',\n      rut: '76.918.527-1',\n      contact: 'Rodrigo Herrera',\n      city: 'Temuco'\n    }, {\n      id: 5,\n      createdAt: '2025-05-19',\n      name: 'Armory Sustentable',\n      rut: '77.562.981-3',\n      contact: 'Andrea Castillo',\n      city: 'Temuco'\n    }, {\n      id: 6,\n      createdAt: '2025-05-19',\n      name: 'Transportes Betancourt',\n      rut: '76.421.875-6',\n      contact: 'Carlos Fuentes',\n      city: 'Temuco'\n    }, {\n      id: 7,\n      createdAt: '2025-05-19',\n      name: 'Áridos Macoga SPA',\n      rut: '77.158.443-0',\n      contact: 'Natalia Vega',\n      city: 'Temuco'\n    }, {\n      id: 8,\n      createdAt: '2025-05-19',\n      name: 'Servicios Marítimos Plast Marine Limitada',\n      rut: '76.998.224-9',\n      contact: 'Ignacio Contreras',\n      city: 'Puerto Montt'\n    }, {\n      id: 9,\n      createdAt: '2025-05-19',\n      name: 'Constructora Stange Hermanos Ltda',\n      rut: '77.304.652-2',\n      contact: 'Francisca Rojas',\n      city: 'Temuco'\n    }, {\n      id: 10,\n      createdAt: '2025-05-16',\n      name: 'Safco',\n      rut: '76.842.913-8',\n      contact: 'Germán Paredes',\n      city: 'Temuco'\n    }]);\n    const templates = ref([{\n      id: 1,\n      name: 'Básico',\n      description: 'Acceso limitado a reportes y panel general.'\n    }, {\n      id: 2,\n      name: 'Profesional',\n      description: 'Incluye reportes y comentarios.'\n    }, {\n      id: 3,\n      name: 'Avanzado',\n      description: 'Incluye dashboards personalizados y reportes completos.'\n    }, {\n      id: 4,\n      name: 'Full',\n      description: 'Todas las funciones habilitadas.'\n    }]);\n\n    // --- Estados de control ---\n    const searchTerm = ref('');\n    const selectedIds = ref([]);\n    const rowsPerPage = ref(5);\n    const currentPage = ref(1);\n    const showAddModal = ref(false);\n    const showEditSidebar = ref(false);\n    const editingCompany = ref({\n      id: null,\n      name: '',\n      rut: '',\n      contact: '',\n      city: '',\n      templateId: DEFAULT_TEMPLATE_ID\n    });\n\n    // --- Funciones globales ---\n    const deleteSelected = () => {\n      customers.value = customers.value.filter(c => !selectedIds.value.includes(c.id));\n      selectedIds.value = [];\n    };\n    const copyCustomerData = customer => {\n      const data = `Nombre: ${customer.name}\\nRUT: ${customer.rut}\\nContacto: ${customer.contact}`;\n      navigator.clipboard.writeText(data);\n    };\n    const editCustomer = customer => {\n      editingCompany.value = {\n        ...customer\n      };\n      if (!editingCompany.value.templateId) editingCompany.value.templateId = DEFAULT_TEMPLATE_ID;\n      showEditSidebar.value = true;\n    };\n    const updateCompany = updated => {\n      const index = customers.value.findIndex(c => c.id === updated.id);\n      if (index !== -1) customers.value[index] = updated;\n      showEditSidebar.value = false;\n    };\n    const addCompany = newCompany => {\n      const id = Date.now();\n      const createdAt = new Date().toISOString().slice(0, 10);\n      customers.value.push({\n        id,\n        createdAt,\n        ...newCompany\n      });\n      showAddModal.value = false;\n    };\n    const cancel = () => {\n      showAddModal.value = false;\n    };\n    const __returned__ = {\n      DEFAULT_TEMPLATE_ID,\n      customers,\n      templates,\n      searchTerm,\n      selectedIds,\n      rowsPerPage,\n      currentPage,\n      showAddModal,\n      showEditSidebar,\n      editingCompany,\n      deleteSelected,\n      copyCustomerData,\n      editCustomer,\n      updateCompany,\n      addCompany,\n      cancel,\n      ref,\n      computed,\n      watch,\n      EmpresasTable,\n      AgregarEmpresasModal,\n      EditarEmpresasSidebar\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","EmpresasTable","AgregarEmpresasModal","EditarEmpresasSidebar","DEFAULT_TEMPLATE_ID","customers","id","createdAt","name","rut","contact","city","templates","description","searchTerm","selectedIds","rowsPerPage","currentPage","showAddModal","showEditSidebar","editingCompany","templateId","deleteSelected","value","filter","c","includes","copyCustomerData","customer","data","navigator","clipboard","writeText","editCustomer","updateCompany","updated","index","findIndex","addCompany","newCompany","Date","now","toISOString","slice","push","cancel"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/Views/EmpresasView.vue"],"sourcesContent":["<template>\n  <div class=\"p-2 sm:p-4 w-full flex flex-col\">\n    <!-- Tabla con búsqueda y acciones -->\n    <EmpresasTable\n      :customers=\"customers\"\n      :templates=\"templates\"\n      v-model:searchTerm=\"searchTerm\"\n      v-model:selectedIds=\"selectedIds\"\n      v-model:rowsPerPage=\"rowsPerPage\"\n      v-model:currentPage=\"currentPage\"\n      @edit=\"editCustomer\"\n      @delete-selected=\"deleteSelected\"\n      @copy=\"copyCustomerData\"\n      @open-add-modal=\"showAddModal = true\"\n    />\n\n    <!-- Sidebar editar -->\n    <EditarEmpresasSidebar\n      v-if=\"showEditSidebar\"\n      :company=\"editingCompany\"\n      :templates=\"templates\"\n      @update=\"updateCompany\"\n      @close=\"showEditSidebar = false\"\n    />\n\n    <!-- Modal agregar -->\n    <AgregarEmpresasModal\n      v-if=\"showAddModal\"\n      :templates=\"templates\"\n      @add=\"addCompany\"\n      @cancel=\"cancel\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport EmpresasTable from './EmpresasTable.vue'\nimport AgregarEmpresasModal from './AgregarEmpresasModal.vue'\nimport EditarEmpresasSidebar from '@/components/EditarEmpresasSidebar.vue'\n\n// --- Estado global de empresas ---\nconst DEFAULT_TEMPLATE_ID = 1\n\nconst customers = ref([\n  { id: 1, createdAt: '2025-07-30', name: 'Demo Combustible', rut: '76.145.230-9', contact: 'Marcelo Díaz', city: 'Santiago' },\n  { id: 2, createdAt: '2025-07-23', name: 'Industrial Glover S.P.A.', rut: '77.239.684-2', contact: 'Patricia González', city: 'Lautaro' },\n  { id: 3, createdAt: '2025-05-29', name: 'Cuenta Demo', rut: '76.003.412-5', contact: 'Claudia Muñoz', city: 'Temuco' },\n  { id: 4, createdAt: '2025-05-19', name: 'Constructora Rucol Limitada', rut: '76.918.527-1', contact: 'Rodrigo Herrera', city: 'Temuco' },\n  { id: 5, createdAt: '2025-05-19', name: 'Armory Sustentable', rut: '77.562.981-3', contact: 'Andrea Castillo', city: 'Temuco' },\n  { id: 6, createdAt: '2025-05-19', name: 'Transportes Betancourt', rut: '76.421.875-6', contact: 'Carlos Fuentes', city: 'Temuco' },\n  { id: 7, createdAt: '2025-05-19', name: 'Áridos Macoga SPA', rut: '77.158.443-0', contact: 'Natalia Vega', city: 'Temuco' },\n  { id: 8, createdAt: '2025-05-19', name: 'Servicios Marítimos Plast Marine Limitada', rut: '76.998.224-9', contact: 'Ignacio Contreras', city: 'Puerto Montt' },\n  { id: 9, createdAt: '2025-05-19', name: 'Constructora Stange Hermanos Ltda', rut: '77.304.652-2', contact: 'Francisca Rojas', city: 'Temuco' },\n  { id: 10, createdAt: '2025-05-16', name: 'Safco', rut: '76.842.913-8', contact: 'Germán Paredes', city: 'Temuco' }\n])\n\nconst templates = ref([\n  { id: 1, name: 'Básico', description: 'Acceso limitado a reportes y panel general.' },\n  { id: 2, name: 'Profesional', description: 'Incluye reportes y comentarios.' },\n  { id: 3, name: 'Avanzado', description: 'Incluye dashboards personalizados y reportes completos.' },\n  { id: 4, name: 'Full', description: 'Todas las funciones habilitadas.' }\n])\n\n// --- Estados de control ---\nconst searchTerm = ref('')\nconst selectedIds = ref([])\nconst rowsPerPage = ref(5)\nconst currentPage = ref(1)\n\nconst showAddModal = ref(false)\nconst showEditSidebar = ref(false)\nconst editingCompany = ref({ id: null, name: '', rut: '', contact: '', city: '', templateId: DEFAULT_TEMPLATE_ID })\n\n// --- Funciones globales ---\nconst deleteSelected = () => {\n  customers.value = customers.value.filter(c => !selectedIds.value.includes(c.id))\n  selectedIds.value = []\n}\n\nconst copyCustomerData = (customer) => {\n  const data = `Nombre: ${customer.name}\\nRUT: ${customer.rut}\\nContacto: ${customer.contact}`\n  navigator.clipboard.writeText(data)\n}\n\nconst editCustomer = (customer) => {\n  editingCompany.value = { ...customer }\n  if (!editingCompany.value.templateId) editingCompany.value.templateId = DEFAULT_TEMPLATE_ID\n  showEditSidebar.value = true\n}\n\nconst updateCompany = (updated) => {\n  const index = customers.value.findIndex(c => c.id === updated.id)\n  if (index !== -1) customers.value[index] = updated\n  showEditSidebar.value = false\n}\n\nconst addCompany = (newCompany) => {\n  const id = Date.now()\n  const createdAt = new Date().toISOString().slice(0, 10)\n  customers.value.push({ id, createdAt, ...newCompany })\n  showAddModal.value = false\n}\n\nconst cancel = () => {\n  showAddModal.value = false\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}