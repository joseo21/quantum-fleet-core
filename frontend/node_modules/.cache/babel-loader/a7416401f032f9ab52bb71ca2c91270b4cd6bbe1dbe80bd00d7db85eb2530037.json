{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, watch } from 'vue';\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  __name: 'EmpresasTable',\n  props: {\n    customers: Array,\n    searchTerm: String,\n    selectedIds: Array\n  },\n  emits: ['update:selected-ids', 'edit', 'delete-selected', 'copy', 'add'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const modelValue = ref([...props.selectedIds]);\n    const localSearch = ref(props.searchTerm || '');\n    const rowsPerPage = ref(5);\n    const currentPage = ref(1);\n    const selectAll = ref(false);\n    const filtered = computed(() => {\n      if (!localSearch.value) return props.customers;\n      const t = localSearch.value.toLowerCase();\n      return props.customers.filter(c => c.name.toLowerCase().includes(t) || c.rut.toLowerCase().includes(t) || c.contact.toLowerCase().includes(t) || c.city.toLowerCase().includes(t));\n    });\n    const totalPages = computed(() => Math.ceil(filtered.value.length / rowsPerPage.value));\n    const paginatedCustomers = computed(() => {\n      const start = (currentPage.value - 1) * rowsPerPage.value;\n      return filtered.value.slice(start, start + rowsPerPage.value);\n    });\n    watch(modelValue, val => emit('update:selected-ids', val));\n    watch(paginatedCustomers, () => selectAll.value = false);\n    const toggleSelectAll = () => {\n      selectAll.value ? modelValue.value = paginatedCustomers.value.map(c => c.id) : modelValue.value = [];\n    };\n    const nextPage = () => {\n      if (currentPage.value < totalPages.value) currentPage.value++;\n    };\n    const previousPage = () => {\n      if (currentPage.value > 1) currentPage.value--;\n    };\n    const __returned__ = {\n      props,\n      emit,\n      modelValue,\n      localSearch,\n      rowsPerPage,\n      currentPage,\n      selectAll,\n      filtered,\n      totalPages,\n      paginatedCustomers,\n      toggleSelectAll,\n      nextPage,\n      previousPage,\n      ref,\n      computed,\n      watch,\n      SvgIcon\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","watch","SvgIcon","props","__props","emit","__emit","modelValue","selectedIds","localSearch","searchTerm","rowsPerPage","currentPage","selectAll","filtered","value","customers","t","toLowerCase","filter","c","name","includes","rut","contact","city","totalPages","Math","ceil","length","paginatedCustomers","start","slice","val","toggleSelectAll","map","id","nextPage","previousPage"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/EmpresasTable.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- üîç Barra de b√∫squeda + Botones -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center mb-4 gap-3\">\n      <div class=\"flex w-full sm:w-2/3 md:w-1/2\">\n        <div class=\"flex w-full border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden\">\n          <div class=\"flex items-center justify-center px-3 bg-gray-100 dark:bg-gray-800 text-gray-500\">\n            <SvgIcon name=\"search\" class=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <input\n            v-model=\"localSearch\"\n            placeholder=\"Buscar empresa...\"\n            class=\"flex-1 p-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none\"\n          />\n          <button\n            v-if=\"localSearch\"\n            @click=\"localSearch = ''\"\n            class=\"px-4 bg-[#ff6600] hover:bg-[#e65500] text-white font-semibold text-sm transition\"\n          >\n            Limpiar\n          </button>\n        </div>\n      </div>\n\n      <div class=\"flex gap-2\">\n        <button\n          @click=\"$emit('add')\"\n          class=\"flex items-center justify-center gap-2 px-4 py-2 bg-[#ff6600] hover:bg-[#e65500] text-white rounded-md\"\n        >\n          <SvgIcon name=\"plus\" class=\"w-5 h-5\" /> Agregar Empresa\n        </button>\n        <button\n          v-if=\"modelValue.length > 0\"\n          @click=\"$emit('delete-selected')\"\n          class=\"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md\"\n        >\n          <SvgIcon name=\"trash\" class=\"w-5 h-5\" />\n        </button>\n      </div>\n    </div>\n\n    <!-- üìã Tabla -->\n    <div class=\"border border-gray-300 dark:border-gray-700 rounded-lg overflow-y-auto max-h-[500px]\">\n      <table class=\"min-w-full text-center text-sm border-collapse\">\n        <thead class=\"bg-[#102372] text-white sticky top-0\">\n          <tr>\n            <th><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" /></th>\n            <th>Fecha</th><th>Nombre</th><th>RUT</th><th>Contacto</th><th>Ciudad</th><th>Acciones</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"c in paginatedCustomers\" :key=\"c.id\" class=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n            <td><input type=\"checkbox\" v-model=\"modelValue\" :value=\"c.id\" /></td>\n            <td>{{ c.createdAt }}</td>\n            <td>{{ c.name }}</td>\n            <td>{{ c.rut }}</td>\n            <td>{{ c.contact }}</td>\n            <td>{{ c.city }}</td>\n            <td class=\"flex justify-center gap-2\">\n              <button @click=\"$emit('edit', c)\" class=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md\">\n                <SvgIcon name=\"pencil\" class=\"w-4 h-4\" />\n              </button>\n              <button @click=\"$emit('copy', c)\" class=\"bg-gray-700 text-white px-3 py-1 rounded-md\">\n                <SvgIcon name=\"copy\" class=\"w-4 h-4\" />\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- üìë Paginaci√≥n -->\n    <div class=\"flex justify-between items-center mt-4 text-sm\">\n      <span>P√°gina {{ currentPage }} / {{ totalPages }}</span>\n      <div class=\"flex gap-2\">\n        <button @click=\"previousPage\" :disabled=\"currentPage === 1\">‚¨ÖÔ∏è</button>\n        <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\">‚û°Ô∏è</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nconst props = defineProps({\n  customers: Array,\n  searchTerm: String,\n  selectedIds: Array\n})\nconst emit = defineEmits(['update:selected-ids', 'edit', 'delete-selected', 'copy', 'add'])\n\nconst modelValue = ref([...props.selectedIds])\nconst localSearch = ref(props.searchTerm || '')\nconst rowsPerPage = ref(5)\nconst currentPage = ref(1)\nconst selectAll = ref(false)\n\nconst filtered = computed(() => {\n  if (!localSearch.value) return props.customers\n  const t = localSearch.value.toLowerCase()\n  return props.customers.filter(c =>\n    c.name.toLowerCase().includes(t) ||\n    c.rut.toLowerCase().includes(t) ||\n    c.contact.toLowerCase().includes(t) ||\n    c.city.toLowerCase().includes(t)\n  )\n})\nconst totalPages = computed(() => Math.ceil(filtered.value.length / rowsPerPage.value))\nconst paginatedCustomers = computed(() => {\n  const start = (currentPage.value - 1) * rowsPerPage.value\n  return filtered.value.slice(start, start + rowsPerPage.value)\n})\n\nwatch(modelValue, val => emit('update:selected-ids', val))\nwatch(paginatedCustomers, () => selectAll.value = false)\n\nconst toggleSelectAll = () => {\n  selectAll.value\n    ? modelValue.value = paginatedCustomers.value.map(c => c.id)\n    : modelValue.value = []\n}\nconst nextPage = () => { if (currentPage.value < totalPages.value) currentPage.value++ }\nconst previousPage = () => { if (currentPage.value > 1) currentPage.value-- }\n</script>\n"],"mappings":";;;AAmFA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,KAAI;AACzC,OAAOC,OAAO,MAAM,gCAA+B;;;;;;;;;;;;;;IAEnD,MAAMC,KAAK,GAAGC,OAAA;IAKd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,UAAU,GAAGR,GAAG,CAAC,CAAC,GAAGI,KAAK,CAACK,WAAW,CAAC;IAC7C,MAAMC,WAAW,GAAGV,GAAG,CAACI,KAAK,CAACO,UAAU,IAAI,EAAE;IAC9C,MAAMC,WAAW,GAAGZ,GAAG,CAAC,CAAC;IACzB,MAAMa,WAAW,GAAGb,GAAG,CAAC,CAAC;IACzB,MAAMc,SAAS,GAAGd,GAAG,CAAC,KAAK;IAE3B,MAAMe,QAAQ,GAAGd,QAAQ,CAAC,MAAM;MAC9B,IAAI,CAACS,WAAW,CAACM,KAAK,EAAE,OAAOZ,KAAK,CAACa,SAAQ;MAC7C,MAAMC,CAAC,GAAGR,WAAW,CAACM,KAAK,CAACG,WAAW,CAAC;MACxC,OAAOf,KAAK,CAACa,SAAS,CAACG,MAAM,CAACC,CAAC,IAC7BA,CAAC,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,CAAC,CAAC,IAChCG,CAAC,CAACG,GAAG,CAACL,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,CAAC,CAAC,IAC/BG,CAAC,CAACI,OAAO,CAACN,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,CAAC,CAAC,IACnCG,CAAC,CAACK,IAAI,CAACP,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,CAAC,CACjC;IACF,CAAC;IACD,MAAMS,UAAU,GAAG1B,QAAQ,CAAC,MAAM2B,IAAI,CAACC,IAAI,CAACd,QAAQ,CAACC,KAAK,CAACc,MAAM,GAAGlB,WAAW,CAACI,KAAK,CAAC;IACtF,MAAMe,kBAAkB,GAAG9B,QAAQ,CAAC,MAAM;MACxC,MAAM+B,KAAK,GAAG,CAACnB,WAAW,CAACG,KAAK,GAAG,CAAC,IAAIJ,WAAW,CAACI,KAAI;MACxD,OAAOD,QAAQ,CAACC,KAAK,CAACiB,KAAK,CAACD,KAAK,EAAEA,KAAK,GAAGpB,WAAW,CAACI,KAAK;IAC9D,CAAC;IAEDd,KAAK,CAACM,UAAU,EAAE0B,GAAG,IAAI5B,IAAI,CAAC,qBAAqB,EAAE4B,GAAG,CAAC;IACzDhC,KAAK,CAAC6B,kBAAkB,EAAE,MAAMjB,SAAS,CAACE,KAAK,GAAG,KAAK;IAEvD,MAAMmB,eAAe,GAAGA,CAAA,KAAM;MAC5BrB,SAAS,CAACE,KAAI,GACVR,UAAU,CAACQ,KAAK,GAAGe,kBAAkB,CAACf,KAAK,CAACoB,GAAG,CAACf,CAAC,IAAIA,CAAC,CAACgB,EAAE,IACzD7B,UAAU,CAACQ,KAAK,GAAG,EAAC;IAC1B;IACA,MAAMsB,QAAQ,GAAGA,CAAA,KAAM;MAAE,IAAIzB,WAAW,CAACG,KAAK,GAAGW,UAAU,CAACX,KAAK,EAAEH,WAAW,CAACG,KAAK,EAAE;IAAC;IACvF,MAAMuB,YAAY,GAAGA,CAAA,KAAM;MAAE,IAAI1B,WAAW,CAACG,KAAK,GAAG,CAAC,EAAEH,WAAW,CAACG,KAAK,EAAE;IAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}