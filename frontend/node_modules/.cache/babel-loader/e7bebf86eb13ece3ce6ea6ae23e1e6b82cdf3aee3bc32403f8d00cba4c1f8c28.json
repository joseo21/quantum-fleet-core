{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { computed, ref, watch } from 'vue';\n\n// Props\n\nexport default {\n  __name: 'EmpresasTable',\n  props: {\n    customers: Array,\n    searchTerm: String,\n    selectedIds: Array,\n    rowsPerPageOptions: Array,\n    modelValue: Number,\n    currentPage: Number\n  },\n  emits: ['update:selectedIds', 'edit', 'copy', 'update:rowsPerPage', 'update:currentPage'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    // Emits\n    const emit = __emit;\n\n    // Refs locales\n    const selectedLocal = ref([...$props.selectedIds]);\n    const rowsPerPageLocal = ref($props.modelValue);\n    const currentPageLocal = ref($props.currentPage);\n\n    // üîç Filtro\n    const filteredCustomers = computed(() => {\n      if (!$props.searchTerm) return $props.customers;\n      const term = $props.searchTerm.toLowerCase();\n      return $props.customers.filter(c => c.name.toLowerCase().includes(term) || c.rut.toLowerCase().includes(term) || c.contact.toLowerCase().includes(term) || c.city.toLowerCase().includes(term));\n    });\n\n    // üî¢ Paginaci√≥n\n    const startIndex = computed(() => (currentPageLocal.value - 1) * rowsPerPageLocal.value);\n    const endIndex = computed(() => startIndex.value + rowsPerPageLocal.value);\n    const paginatedCustomers = computed(() => filteredCustomers.value.slice(startIndex.value, endIndex.value));\n    const nextPage = () => {\n      if (endIndex.value < filteredCustomers.value.length) currentPageLocal.value++;\n    };\n    const prevPage = () => {\n      if (currentPageLocal.value > 1) currentPageLocal.value--;\n    };\n\n    // ‚úÖ Selecci√≥n m√∫ltiple\n    const isAllSelected = computed(() => filteredCustomers.value.length > 0 && filteredCustomers.value.every(c => selectedLocal.value.includes(c.id)));\n    const toggleSelectAll = () => {\n      if (isAllSelected.value) {\n        selectedLocal.value = [];\n      } else {\n        selectedLocal.value = filteredCustomers.value.map(c => c.id);\n      }\n    };\n\n    // üîÑ Sincronizar con padre\n    watch(selectedLocal, val => emit('update:selectedIds', val));\n    watch(rowsPerPageLocal, val => emit('update:rowsPerPage', val));\n    watch(currentPageLocal, val => emit('update:currentPage', val));\n    watch(() => $props.selectedIds, val => selectedLocal.value = [...val]);\n    const __returned__ = {\n      emit,\n      selectedLocal,\n      rowsPerPageLocal,\n      currentPageLocal,\n      filteredCustomers,\n      startIndex,\n      endIndex,\n      paginatedCustomers,\n      nextPage,\n      prevPage,\n      isAllSelected,\n      toggleSelectAll,\n      computed,\n      ref,\n      watch\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","watch","emit","__emit","selectedLocal","$props","selectedIds","rowsPerPageLocal","modelValue","currentPageLocal","currentPage","filteredCustomers","searchTerm","customers","term","toLowerCase","filter","c","name","includes","rut","contact","city","startIndex","value","endIndex","paginatedCustomers","slice","nextPage","length","prevPage","isAllSelected","every","id","toggleSelectAll","map","val"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/EmpresasTable.vue"],"sourcesContent":["<template>\n  <div class=\"overflow-x-auto border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm bg-white dark:bg-gray-800\">\n    <table class=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n      <thead class=\"bg-gray-100 dark:bg-gray-700\">\n        <tr>\n          <th class=\"p-3 text-left\">\n            <input type=\"checkbox\" @change=\"toggleSelectAll\" :checked=\"isAllSelected\" />\n          </th>\n          <th class=\"p-3 text-left text-sm font-semibold\">Fecha</th>\n          <th class=\"p-3 text-left text-sm font-semibold\">Empresa</th>\n          <th class=\"p-3 text-left text-sm font-semibold\">RUT</th>\n          <th class=\"p-3 text-left text-sm font-semibold\">Contacto</th>\n          <th class=\"p-3 text-left text-sm font-semibold\">Ciudad</th>\n          <th class=\"p-3 text-center text-sm font-semibold\">Acciones</th>\n        </tr>\n      </thead>\n\n      <tbody class=\"divide-y divide-gray-100 dark:divide-gray-700\">\n        <tr v-for=\"customer in paginatedCustomers\" :key=\"customer.id\"\n          class=\"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150\">\n          <td class=\"p-3\">\n            <input type=\"checkbox\" v-model=\"selectedLocal\" :value=\"customer.id\" />\n          </td>\n          <td class=\"p-3 text-sm\">{{ customer.createdAt }}</td>\n          <td class=\"p-3 text-sm font-medium\">{{ customer.name }}</td>\n          <td class=\"p-3 text-sm\">{{ customer.rut }}</td>\n          <td class=\"p-3 text-sm\">{{ customer.contact }}</td>\n          <td class=\"p-3 text-sm\">{{ customer.city }}</td>\n\n          <td class=\"p-3 text-center flex justify-center gap-2\">\n            <button @click=\"$emit('edit', customer)\"\n              class=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\">\n              ‚úèÔ∏è\n            </button>\n            <button @click=\"$emit('copy', customer)\"\n              class=\"text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100\">\n              üìã\n            </button>\n          </td>\n        </tr>\n\n        <tr v-if=\"filteredCustomers.length === 0\">\n          <td colspan=\"7\" class=\"text-center py-6 text-gray-500 dark:text-gray-400\">\n            No se encontraron empresas.\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- üîΩ Paginaci√≥n -->\n    <div class=\"flex flex-col sm:flex-row justify-between items-center gap-2 p-3 border-t border-gray-200 dark:border-gray-700\">\n      <div class=\"text-sm text-gray-600 dark:text-gray-300\">\n        Mostrando {{ startIndex + 1 }} - {{ Math.min(endIndex, filteredCustomers.length) }} de {{ filteredCustomers.length }}\n      </div>\n\n      <div class=\"flex items-center gap-2\">\n        <select v-model=\"rowsPerPageLocal\" class=\"border rounded-md px-2 py-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100\">\n          <option v-for=\"n in rowsPerPageOptions\" :key=\"n\" :value=\"n\">{{ n }} filas</option>\n        </select>\n\n        <div class=\"flex gap-1\">\n          <button @click=\"prevPage\" :disabled=\"currentPageLocal === 1\"\n            class=\"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40\">‚óÄ</button>\n          <span class=\"text-sm\">P√°gina {{ currentPageLocal }}</span>\n          <button @click=\"nextPage\" :disabled=\"endIndex >= filteredCustomers.length\"\n            class=\"px-3 py-1 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40\">‚ñ∂</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, watch } from 'vue'\n\n// Props\ndefineProps({\n  customers: Array,\n  searchTerm: String,\n  selectedIds: Array,\n  rowsPerPageOptions: Array,\n  modelValue: Number,\n  currentPage: Number,\n})\n\n// Emits\nconst emit = defineEmits(['update:selectedIds', 'edit', 'copy', 'update:rowsPerPage', 'update:currentPage'])\n\n// Refs locales\nconst selectedLocal = ref([...$props.selectedIds])\nconst rowsPerPageLocal = ref($props.modelValue)\nconst currentPageLocal = ref($props.currentPage)\n\n// üîç Filtro\nconst filteredCustomers = computed(() => {\n  if (!$props.searchTerm) return $props.customers\n  const term = $props.searchTerm.toLowerCase()\n  return $props.customers.filter(c =>\n    c.name.toLowerCase().includes(term) ||\n    c.rut.toLowerCase().includes(term) ||\n    c.contact.toLowerCase().includes(term) ||\n    c.city.toLowerCase().includes(term)\n  )\n})\n\n// üî¢ Paginaci√≥n\nconst startIndex = computed(() => (currentPageLocal.value - 1) * rowsPerPageLocal.value)\nconst endIndex = computed(() => startIndex.value + rowsPerPageLocal.value)\nconst paginatedCustomers = computed(() => filteredCustomers.value.slice(startIndex.value, endIndex.value))\n\nconst nextPage = () => {\n  if (endIndex.value < filteredCustomers.value.length) currentPageLocal.value++\n}\nconst prevPage = () => {\n  if (currentPageLocal.value > 1) currentPageLocal.value--\n}\n\n// ‚úÖ Selecci√≥n m√∫ltiple\nconst isAllSelected = computed(() =>\n  filteredCustomers.value.length > 0 &&\n  filteredCustomers.value.every(c => selectedLocal.value.includes(c.id))\n)\n\nconst toggleSelectAll = () => {\n  if (isAllSelected.value) {\n    selectedLocal.value = []\n  } else {\n    selectedLocal.value = filteredCustomers.value.map(c => c.id)\n  }\n}\n\n// üîÑ Sincronizar con padre\nwatch(selectedLocal, val => emit('update:selectedIds', val))\nwatch(rowsPerPageLocal, val => emit('update:rowsPerPage', val))\nwatch(currentPageLocal, val => emit('update:currentPage', val))\nwatch(() => $props.selectedIds, val => selectedLocal.value = [...val])\n</script>\n\n<style scoped>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}