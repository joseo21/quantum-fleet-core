{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-lg relative w-full max-w-5xl h-auto p-4 sm:p-6 border border-gray-300 dark:border-gray-700 shadow-xl overflow-auto\"\n};\nconst _hoisted_3 = {\n  class: \"text-xl sm:text-2xl font-bold mb-4 text-center text-[#102372] dark:text-[#ff6600]\"\n};\nconst _hoisted_4 = {\n  class: \"hidden sm:block overflow-x-auto\"\n};\nconst _hoisted_5 = {\n  class: \"min-w-full text-xs sm:text-sm md:text-base text-center border-collapse\"\n};\nconst _hoisted_6 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_7 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_8 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_9 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_10 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_11 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_12 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_13 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_14 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  src: \"https://sinergygroup.cl/Mantenciones/img/verde.png\",\n  class: \"w-16 h-16 object-contain mx-auto\"\n};\nconst _hoisted_16 = {\n  key: 1,\n  src: \"https://sinergygroup.cl/Mantenciones/img/amarillo.png\",\n  class: \"w-16 h-16 object-contain mx-auto\"\n};\nconst _hoisted_17 = {\n  key: 2,\n  src: \"https://sinergygroup.cl/Mantenciones/img/rojo.png\",\n  class: \"w-16 h-16 object-contain mx-auto\"\n};\nconst _hoisted_18 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = {\n  class: \"py-2 px-3\"\n};\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = {\n  class: \"sm:hidden flex flex-col gap-4\"\n};\nconst _hoisted_23 = {\n  class: \"flex justify-between items-center\"\n};\nconst _hoisted_24 = {\n  class: \"font-semibold\"\n};\nconst _hoisted_25 = {\n  class: \"text-xs px-2 py-1 rounded bg-blue-600 text-white\"\n};\nconst _hoisted_26 = {\n  class: \"flex flex-wrap gap-2\"\n};\nconst _hoisted_27 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_28 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_29 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_30 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_31 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_32 = {\n  class: \"flex flex-col\"\n};\nconst _hoisted_33 = {\n  class: \"flex items-center justify-between mt-2\"\n};\nconst _hoisted_34 = {\n  key: 0,\n  src: \"https://sinergygroup.cl/Mantenciones/img/verde.png\",\n  class: \"w-12 h-12 object-contain\"\n};\nconst _hoisted_35 = {\n  key: 1,\n  src: \"https://sinergygroup.cl/Mantenciones/img/amarillo.png\",\n  class: \"w-12 h-12 object-contain\"\n};\nconst _hoisted_36 = {\n  key: 2,\n  src: \"https://sinergygroup.cl/Mantenciones/img/rojo.png\",\n  class: \"w-12 h-12 object-contain\"\n};\nconst _hoisted_37 = {\n  class: \"flex gap-2\"\n};\nconst _hoisted_38 = [\"onClick\"];\nconst _hoisted_39 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SvgIcon = _resolveComponent(\"SvgIcon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Header \"), _createElementVNode(\"h2\", _hoisted_3, \" Mantenciones Vehículo \" + _toDisplayString($props.patente), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('close')),\n    class: \"absolute top-4 right-4 p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition\",\n    title: \"Cerrar\"\n  }, [_createVNode(_component_SvgIcon, {\n    name: \"close\",\n    class: \"w-6 h-6\"\n  })]), _createCommentVNode(\" Tabla escritorio \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"table\", _hoisted_5, [_cache[1] || (_cache[1] = _createElementVNode(\"thead\", {\n    class: \"bg-[#102372] dark:bg-[#102372] sticky top-0 z-10 text-gray-100\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Nombre\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Tipo\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Intervalo\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Último\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Umbral\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Actual\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Faltante\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Fecha Creación\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Estado\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Editar\"), _createElementVNode(\"th\", {\n    class: \"py-2 px-3 border-b border-gray-300 dark:border-gray-600\"\n  }, \"Eliminar\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.mantencionesConEstado, (m, idx) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: idx,\n      class: \"hover:bg-gray-50 dark:hover:bg-gray-700 border-b dark:border-gray-600\"\n    }, [_createElementVNode(\"td\", _hoisted_6, _toDisplayString(m.nombre || m.name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_7, _toDisplayString(m.tipo || m.type), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(m.intervalo), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, _toDisplayString(m.ultimo), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString(m.umbral), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(m.actual), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, _toDisplayString(m.faltante), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString($options.formatFecha(m.fechaCreacion)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, [m.estado === 'OK' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_15)) : m.estado === 'Próxima mantención' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_16)) : m.estado === 'Requiere mantención' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_17)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"td\", _hoisted_18, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('editar', idx),\n      class: \"bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-xs sm:text-sm w-full\"\n    }, \" Editar \", 8 /* PROPS */, _hoisted_19)]), _createElementVNode(\"td\", _hoisted_20, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('eliminar', idx),\n      class: \"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs sm:text-sm w-full\"\n    }, \" Eliminar \", 8 /* PROPS */, _hoisted_21)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createCommentVNode(\" Cards móvil \"), _createElementVNode(\"div\", _hoisted_22, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.mantencionesConEstado, (m, idx) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: idx,\n      class: \"bg-gray-100 dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col gap-2 border border-gray-300 dark:border-gray-700\"\n    }, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"span\", _hoisted_24, _toDisplayString(m.nombre || m.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_25, _toDisplayString(m.tipo || m.type), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"div\", _hoisted_27, [_cache[2] || (_cache[2] = _createElementVNode(\"span\", {\n      class: \"text-gray-500 text-xs\"\n    }, \"Intervalo\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(m.intervalo), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_28, [_cache[3] || (_cache[3] = _createElementVNode(\"span\", {\n      class: \"text-gray-500 text-xs\"\n    }, \"Último\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(m.ultimo), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_29, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n      class: \"text-gray-500 text-xs\"\n    }, \"Umbral\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(m.umbral), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_30, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", {\n      class: \"text-gray-500 text-xs\"\n    }, \"Actual\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(m.actual), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_31, [_cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n      class: \"text-gray-500 text-xs\"\n    }, \"Faltante\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString(m.faltante), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_32, [_cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n      class: \"text-gray-500 text-xs\"\n    }, \"Creación\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($options.formatFecha(m.fechaCreacion)), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_33, [m.estado === 'OK' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_34)) : m.estado === 'Próxima mantención' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_35)) : m.estado === 'Requiere mantención' ? (_openBlock(), _createElementBlock(\"img\", _hoisted_36)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('editar', idx),\n      class: \"bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-xs flex-1\"\n    }, \"Editar\", 8 /* PROPS */, _hoisted_38), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.$emit('eliminar', idx),\n      class: \"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs flex-1\"\n    }, \"Eliminar\", 8 /* PROPS */, _hoisted_39)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","src","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_toDisplayString","$props","patente","onClick","_cache","$event","_ctx","$emit","title","_createVNode","_component_SvgIcon","name","_hoisted_4","_hoisted_5","_Fragment","_renderList","$options","mantencionesConEstado","m","idx","key","_hoisted_6","nombre","_hoisted_7","tipo","type","_hoisted_8","intervalo","_hoisted_9","ultimo","_hoisted_10","umbral","_hoisted_11","actual","_hoisted_12","faltante","_hoisted_13","formatFecha","fechaCreacion","_hoisted_14","estado","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalVerMantenciones.vue"],"sourcesContent":["<template>\n  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4\">\n    <div\n      class=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-lg relative w-full max-w-5xl h-auto p-4 sm:p-6 border border-gray-300 dark:border-gray-700 shadow-xl overflow-auto\">\n\n      <!-- Header -->\n      <h2 class=\"text-xl sm:text-2xl font-bold mb-4 text-center text-[#102372] dark:text-[#ff6600]\">\n        Mantenciones Vehículo {{ patente }}\n      </h2>\n\n      <button @click=\"$emit('close')\"\n        class=\"absolute top-4 right-4 p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition\"\n        title=\"Cerrar\">\n        <SvgIcon name=\"close\" class=\"w-6 h-6\" />\n      </button>\n\n      <!-- Tabla escritorio -->\n      <div class=\"hidden sm:block overflow-x-auto\">\n        <table class=\"min-w-full text-xs sm:text-sm md:text-base text-center border-collapse\">\n          <thead class=\"bg-[#102372] dark:bg-[#102372] sticky top-0 z-10 text-gray-100\">\n            <tr>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Nombre</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Tipo</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Intervalo</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Último</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Umbral</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Actual</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Faltante</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Fecha Creación</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Estado</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Editar</th>\n              <th class=\"py-2 px-3 border-b border-gray-300 dark:border-gray-600\">Eliminar</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr v-for=\"(m, idx) in mantencionesConEstado\" :key=\"idx\"\n              class=\"hover:bg-gray-50 dark:hover:bg-gray-700 border-b dark:border-gray-600\">\n              <td class=\"py-2 px-3\">{{ m.nombre || m.name }}</td>\n              <td class=\"py-2 px-3\">{{ m.tipo || m.type }}</td>\n              <td class=\"py-2 px-3\">{{ m.intervalo }}</td>\n              <td class=\"py-2 px-3\">{{ m.ultimo }}</td>\n              <td class=\"py-2 px-3\">{{ m.umbral }}</td>\n              <td class=\"py-2 px-3\">{{ m.actual }}</td>\n              <td class=\"py-2 px-3\">{{ m.faltante }}</td>\n              <td class=\"py-2 px-3\">{{ formatFecha(m.fechaCreacion) }}</td>\n              <td class=\"py-2 px-3\">\n                <img v-if=\"m.estado === 'OK'\" src=\"https://sinergygroup.cl/Mantenciones/img/verde.png\"\n                  class=\"w-16 h-16 object-contain mx-auto\" />\n                <img v-else-if=\"m.estado === 'Próxima mantención'\" src=\"https://sinergygroup.cl/Mantenciones/img/amarillo.png\"\n                  class=\"w-16 h-16 object-contain mx-auto\" />\n                <img v-else-if=\"m.estado === 'Requiere mantención'\" src=\"https://sinergygroup.cl/Mantenciones/img/rojo.png\"\n                  class=\"w-16 h-16 object-contain mx-auto\" />\n              </td>\n              <td class=\"py-2 px-3\">\n                <button @click=\"$emit('editar', idx)\"\n                  class=\"bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-xs sm:text-sm w-full\">\n                  Editar\n                </button>\n              </td>\n              <td class=\"py-2 px-3\">\n                <button @click=\"$emit('eliminar', idx)\"\n                  class=\"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs sm:text-sm w-full\">\n                  Eliminar\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- Cards móvil -->\n      <div class=\"sm:hidden flex flex-col gap-4\">\n        <div v-for=\"(m, idx) in mantencionesConEstado\" :key=\"idx\"\n          class=\"bg-gray-100 dark:bg-gray-800 rounded-lg shadow p-4 flex flex-col gap-2 border border-gray-300 dark:border-gray-700\">\n          \n          <div class=\"flex justify-between items-center\">\n            <span class=\"font-semibold\">{{ m.nombre || m.name }}</span>\n            <span class=\"text-xs px-2 py-1 rounded bg-blue-600 text-white\">{{ m.tipo || m.type }}</span>\n          </div>\n\n          <div class=\"flex flex-wrap gap-2\">\n            <div class=\"flex flex-col\">\n              <span class=\"text-gray-500 text-xs\">Intervalo</span>\n              <span>{{ m.intervalo }}</span>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-gray-500 text-xs\">Último</span>\n              <span>{{ m.ultimo }}</span>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-gray-500 text-xs\">Umbral</span>\n              <span>{{ m.umbral }}</span>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-gray-500 text-xs\">Actual</span>\n              <span>{{ m.actual }}</span>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-gray-500 text-xs\">Faltante</span>\n              <span>{{ m.faltante }}</span>\n            </div>\n            <div class=\"flex flex-col\">\n              <span class=\"text-gray-500 text-xs\">Creación</span>\n              <span>{{ formatFecha(m.fechaCreacion) }}</span>\n            </div>\n          </div>\n\n          <div class=\"flex items-center justify-between mt-2\">\n            <img v-if=\"m.estado === 'OK'\" src=\"https://sinergygroup.cl/Mantenciones/img/verde.png\"\n              class=\"w-12 h-12 object-contain\" />\n            <img v-else-if=\"m.estado === 'Próxima mantención'\" src=\"https://sinergygroup.cl/Mantenciones/img/amarillo.png\"\n              class=\"w-12 h-12 object-contain\" />\n            <img v-else-if=\"m.estado === 'Requiere mantención'\" src=\"https://sinergygroup.cl/Mantenciones/img/rojo.png\"\n              class=\"w-12 h-12 object-contain\" />\n\n            <div class=\"flex gap-2\">\n              <button @click=\"$emit('editar', idx)\"\n                class=\"bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded text-xs flex-1\">Editar</button>\n              <button @click=\"$emit('eliminar', idx)\"\n                class=\"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs flex-1\">Eliminar</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\nexport default {\n    name: 'ModalVerMantenciones',\n    components: { SvgIcon },\n    props: {\n        patente: { type: String, required: true },\n        mantenciones: { type: Array, required: true }\n    },\n    methods: {\n        formatFecha(fechaStr) {\n            const f = new Date(fechaStr)\n            return f.toLocaleString()\n        }\n    },\n    computed: {\n        mantencionesConEstado() {\n            return this.mantenciones.map((m) => {\n                const tipo = (m.tipo || m.type || '').toString().trim()\n                const intervalo = Number(m.intervalo || 0)\n                const alerta = Number(m.alerta || 0)\n\n                let umbral = null\n                let faltante = null\n                let estado = 'Desconocido'\n\n                if (tipo === 'Por Odómetro') {\n                    const ultimo = Number(m.ultimo || 0)\n                    const actual = Number(m.actual || 0)\n                    const siguiente = ultimo + intervalo\n                    umbral = siguiente\n                    faltante = siguiente - actual // km faltantes (si <=0 ya vencido)\n\n                    if (faltante <= 0) estado = 'Requiere mantención'\n                    else if (faltante <= alerta) estado = 'Próxima mantención'\n                    else estado = 'OK'\n                } else if (tipo === 'Por Tiempo') {\n                    // convertir ultimo en fecha válida\n                    let ultimaFecha\n                    if (typeof m.ultimo === 'string' && m.ultimo.includes('-')) {\n                        // aceptar yyyy-mm-dd o dd-mm-yyyy? asumiremos ISO yyyy-mm-dd, pero intentamos ser tolerantes\n                        const parts = m.ultimo.split('-')\n                        if (parts.length === 3 && parts[0].length === 4) { // yyyy-mm-dd\n                            ultimaFecha = new Date(m.ultimo)\n                        } else if (parts.length === 3) { // dd-mm-yyyy\n                            const [dd, mm, yyyy] = parts\n                            ultimaFecha = new Date(Number(yyyy), Number(mm) - 1, Number(dd))\n                        } else {\n                            ultimaFecha = new Date(m.ultimo)\n                        }\n                    } else {\n                        // si no es string, no sabemos; usar hoy como fallback (evita NaN)\n                        ultimaFecha = new Date()\n                    }\n\n                    if (isNaN(ultimaFecha.getTime())) {\n                        // fecha inválida -> marcar\n                        estado = 'Desconocido'\n                        umbral = null\n                        faltante = null\n                    } else {\n                        const umbralDate = new Date(ultimaFecha)\n                        umbralDate.setDate(umbralDate.getDate() + intervalo)\n                        // faltante en días\n                        const hoy = new Date()\n                        const diffMs = umbralDate - new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate())\n                        faltante = Math.ceil(diffMs / (1000 * 60 * 60 * 24))\n\n                        umbral = umbralDate.toISOString().split('T')[0] // yyyy-mm-dd\n\n                        if (faltante <= 0) estado = 'Requiere mantención'\n                        else if (faltante <= alerta) estado = 'Próxima mantención'\n                        else estado = 'OK'\n                    }\n                } else {\n                    // tipo desconocido\n                    estado = 'Desconocido'\n                }\n\n                return { ...m, umbral, faltante, estado }\n            })\n        }\n    }\n\n}\n</script>\n\n<style scoped>\nbutton {\n    transition: all 0.2s ease-in-out;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}