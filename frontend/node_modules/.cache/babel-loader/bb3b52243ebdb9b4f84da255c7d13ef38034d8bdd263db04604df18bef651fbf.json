{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex flex-col p-4\"\n};\nconst _hoisted_2 = {\n  class: \"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-gray-700 pb-2\"\n};\nconst _hoisted_3 = {\n  class: \"flex gap-2 mt-2 sm:mt-0\"\n};\nconst _hoisted_4 = {\n  class: \"overflow-y-auto mt-4 max-h-[400px] rounded-lg shadow\"\n};\nconst _hoisted_5 = {\n  class: \"min-w-full bg-gray-800 text-white\"\n};\nconst _hoisted_6 = {\n  class: \"bg-[#102372]\"\n};\nconst _hoisted_7 = {\n  class: \"px-4 py-2\"\n};\nconst _hoisted_8 = {\n  class: \"px-4 py-2\"\n};\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = {\n  class: \"px-4 py-2\"\n};\nconst _hoisted_11 = {\n  class: \"px-4 py-2\"\n};\nconst _hoisted_12 = {\n  class: \"px-4 py-2\"\n};\nconst _hoisted_13 = {\n  class: \"px-4 py-2\"\n};\nconst _hoisted_14 = {\n  class: \"px-4 py-2 flex gap-2\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n  class: \"flex justify-center gap-1 mt-2 text-gray-300\"\n};\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Navbar \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchTerm = $event),\n    placeholder: \"Buscar empresa...\",\n    class: \"w-full sm:flex-1 px-3 py-1 rounded bg-gray-700 text-white focus:outline-none focus:ring focus:ring-indigo-500\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchTerm]]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.openModal()),\n    class: \"bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded text-white\"\n  }, \" ‚ûï Agregar Empresa \"), $setup.selectedIds.length ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.deleteSelected && _ctx.deleteSelected(...args)),\n    class: \"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white\"\n  }, \" üóë Eliminar seleccionados \")) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Tabla virtual / paginada \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"table\", _hoisted_5, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", _hoisted_6, [_createElementVNode(\"th\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.selectAll = $event),\n    onChange: $setup.toggleSelectAll\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelCheckbox, $setup.selectAll]])]), _createElementVNode(\"th\", {\n    class: \"px-4 py-2 cursor-pointer\",\n    onClick: _cache[4] || (_cache[4] = $event => _ctx.sortBy('createdAt'))\n  }, \"Fecha\"), _createElementVNode(\"th\", {\n    class: \"px-4 py-2 cursor-pointer\",\n    onClick: _cache[5] || (_cache[5] = $event => _ctx.sortBy('name'))\n  }, \"Nombre\"), _cache[7] || (_cache[7] = _createElementVNode(\"th\", {\n    class: \"px-4 py-2\"\n  }, \"RUT\", -1 /* CACHED */)), _cache[8] || (_cache[8] = _createElementVNode(\"th\", {\n    class: \"px-4 py-2\"\n  }, \"Contacto\", -1 /* CACHED */)), _cache[9] || (_cache[9] = _createElementVNode(\"th\", {\n    class: \"px-4 py-2\"\n  }, \"Acciones\", -1 /* CACHED */))])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.paginatedCustomers, customer => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: customer.id,\n      class: \"hover:bg-gray-700\"\n    }, [_createElementVNode(\"td\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.selectedIds = $event),\n      value: customer.id\n    }, null, 8 /* PROPS */, _hoisted_9), [[_vModelCheckbox, $setup.selectedIds]])]), _createElementVNode(\"td\", _hoisted_10, _toDisplayString($setup.formatDate(customer.createdAt)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(customer.name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, _toDisplayString(customer.rut), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString(customer.contact), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.openModal(customer),\n      class: \"bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded\"\n    }, \"‚úèÔ∏è\", 8 /* PROPS */, _hoisted_15), _createElementVNode(\"button\", {\n      onClick: $event => $setup.copyCustomerData(customer),\n      class: \"bg-gray-600 hover:bg-gray-700 px-2 py-1 rounded\"\n    }, \"üìã\", 8 /* PROPS */, _hoisted_16)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createCommentVNode(\" Paginaci√≥n simple \"), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"button\", {\n    onClick: $setup.prevPage,\n    disabled: $setup.currentPage === 1,\n    class: \"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600\"\n  }, \"‚óÄ\", 8 /* PROPS */, _hoisted_18), _createElementVNode(\"span\", null, _toDisplayString($setup.currentPage) + \" / \" + _toDisplayString($setup.totalPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: $setup.nextPage,\n    disabled: $setup.currentPage === $setup.totalPages,\n    class: \"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600\"\n  }, \"‚ñ∂\", 8 /* PROPS */, _hoisted_19)]), _createCommentVNode(\" Modal reutilizable \"), $setup.showModal ? (_openBlock(), _createBlock($setup[\"Modal\"], {\n    key: 0,\n    company: $setup.editingCompany,\n    onClose: $setup.closeModal,\n    onSave: $setup.saveCompany,\n    templates: $setup.templates\n  }, null, 8 /* PROPS */, [\"company\", \"templates\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","$setup","searchTerm","$event","placeholder","_hoisted_3","onClick","_cache","openModal","selectedIds","length","args","_ctx","deleteSelected","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","type","selectAll","onChange","toggleSelectAll","sortBy","_Fragment","_renderList","paginatedCustomers","customer","key","id","_hoisted_8","value","_hoisted_10","_toDisplayString","formatDate","createdAt","_hoisted_11","name","_hoisted_12","rut","_hoisted_13","contact","_hoisted_14","_hoisted_15","copyCustomerData","_hoisted_16","_hoisted_17","prevPage","disabled","currentPage","_hoisted_18","totalPages","nextPage","_hoisted_19","showModal","_createBlock","company","editingCompany","onClose","closeModal","onSave","saveCompany","templates"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/Views/EmpresasView.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col p-4\">\n    <!-- Navbar -->\n    <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-gray-700 pb-2\">\n      <input v-model=\"searchTerm\" placeholder=\"Buscar empresa...\"\n        class=\"w-full sm:flex-1 px-3 py-1 rounded bg-gray-700 text-white focus:outline-none focus:ring focus:ring-indigo-500\" />\n\n      <div class=\"flex gap-2 mt-2 sm:mt-0\">\n        <button @click=\"openModal()\" class=\"bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded text-white\">\n          ‚ûï Agregar Empresa\n        </button>\n        <button v-if=\"selectedIds.length\" @click=\"deleteSelected\"\n          class=\"bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white\">\n          üóë Eliminar seleccionados\n        </button>\n      </div>\n    </div>\n\n    <!-- Tabla virtual / paginada -->\n    <div class=\"overflow-y-auto mt-4 max-h-[400px] rounded-lg shadow\">\n      <table class=\"min-w-full bg-gray-800 text-white\">\n        <thead>\n          <tr class=\"bg-[#102372]\">\n            <th class=\"px-4 py-2\"><input type=\"checkbox\" v-model=\"selectAll\" @change=\"toggleSelectAll\" /></th>\n            <th class=\"px-4 py-2 cursor-pointer\" @click=\"sortBy('createdAt')\">Fecha</th>\n            <th class=\"px-4 py-2 cursor-pointer\" @click=\"sortBy('name')\">Nombre</th>\n            <th class=\"px-4 py-2\">RUT</th>\n            <th class=\"px-4 py-2\">Contacto</th>\n            <th class=\"px-4 py-2\">Acciones</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"customer in paginatedCustomers\" :key=\"customer.id\" class=\"hover:bg-gray-700\">\n            <td class=\"px-4 py-2\"><input type=\"checkbox\" v-model=\"selectedIds\" :value=\"customer.id\" /></td>\n            <td class=\"px-4 py-2\">{{ formatDate(customer.createdAt) }}</td>\n            <td class=\"px-4 py-2\">{{ customer.name }}</td>\n            <td class=\"px-4 py-2\">{{ customer.rut }}</td>\n            <td class=\"px-4 py-2\">{{ customer.contact }}</td>\n            <td class=\"px-4 py-2 flex gap-2\">\n              <button @click=\"openModal(customer)\" class=\"bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded\">‚úèÔ∏è</button>\n              <button @click=\"copyCustomerData(customer)\" class=\"bg-gray-600 hover:bg-gray-700 px-2 py-1 rounded\">üìã</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Paginaci√≥n simple -->\n    <div class=\"flex justify-center gap-1 mt-2 text-gray-300\">\n      <button @click=\"prevPage\" :disabled=\"currentPage === 1\" class=\"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600\">‚óÄ</button>\n      <span>{{ currentPage }} / {{ totalPages }}</span>\n      <button @click=\"nextPage\" :disabled=\"currentPage === totalPages\" class=\"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600\">‚ñ∂</button>\n    </div>\n\n    <!-- Modal reutilizable -->\n    <Modal v-if=\"showModal\" :company=\"editingCompany\" @close=\"closeModal\" @save=\"saveCompany\" :templates=\"templates\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport Modal from './Modal.vue'\n\nconst customers = ref([...Array(100).keys()].map(i => ({\n  id: i+1,\n  createdAt: new Date(Date.now() - i*86400000).toISOString(),\n  name: `Empresa ${i+1}`,\n  rut: `12.${i+1}.123-4`,\n  contact: `+56 9 12${i+1} 34${i+1}`\n})))\n\nconst searchTerm = ref('')\nconst selectedIds = ref([])\nconst selectAll = ref(false)\nconst showModal = ref(false)\nconst editingCompany = ref(null)\nconst templates = ref([\n  { id: 1, name: 'B√°sico' },\n  { id: 2, name: 'Profesional' },\n  { id: 3, name: 'Avanzado' },\n  { id: 4, name: 'Full' },\n])\n\n// Paginaci√≥n\nconst rowsPerPage = ref(10)\nconst currentPage = ref(1)\nconst totalPages = computed(() => Math.ceil(filteredCustomers.value.length / rowsPerPage.value))\nconst paginatedCustomers = computed(() => {\n  const start = (currentPage.value-1)*rowsPerPage.value\n  return filteredCustomers.value.slice(start, start+rowsPerPage.value)\n})\n\n// B√∫squeda\nconst filteredCustomers = computed(() => {\n  if (!searchTerm.value) return customers.value\n  return customers.value.filter(c =>\n    c.name.toLowerCase().includes(searchTerm.value.toLowerCase()) ||\n    c.rut.toLowerCase().includes(searchTerm.value.toLowerCase()) ||\n    c.contact.toLowerCase().includes(searchTerm.value.toLowerCase())\n  )\n})\n\n// Funciones\nconst toggleSelectAll = () => selectAll.value ? selectedIds.value = filteredCustomers.value.map(c => c.id) : selectedIds.value = []\nconst prevPage = () => currentPage.value = Math.max(currentPage.value-1, 1)\nconst nextPage = () => currentPage.value = Math.min(currentPage.value+1, totalPages.value)\nconst formatDate = date => new Date(date).toLocaleDateString('es-CL')\n\nconst openModal = (company=null) => { editingCompany.value = company; showModal.value = true }\nconst closeModal = () => { showModal.value = false; editingCompany.value = null }\nconst saveCompany = (company) => {\n  if (company.id) {\n    const idx = customers.value.findIndex(c=>c.id===company.id)\n    customers.value[idx] = {...company}\n  } else {\n    customers.value.push({...company, id: crypto.randomUUID(), createdAt: new Date().toISOString()})\n  }\n  closeModal()\n}\n\nconst copyCustomerData = (c) => navigator.clipboard.writeText(`Nombre: ${c.name}\\nRUT: ${c.rut}\\nContacto: ${c.contact}`)\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}