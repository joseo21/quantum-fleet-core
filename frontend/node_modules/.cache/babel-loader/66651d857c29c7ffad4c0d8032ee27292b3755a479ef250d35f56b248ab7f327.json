{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-lg shadow-lg w-full max-w-3xl p-6 relative\"\n};\nconst _hoisted_3 = {\n  class: \"mb-4\"\n};\nconst _hoisted_4 = [\"value\", \"disabled\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"grid grid-cols-1 md:grid-cols-2 gap-4\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  class: \"md:col-span-2\"\n};\nconst _hoisted_9 = {\n  class: \"mt-6 flex justify-end gap-3\"\n};\nconst _hoisted_10 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" Fondo semitransparente \"), $props.showAddModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" T铆tulo \"), _cache[14] || (_cache[14] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-bold mb-4 text-center\"\n  }, \"Agregar Mantenci贸n\", -1 /* CACHED */)), _createCommentVNode(\" Selector de Template \"), _createElementVNode(\"div\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    class: \"font-semibold block mb-1\"\n  }, \"Seleccionar tipo de mantenci贸n\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.selectedTemplateId = $event),\n    onChange: $setup.onTemplateSelect,\n    class: \"w-full border border-gray-300 dark:border-gray-700 rounded px-2 py-1 bg-white dark:bg-gray-800\"\n  }, [_cache[7] || (_cache[7] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Seleccione una plantilla...\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.templates, t => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: t.id,\n      value: t.id,\n      disabled: t.used\n    }, _toDisplayString(t.name) + \" - \" + _toDisplayString(t.type), 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedTemplateId]])]), _createCommentVNode(\" Formulario de detalles \"), $setup.selectedTemplate ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"font-semibold block mb-1\"\n  }, \"Nombre\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.maintenance.name = $event),\n    disabled: \"\",\n    class: \"w-full border rounded px-2 py-1 dark:bg-gray-800\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.maintenance.name]])]), _createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"font-semibold block mb-1\"\n  }, \"Tipo\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.maintenance.type = $event),\n    disabled: \"\",\n    class: \"w-full border rounded px-2 py-1 dark:bg-gray-800\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.maintenance.type]])]), _createCommentVNode(\" Umbral din谩mico \"), $setup.maintenance.type === 'Por Od贸metro' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"font-semibold block mb-1\"\n  }, \"Umbral (Km)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.maintenance.km = $event),\n    class: \"w-full border rounded px-2 py-1 dark:bg-gray-800\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.maintenance.km]])])) : $setup.maintenance.type === 'Por Tiempo' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"font-semibold block mb-1\"\n  }, \"Umbral (Fecha)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.maintenance.fechaUltima = $event),\n    class: \"w-full border rounded px-2 py-1 dark:bg-gray-800\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.maintenance.fechaUltima]])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_8, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    class: \"font-semibold block mb-1\"\n  }, \"Detalles\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.maintenance.details = $event),\n    class: \"w-full border rounded px-2 py-1 dark:bg-gray-800\",\n    rows: \"2\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.maintenance.details]])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Botones \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = $event => _ctx.$emit('close')),\n    class: \"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white\"\n  }, \"Cancelar\"), _createElementVNode(\"button\", {\n    onClick: $setup.guardar,\n    disabled: !$setup.selectedTemplate,\n    class: \"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50\"\n  }, \"Guardar\", 8 /* PROPS */, _hoisted_10)])])])) : _createCommentVNode(\"v-if\", true)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createCommentVNode","$props","showAddModal","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$setup","selectedTemplateId","$event","onChange","onTemplateSelect","value","_Fragment","_renderList","templates","t","key","id","disabled","used","name","_toDisplayString","type","_hoisted_4","selectedTemplate","_hoisted_5","maintenance","_hoisted_6","km","_hoisted_7","fechaUltima","_hoisted_8","details","rows","_hoisted_9","onClick","_cache","_ctx","$emit","guardar","_hoisted_10"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalAgregar.vue"],"sourcesContent":["<template>\n  <!-- Fondo semitransparente -->\n  <div v-if=\"showAddModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n    <div class=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-lg shadow-lg w-full max-w-3xl p-6 relative\">\n      \n      <!-- T铆tulo -->\n      <h2 class=\"text-xl font-bold mb-4 text-center\">Agregar Mantenci贸n</h2>\n\n      <!-- Selector de Template -->\n      <div class=\"mb-4\">\n        <label class=\"font-semibold block mb-1\">Seleccionar tipo de mantenci贸n</label>\n        <select v-model=\"selectedTemplateId\" @change=\"onTemplateSelect\"\n          class=\"w-full border border-gray-300 dark:border-gray-700 rounded px-2 py-1 bg-white dark:bg-gray-800\">\n          <option value=\"\">Seleccione una plantilla...</option>\n          <option v-for=\"t in templates\" :key=\"t.id\" :value=\"t.id\" :disabled=\"t.used\">\n            {{ t.name }} - {{ t.type }}\n          </option>\n        </select>\n      </div>\n\n      <!-- Formulario de detalles -->\n      <div v-if=\"selectedTemplate\" class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\n        <div>\n          <label class=\"font-semibold block mb-1\">Nombre</label>\n          <input v-model=\"maintenance.name\" disabled class=\"w-full border rounded px-2 py-1 dark:bg-gray-800\" />\n        </div>\n\n        <div>\n          <label class=\"font-semibold block mb-1\">Tipo</label>\n          <input v-model=\"maintenance.type\" disabled class=\"w-full border rounded px-2 py-1 dark:bg-gray-800\" />\n        </div>\n\n        <!-- Umbral din谩mico -->\n        <div v-if=\"maintenance.type === 'Por Od贸metro'\">\n          <label class=\"font-semibold block mb-1\">Umbral (Km)</label>\n          <input type=\"number\" v-model=\"maintenance.km\" class=\"w-full border rounded px-2 py-1 dark:bg-gray-800\" />\n        </div>\n\n        <div v-else-if=\"maintenance.type === 'Por Tiempo'\">\n          <label class=\"font-semibold block mb-1\">Umbral (Fecha)</label>\n          <input type=\"date\" v-model=\"maintenance.fechaUltima\" class=\"w-full border rounded px-2 py-1 dark:bg-gray-800\" />\n        </div>\n\n        <div class=\"md:col-span-2\">\n          <label class=\"font-semibold block mb-1\">Detalles</label>\n          <textarea v-model=\"maintenance.details\" class=\"w-full border rounded px-2 py-1 dark:bg-gray-800\" rows=\"2\"></textarea>\n        </div>\n\n      </div>\n\n      <!-- Botones -->\n      <div class=\"mt-6 flex justify-end gap-3\">\n        <button @click=\"$emit('close')\" class=\"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white\">Cancelar</button>\n        <button @click=\"guardar\" :disabled=\"!selectedTemplate\"\n          class=\"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50\">Guardar</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\n\n// Props\nconst props = defineProps({\n  showAddModal: Boolean,\n  selectedPatente: String,\n  mantenciones: Array,\n  templates: Array\n})\n\n// Emits\nconst emit = defineEmits(['close', 'save'])\n\n// Estado local\nconst selectedTemplateId = ref('')\nconst selectedTemplate = ref(null)\nconst maintenance = ref({\n  name: '',\n  type: '',\n  km: '',\n  fechaUltima: '',\n  details: ''\n})\n\n//  Cuando cambia el template seleccionado\nfunction onTemplateSelect() {\n  const template = props.templates.find(t => t.id === parseInt(selectedTemplateId.value))\n  if (!template) return\n\n  selectedTemplate.value = template\n  maintenance.value.name = template.name\n  maintenance.value.type = template.type\n\n  // Inicializar campo de umbral\n  if (template.type === 'Por Od贸metro') {\n    maintenance.value.km = 0\n    maintenance.value.fechaUltima = ''\n  } else {\n    maintenance.value.fechaUltima = new Date().toISOString().split('T')[0]\n    maintenance.value.km = ''\n  }\n}\n\n//  Guardar y emitir al padre\nfunction guardar() {\n  if (!selectedTemplate.value) return\n\n  const nuevaMantencion = {\n    nombre: maintenance.value.name,\n    tipo: maintenance.value.type,\n    km: maintenance.value.km,\n    fechaUltima: maintenance.value.fechaUltima,\n    detalles: maintenance.value.details,\n    estado: 'OK'\n  }\n\n  emit('save', { nuevaMantencion, templateId: selectedTemplate.value.id })\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}