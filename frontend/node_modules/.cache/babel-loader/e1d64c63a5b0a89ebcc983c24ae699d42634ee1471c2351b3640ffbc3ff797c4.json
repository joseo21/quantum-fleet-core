{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport SvgIcon from '@/components/icons/SvgIcon.vue';\nexport default {\n  name: \"ModalAgregarMantencion\",\n  components: {\n    SvgIcon\n  },\n  props: {\n    showAddModal: {\n      type: Boolean,\n      required: true\n    },\n    usedTemplates: {\n      // IDs de templates ya usados por esta patente\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      step: 1,\n      templates: [{\n        id: 1,\n        name: \"Mantención Básica\",\n        description: \"Cambio de aceite y revisión general\",\n        tipo: \"Preventiva\"\n      }, {\n        id: 2,\n        name: \"Mantención Intermedia\",\n        description: \"Filtros, frenos y revisión eléctrica\",\n        tipo: \"Intermedia\"\n      }, {\n        id: 3,\n        name: \"Mantención Completa\",\n        description: \"Motor, transmisión y suspensión\",\n        tipo: \"Completa\"\n      }],\n      selectedTemplate: null,\n      newMaintenance: {\n        nombre: \"\",\n        tipo: \"\",\n        fecha: \"\",\n        odometro: \"\",\n        observaciones: \"\"\n      },\n      modalButtonText: \"Guardar Mantención\",\n      isModalButtonDisabled: false\n    };\n  },\n  methods: {\n    isTemplateUsed(templateId) {\n      return this.usedTemplates.includes(templateId);\n    },\n    goToNextStep() {\n      const template = this.templates.find(t => t.id === this.selectedTemplate);\n      if (template) {\n        this.newMaintenance.nombre = template.name;\n        this.newMaintenance.tipo = template.tipo;\n        this.step = 2;\n      }\n    },\n    cancel() {\n      this.$emit(\"close\");\n      this.step = 1;\n      this.selectedTemplate = null;\n      this.newMaintenance = {\n        nombre: \"\",\n        tipo: \"\",\n        fecha: \"\",\n        odometro: \"\",\n        observaciones: \"\"\n      };\n    },\n    addMaintenance() {\n      this.isModalButtonDisabled = true;\n      this.$emit(\"save\", this.newMaintenance);\n      this.cancel();\n      this.isModalButtonDisabled = false;\n    }\n  }\n};","map":{"version":3,"names":["SvgIcon","name","components","props","showAddModal","type","Boolean","required","usedTemplates","Array","default","data","step","templates","id","description","tipo","selectedTemplate","newMaintenance","nombre","fecha","odometro","observaciones","modalButtonText","isModalButtonDisabled","methods","isTemplateUsed","templateId","includes","goToNextStep","template","find","t","cancel","$emit","addMaintenance"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/MantencionesUi/ModalAgregar.vue"],"sourcesContent":["<template>\n    <!-- Modal multi-paso -->\n    <div v-if=\"showAddModal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div\n            class=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-lg relative flex flex-col w-full max-w-3xl h-auto p-6 border border-gray-300 dark:border-gray-700 shadow-xl\">\n            \n            <!-- Botón volver paso 2 -> 1 -->\n            <button v-if=\"step === 2\" @click=\"step = 1\"\n                class=\"absolute top-4 left-4 p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition\"\n                title=\"Volver\">\n                <SvgIcon name=\"arrow-left\" class=\"w-6 h-6\" />\n            </button>\n\n            <h2 class=\"text-2xl font-bold mb-4 text-center text-[#102372] dark:text-[#ff6600]\">\n                {{ step === 1 ? \"Seleccionar Template de Mantención\" : \"Agregar Mantención\" }}\n            </h2>\n\n            <span class=\"h-px bg-gray-300 dark:bg-gray-700 mb-4\"></span>\n\n            <!-- Paso 1: Seleccionar Template -->\n            <div v-if=\"step === 1\" class=\"flex flex-col items-center gap-4 py-4\">\n                <!-- Fila superior -->\n                <div class=\"flex justify-center gap-4 flex-wrap\">\n                    <div\n                        v-for=\"template in templates\"\n                        :key=\"template.id\"\n                        @click=\"!isTemplateUsed(template.id) && (selectedTemplate = template.id)\"\n                        :class=\"[\n                            'relative p-6 w-48 rounded-lg border cursor-pointer text-center transition-all',\n                            isTemplateUsed(template.id)\n                                ? 'opacity-50 cursor-not-allowed border-gray-400 dark:border-gray-700'\n                                : selectedTemplate === template.id\n                                    ? 'border-[#ff6600] bg-orange-50 dark:bg-[#ff6600]/20 dark:border-[#ff6600]'\n                                    : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800'\n                        ]\"\n                    >\n                        <h3 class=\"text-lg font-semibold mb-2\">{{ template.name }}</h3>\n                        <p class=\"text-gray-600 dark:text-gray-300 text-sm mb-3\">{{ template.description }}</p>\n\n                        <!-- Etiqueta de bloqueo -->\n                        <span v-if=\"isTemplateUsed(template.id)\"\n                            class=\"absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded\">\n                            Ya agendada\n                        </span>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Paso 2: Agregar Mantención -->\n            <form v-else @submit.prevent=\"addMaintenance\" class=\"flex-1 flex flex-col gap-3 py-2 overflow-y-auto\">\n                <input v-model=\"newMaintenance.nombre\" type=\"text\" readonly\n                    class=\"px-3 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 w-full\"\n                    placeholder=\"Nombre de mantención\" />\n\n                <input v-model=\"newMaintenance.tipo\" type=\"text\" readonly\n                    class=\"px-3 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 w-full\"\n                    placeholder=\"Tipo de mantención\" />\n\n                <input v-model=\"newMaintenance.fecha\" type=\"date\"\n                    class=\"px-3 py-2 rounded bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-[#ff6600] w-full\"\n                    required />\n\n                <input v-model=\"newMaintenance.odometro\" type=\"number\" placeholder=\"Odómetro (km)\"\n                    class=\"px-3 py-2 rounded bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-[#ff6600] w-full\"\n                    required />\n\n                <textarea v-model=\"newMaintenance.observaciones\" placeholder=\"Observaciones\"\n                    class=\"px-3 py-2 rounded bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-[#ff6600] w-full resize-none\"\n                    rows=\"3\"></textarea>\n            </form>\n\n            <!-- Botones -->\n            <div class=\"flex justify-between mt-6 gap-2\">\n                <button @click=\"cancel\"\n                    class=\"bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 text-gray-900 dark:text-white px-4 py-2 rounded w-[48%] transition\">\n                    Cancelar\n                </button>\n\n                <button\n                    v-if=\"step === 1\"\n                    @click=\"goToNextStep\"\n                    :disabled=\"!selectedTemplate\"\n                    :class=\"[\n                        'px-4 py-2 rounded w-[48%] font-semibold transition',\n                        selectedTemplate\n                            ? 'bg-[#ff6600] hover:bg-[#e65500] text-white'\n                            : 'bg-[#ff6600] opacity-50 cursor-not-allowed text-white'\n                    ]\"\n                >\n                    Siguiente\n                </button>\n\n                <button\n                    v-else\n                    type=\"submit\"\n                    :disabled=\"isModalButtonDisabled\"\n                    :class=\"[\n                        'px-4 py-2 rounded w-[48%] font-semibold transition',\n                        isModalButtonDisabled\n                            ? 'bg-[#102372] opacity-50 cursor-not-allowed text-white'\n                            : 'bg-[#102372] hover:bg-[#0d1c5a] text-white'\n                    ]\"\n                >\n                    {{ modalButtonText }}\n                </button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport SvgIcon from '@/components/icons/SvgIcon.vue'\n\nexport default {\n    name: \"ModalAgregarMantencion\",\n    components: { SvgIcon },\n    props: {\n        showAddModal: { type: Boolean, required: true },\n        usedTemplates: { // IDs de templates ya usados por esta patente\n            type: Array,\n            default: () => [],\n        },\n    },\n    data() {\n        return {\n            step: 1,\n            templates: [\n                { id: 1, name: \"Mantención Básica\", description: \"Cambio de aceite y revisión general\", tipo: \"Preventiva\" },\n                { id: 2, name: \"Mantención Intermedia\", description: \"Filtros, frenos y revisión eléctrica\", tipo: \"Intermedia\" },\n                { id: 3, name: \"Mantención Completa\", description: \"Motor, transmisión y suspensión\", tipo: \"Completa\" },\n            ],\n            selectedTemplate: null,\n            newMaintenance: { nombre: \"\", tipo: \"\", fecha: \"\", odometro: \"\", observaciones: \"\" },\n            modalButtonText: \"Guardar Mantención\",\n            isModalButtonDisabled: false,\n        };\n    },\n    methods: {\n        isTemplateUsed(templateId) {\n            return this.usedTemplates.includes(templateId);\n        },\n        goToNextStep() {\n            const template = this.templates.find(t => t.id === this.selectedTemplate);\n            if (template) {\n                this.newMaintenance.nombre = template.name;\n                this.newMaintenance.tipo = template.tipo;\n                this.step = 2;\n            }\n        },\n        cancel() {\n            this.$emit(\"close\");\n            this.step = 1;\n            this.selectedTemplate = null;\n            this.newMaintenance = { nombre: \"\", tipo: \"\", fecha: \"\", odometro: \"\", observaciones: \"\" };\n        },\n        addMaintenance() {\n            this.isModalButtonDisabled = true;\n            this.$emit(\"save\", this.newMaintenance);\n            this.cancel();\n            this.isModalButtonDisabled = false;\n        },\n    },\n};\n</script>\n\n<style scoped>\nbutton {\n    transition: all 0.2s ease-in-out;\n}\n\ninput::placeholder,\ntextarea::placeholder {\n    color: #9ca3af;\n}\n</style>\n"],"mappings":";;AA+GA,OAAOA,OAAM,MAAO,gCAA+B;AAEnD,eAAe;EACXC,IAAI,EAAE,wBAAwB;EAC9BC,UAAU,EAAE;IAAEF;EAAQ,CAAC;EACvBG,KAAK,EAAE;IACHC,YAAY,EAAE;MAAEC,IAAI,EAAEC,OAAO;MAAEC,QAAQ,EAAE;IAAK,CAAC;IAC/CC,aAAa,EAAE;MAAE;MACbH,IAAI,EAAEI,KAAK;MACXC,OAAO,EAAEA,CAAA,KAAM;IACnB;EACJ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,IAAI,EAAE,CAAC;MACPC,SAAS,EAAE,CACP;QAAEC,EAAE,EAAE,CAAC;QAAEb,IAAI,EAAE,mBAAmB;QAAEc,WAAW,EAAE,qCAAqC;QAAEC,IAAI,EAAE;MAAa,CAAC,EAC5G;QAAEF,EAAE,EAAE,CAAC;QAAEb,IAAI,EAAE,uBAAuB;QAAEc,WAAW,EAAE,sCAAsC;QAAEC,IAAI,EAAE;MAAa,CAAC,EACjH;QAAEF,EAAE,EAAE,CAAC;QAAEb,IAAI,EAAE,qBAAqB;QAAEc,WAAW,EAAE,iCAAiC;QAAEC,IAAI,EAAE;MAAW,CAAC,CAC3G;MACDC,gBAAgB,EAAE,IAAI;MACtBC,cAAc,EAAE;QAAEC,MAAM,EAAE,EAAE;QAAEH,IAAI,EAAE,EAAE;QAAEI,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE,EAAE;QAAEC,aAAa,EAAE;MAAG,CAAC;MACpFC,eAAe,EAAE,oBAAoB;MACrCC,qBAAqB,EAAE;IAC3B,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACLC,cAAcA,CAACC,UAAU,EAAE;MACvB,OAAO,IAAI,CAACnB,aAAa,CAACoB,QAAQ,CAACD,UAAU,CAAC;IAClD,CAAC;IACDE,YAAYA,CAAA,EAAG;MACX,MAAMC,QAAO,GAAI,IAAI,CAACjB,SAAS,CAACkB,IAAI,CAACC,CAAA,IAAKA,CAAC,CAAClB,EAAC,KAAM,IAAI,CAACG,gBAAgB,CAAC;MACzE,IAAIa,QAAQ,EAAE;QACV,IAAI,CAACZ,cAAc,CAACC,MAAK,GAAIW,QAAQ,CAAC7B,IAAI;QAC1C,IAAI,CAACiB,cAAc,CAACF,IAAG,GAAIc,QAAQ,CAACd,IAAI;QACxC,IAAI,CAACJ,IAAG,GAAI,CAAC;MACjB;IACJ,CAAC;IACDqB,MAAMA,CAAA,EAAG;MACL,IAAI,CAACC,KAAK,CAAC,OAAO,CAAC;MACnB,IAAI,CAACtB,IAAG,GAAI,CAAC;MACb,IAAI,CAACK,gBAAe,GAAI,IAAI;MAC5B,IAAI,CAACC,cAAa,GAAI;QAAEC,MAAM,EAAE,EAAE;QAAEH,IAAI,EAAE,EAAE;QAAEI,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE,EAAE;QAAEC,aAAa,EAAE;MAAG,CAAC;IAC9F,CAAC;IACDa,cAAcA,CAAA,EAAG;MACb,IAAI,CAACX,qBAAoB,GAAI,IAAI;MACjC,IAAI,CAACU,KAAK,CAAC,MAAM,EAAE,IAAI,CAAChB,cAAc,CAAC;MACvC,IAAI,CAACe,MAAM,CAAC,CAAC;MACb,IAAI,CAACT,qBAAoB,GAAI,KAAK;IACtC;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}