{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, computed } from 'vue';\nexport default {\n  __name: 'AgregarEmpresasModal',\n  props: {\n    templates: Array\n  },\n  emits: ['add', 'close'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const step = ref(1);\n    const company = ref({\n      name: '',\n      rut: '',\n      contact: '',\n      city: ''\n    });\n    const selected = ref(null);\n    const isValidRut = rut => /^(\\d{1,2}\\.\\d{3}\\.\\d{3}-[\\dkK])$/.test(rut);\n    const formatRut = () => {\n      let r = company.value.rut.replace(/[^0-9kK]/g, '');\n      if (r.length > 9) r = r.slice(0, 9);\n      if (r.length > 1) {\n        const b = r.slice(0, -1);\n        const dv = r.slice(-1);\n        const rev = b.split('').reverse();\n        const withDots = [];\n        rev.forEach((ch, i) => {\n          if (i > 0 && i % 3 === 0) withDots.push('.');\n          withDots.push(ch);\n        });\n        company.value.rut = withDots.reverse().join('') + '-' + dv;\n      } else company.value.rut = r;\n    };\n    const isStep1Valid = computed(() => {\n      const {\n        name,\n        rut,\n        contact,\n        city\n      } = company.value;\n      return name && rut && contact && city && isValidRut(rut);\n    });\n    const goToNextStep = () => {\n      if (isStep1Valid.value) step.value = 2;else alert('Completa correctamente los campos.');\n    };\n    const add = () => {\n      if (!selected.value) return;\n      emit('add', {\n        ...company.value,\n        templateId: selected.value\n      });\n    };\n    const __returned__ = {\n      props,\n      emit,\n      step,\n      company,\n      selected,\n      isValidRut,\n      formatRut,\n      isStep1Valid,\n      goToNextStep,\n      add,\n      ref,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","props","__props","emit","__emit","step","company","name","rut","contact","city","selected","isValidRut","test","formatRut","r","value","replace","length","slice","b","dv","rev","split","reverse","withDots","forEach","ch","i","push","join","isStep1Valid","goToNextStep","alert","add","templateId"],"sources":["/home/sebastian/quantum-fleet-core/frontend/src/components/EmpresasUi/AgregarEmpresasModal.vue"],"sourcesContent":["<template>\n  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n    <div class=\"bg-white dark:bg-gray-900 rounded-lg w-full max-w-lg p-6 relative\">\n      <h2 class=\"text-2xl font-bold mb-4 text-center text-[#102372] dark:text-[#ff6600]\">\n        {{ step === 1 ? 'Agregar Empresa' : 'Seleccionar Template' }}\n      </h2>\n\n      <!-- Paso 1 -->\n      <form v-if=\"step === 1\" @submit.prevent=\"goToNextStep\" class=\"flex flex-col gap-3\">\n        <input v-model=\"company.name\" placeholder=\"Nombre\" required class=\"input\" />\n        <input v-model=\"company.rut\" placeholder=\"RUT\" required @input=\"formatRut\" class=\"input\" />\n        <input v-model=\"company.contact\" placeholder=\"Contacto\" required class=\"input\" />\n        <input v-model=\"company.city\" placeholder=\"Ciudad\" required class=\"input\" />\n      </form>\n\n      <!-- Paso 2 -->\n      <div v-else class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 py-2\">\n        <div v-for=\"t in templates\" :key=\"t.id\" @click=\"selected = t.id\"\n          :class=\"['p-4 border rounded cursor-pointer', selected === t.id ? 'border-[#ff6600] bg-orange-50' : 'border-gray-300']\">\n          <h3 class=\"font-semibold\">{{ t.name }}</h3>\n          <p class=\"text-sm text-gray-500\">{{ t.description }}</p>\n        </div>\n      </div>\n\n      <!-- Botones -->\n      <div class=\"flex justify-between mt-4\">\n        <button @click=\"$emit('close')\" class=\"bg-gray-500 text-white px-4 py-2 rounded\">Cancelar</button>\n        <button v-if=\"step === 1\" @click=\"goToNextStep\" :disabled=\"!isStep1Valid\" class=\"bg-[#102372] text-white px-4 py-2 rounded\">\n          Siguiente\n        </button>\n        <button v-else @click=\"add\" :disabled=\"!selected\" class=\"bg-[#ff6600] text-white px-4 py-2 rounded\">\n          Crear Empresa\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nconst props = defineProps({ templates: Array })\nconst emit = defineEmits(['add', 'close'])\n\nconst step = ref(1)\nconst company = ref({ name: '', rut: '', contact: '', city: '' })\nconst selected = ref(null)\n\nconst isValidRut = rut => /^(\\d{1,2}\\.\\d{3}\\.\\d{3}-[\\dkK])$/.test(rut)\nconst formatRut = () => {\n  let r = company.value.rut.replace(/[^0-9kK]/g, '')\n  if (r.length > 9) r = r.slice(0, 9)\n  if (r.length > 1) {\n    const b = r.slice(0, -1)\n    const dv = r.slice(-1)\n    const rev = b.split('').reverse()\n    const withDots = []\n    rev.forEach((ch, i) => { if (i > 0 && i % 3 === 0) withDots.push('.'); withDots.push(ch) })\n    company.value.rut = withDots.reverse().join('') + '-' + dv\n  } else company.value.rut = r\n}\n\nconst isStep1Valid = computed(() => {\n  const { name, rut, contact, city } = company.value\n  return name && rut && contact && city && isValidRut(rut)\n})\n\nconst goToNextStep = () => {\n  if (isStep1Valid.value) step.value = 2\n  else alert('Completa correctamente los campos.')\n}\n\nconst add = () => {\n  if (!selected.value) return\n  emit('add', { ...company.value, templateId: selected.value })\n}\n</script>\n\n<style scoped>\n.input {\n  @apply px-3 py-2 border rounded bg-gray-50 dark:bg-gray-800 dark:border-gray-700;\n}\n</style>\n"],"mappings":";;;AAuCA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAI;;;;;;;;;;;;IAClC,MAAMC,KAAK,GAAGC,OAAA;IACd,MAAMC,IAAI,GAAGC,MAAA;IAEb,MAAMC,IAAI,GAAGN,GAAG,CAAC,CAAC;IAClB,MAAMO,OAAO,GAAGP,GAAG,CAAC;MAAEQ,IAAI,EAAE,EAAE;MAAEC,GAAG,EAAE,EAAE;MAAEC,OAAO,EAAE,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC;IAChE,MAAMC,QAAQ,GAAGZ,GAAG,CAAC,IAAI;IAEzB,MAAMa,UAAU,GAAGJ,GAAG,IAAI,kCAAkC,CAACK,IAAI,CAACL,GAAG;IACrE,MAAMM,SAAS,GAAGA,CAAA,KAAM;MACtB,IAAIC,CAAC,GAAGT,OAAO,CAACU,KAAK,CAACR,GAAG,CAACS,OAAO,CAAC,WAAW,EAAE,EAAE;MACjD,IAAIF,CAAC,CAACG,MAAM,GAAG,CAAC,EAAEH,CAAC,GAAGA,CAAC,CAACI,KAAK,CAAC,CAAC,EAAE,CAAC;MAClC,IAAIJ,CAAC,CAACG,MAAM,GAAG,CAAC,EAAE;QAChB,MAAME,CAAC,GAAGL,CAAC,CAACI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QACvB,MAAME,EAAE,GAAGN,CAAC,CAACI,KAAK,CAAC,CAAC,CAAC;QACrB,MAAMG,GAAG,GAAGF,CAAC,CAACG,KAAK,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC;QAChC,MAAMC,QAAQ,GAAG,EAAC;QAClBH,GAAG,CAACI,OAAO,CAAC,CAACC,EAAE,EAAEC,CAAC,KAAK;UAAE,IAAIA,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,KAAK,CAAC,EAAEH,QAAQ,CAACI,IAAI,CAAC,GAAG,CAAC;UAAEJ,QAAQ,CAACI,IAAI,CAACF,EAAE,CAAC;QAAC,CAAC;QAC1FrB,OAAO,CAACU,KAAK,CAACR,GAAG,GAAGiB,QAAQ,CAACD,OAAO,CAAC,CAAC,CAACM,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAGT,EAAC;MAC3D,CAAC,MAAMf,OAAO,CAACU,KAAK,CAACR,GAAG,GAAGO,CAAA;IAC7B;IAEA,MAAMgB,YAAY,GAAG/B,QAAQ,CAAC,MAAM;MAClC,MAAM;QAAEO,IAAI;QAAEC,GAAG;QAAEC,OAAO;QAAEC;MAAK,CAAC,GAAGJ,OAAO,CAACU,KAAI;MACjD,OAAOT,IAAI,IAAIC,GAAG,IAAIC,OAAO,IAAIC,IAAI,IAAIE,UAAU,CAACJ,GAAG;IACzD,CAAC;IAED,MAAMwB,YAAY,GAAGA,CAAA,KAAM;MACzB,IAAID,YAAY,CAACf,KAAK,EAAEX,IAAI,CAACW,KAAK,GAAG,OAChCiB,KAAK,CAAC,oCAAoC;IACjD;IAEA,MAAMC,GAAG,GAAGA,CAAA,KAAM;MAChB,IAAI,CAACvB,QAAQ,CAACK,KAAK,EAAE;MACrBb,IAAI,CAAC,KAAK,EAAE;QAAE,GAAGG,OAAO,CAACU,KAAK;QAAEmB,UAAU,EAAExB,QAAQ,CAACK;MAAM,CAAC;IAC9D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}